(this["webpackJsonpautoflow-ts"]=this["webpackJsonpautoflow-ts"]||[]).push([[0],{413:function(e,t,a){},424:function(e,t,a){"use strict";a.r(t);var n=a(54),c=a.n(n),r=(a(413),a(1)),s=a(25),i=a(28),o=a(505),l=a(4),u=a(494),d=a(521),j=a(522),b=a(115),O=a(3),h=a(510),p=a(524),x=a(236),f=a.n(x),m=a(513),g=a(486),v=a(511),S=a(487),k=a(489),y=a(57),w=a.n(y),C=a(37),N=a.n(C),A=a(128),F=a.n(A),P=a(129),D=a.n(P),T=a(130),E=a.n(T),V=a(0),B=Object(o.a)((function(e){return{title:{flexGrow:1,fontFamily:"Lobster",color:e.titleColor.darkBlue},menuItems:{width:e.mainMenu.width},link:{textDecoration:"none",color:"black"},menuButton:Object(l.a)({marginRight:e.spacing(2)},e.breakpoints.up("lg"),{display:"none"})}}));function M(e){var t=e.window,a=B(),n=Object(i.h)(),c=Object(r.useState)(!1),o=Object(O.a)(c,2),l=o[0],u=o[1],d=void 0!==t?function(){return t().document.body}:void 0,j=function(e){return function(t){("keydown"!==t.type||"Tab"!==t.key&&"Shift"!==t.key)&&u(e)}},x=Object(r.useState)("/all-vehicles"),y=Object(O.a)(x,2),C=y[0],A=y[1];Object(r.useEffect)((function(){var e=n.pathname.match(/(\/[\w-]+)/);e&&A(e[1])}),[n,A]);var P=Object(V.jsxs)("div",{className:a.menuItems,role:"presentation",onClick:j(!1),onKeyDown:j(!1),children:[Object(V.jsx)(h.a,{lgUp:!0,children:Object(V.jsx)(s.b,{className:a.link,to:"/",children:Object(V.jsx)(v.a,{button:!0,children:Object(V.jsx)(b.a,{variant:"h6",component:"h2",className:a.title,children:"AutoFlow"})})})}),Object(V.jsx)(g.a,{}),Object(V.jsx)(s.b,{className:a.link,to:"/all-vehicles/active/asc/10/first/0",children:Object(V.jsxs)(v.a,{button:!0,selected:"/all-vehicles"===C,children:[Object(V.jsx)(S.a,{children:Object(V.jsx)(w.a,{})}),Object(V.jsx)(k.a,{children:"All Vehicles"})]})}),Object(V.jsx)(s.b,{className:a.link,to:"/add-vehicle",children:Object(V.jsxs)(v.a,{button:!0,selected:"/add-vehicle"===C,children:[Object(V.jsx)(S.a,{children:Object(V.jsx)(N.a,{})}),Object(V.jsx)(k.a,{children:"Add Vehicle"})]})}),Object(V.jsx)(g.a,{}),Object(V.jsx)(s.b,{className:a.link,to:"/stages",children:Object(V.jsxs)(v.a,{button:!0,selected:"/stages"===C,children:[Object(V.jsx)(S.a,{children:Object(V.jsx)(w.a,{})}),Object(V.jsx)(k.a,{children:"Stages"})]})}),Object(V.jsx)(s.b,{className:a.link,to:"/people-places",children:Object(V.jsxs)(v.a,{button:!0,selected:"/people-places"===C,children:[Object(V.jsx)(S.a,{children:Object(V.jsx)(w.a,{})}),Object(V.jsx)(k.a,{children:"People/Places"})]})}),Object(V.jsx)(g.a,{}),Object(V.jsx)(s.b,{className:a.link,to:"/analytics/overview",children:Object(V.jsxs)(v.a,{button:!0,selected:"/analytics"===C,children:[Object(V.jsx)(S.a,{children:Object(V.jsx)(F.a,{})}),Object(V.jsx)(k.a,{children:"Analytics"})]})}),Object(V.jsx)(g.a,{}),Object(V.jsx)(s.b,{className:a.link,to:"/demo-actions",children:Object(V.jsxs)(v.a,{button:!0,selected:"/demo-actions"===C,children:[Object(V.jsx)(S.a,{children:Object(V.jsx)(D.a,{})}),Object(V.jsx)(k.a,{children:"Demo Actions"})]})}),Object(V.jsx)(s.b,{className:a.link,to:"/demo-settings",children:Object(V.jsxs)(v.a,{button:!0,selected:"/demo-settings"===C,children:[Object(V.jsx)(S.a,{children:Object(V.jsx)(E.a,{})}),Object(V.jsx)(k.a,{children:"Demo Settings"})]})}),Object(V.jsx)(g.a,{})]});return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(p.a,{edge:"start",className:a.menuButton,color:"inherit","aria-label":"menu",onClick:j(!0),size:"large",children:Object(V.jsx)(f.a,{})}),Object(V.jsxs)("nav",{children:[Object(V.jsx)(h.a,{lgUp:!0,implementation:"css",children:Object(V.jsx)(m.a,{container:d,anchor:"left",open:l,onClose:j(!1),children:P})}),Object(V.jsx)(h.a,{lgDown:!0,implementation:"css",children:Object(V.jsx)(m.a,{variant:"permanent",open:!0,children:P})})]})]})}var I=a(237),L=a.n(I),z=a(508),R=a(525),U=a(114),W=a(8),G=Object(W.a)(R.a)((function(e){return{color:e.theme.titleColor.lightBlue,opacity:"50%"}})),J=Object(o.a)((function(e){return{search:Object(l.a)({paddingLeft:e.spacing(.5),display:"flex",position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(U.a)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(U.a)(e.palette.common.white,.25)},marginLeft:e.spacing(2)},e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"auto"}),inputRoot:{color:"inherit"}}}));function H(){var e=J(),t=Object(i.g)(),a=Object(i.h)(),n=/^[0-9]{5}$/,c=Object(r.useState)(""),s=Object(O.a)(c,2),o=s[0],l=s[1],u=Object(r.useState)(""),d=Object(O.a)(u,2),j=d[0],b=d[1];return Object(V.jsx)(z.a,{className:e.search,size:"small",placeholder:"Stk#",error:!!j,helperText:j,inputProps:{"aria-label":"search"},InputProps:{startAdornment:Object(V.jsx)(G,{position:"start",children:Object(V.jsx)(L.a,{color:"inherit"})}),classes:{root:e.inputRoot}},value:o,onChange:function(e){l(e.target.value)},onKeyDown:function(e){var c=a.pathname;"Enter"===e.key?""!==o&&(n.test(o)?(t.push("/vehicle-details/stock/".concat(o,"/stage?prev=").concat(c)),l("")):b("must be 5 digits")):b("")}})}var Y=a(239),q=a.n(Y),$=a(260),K=a(532),Q=a(6),X=a.n(Q),Z=a(13),_=a(518),ee=a(531),te=a(519),ae=Object(W.a)(te.a)({display:"flex",p:1,justifyContent:"center",alignItems:"center"}),ne=Object(W.a)(te.a)({display:"flex",p:1,justifyContent:"space-between",alignItems:"center"}),ce=Object(W.a)(te.a)({display:"flex",p:1,justifyContent:"space-evenly",alignItems:"center"}),re=Object(W.a)(te.a)({display:"flex",p:1,justifyContent:"start",alignItems:"center"}),se=Object(W.a)(te.a)({display:"flex",p:1,justifyContent:"flex-end",alignItems:"center"}),ie=Object(W.a)(te.a)({display:"flex",p:1,justifyContent:"space-around",alignItems:"center"}),oe=Object(o.a)({flexCenter:{position:"fixed",top:0,left:0,height:"100vh",width:"100vw",backgroundColor:"black",opacity:.5,zIndex:100}});function le(){var e=oe();return Object(V.jsx)(ae,{className:e.flexCenter,children:Object(V.jsx)(ee.a,{})})}function ue(){var e=Object(r.useRef)(!0);return Object(r.useEffect)((function(){return e.current=!0,function(){e.current=!1}})),e}function de(){return new URLSearchParams(Object(i.h)().search)}function je(){return Object(i.i)()}var be="http://localhost:7000/api/demo";function Oe(){return(Oe=Object(Z.a)(X.a.mark((function e(t){var a,n,c,r;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={dbSelection:t},n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)},e.next=4,fetch("http://localhost:7001/api/demo/select-db",n);case 4:return c=e.sent,e.next=7,c.json();case 7:return r=e.sent,e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function he(){return pe.apply(this,arguments)}function pe(){return(pe=Object(Z.a)(X.a.mark((function e(){var t,a;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(be+"/get-defaults");case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xe(){return fe.apply(this,arguments)}function fe(){return(fe=Object(Z.a)(X.a.mark((function e(){var t,a,n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"DELETE",headers:{"Content-Type":"application/json"}},e.next=3,fetch(be+"/clear-database",t);case 3:return a=e.sent,e.next=6,a.json();case 6:return n=e.sent,e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function me(){return ge.apply(this,arguments)}function ge(){return(ge=Object(Z.a)(X.a.mark((function e(){var t,a,n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"POST",headers:{"Content-Type":"application/json"}},e.next=3,fetch(be+"/add-vehicle-descriptors",t);case 3:return a=e.sent,e.next=6,a.json();case 6:return n=e.sent,e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ve(){return Se.apply(this,arguments)}function Se(){return(Se=Object(Z.a)(X.a.mark((function e(){var t,a,n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"POST",headers:{"Content-Type":"application/json"}},e.next=3,fetch(be+"/add-stages",t);case 3:return a=e.sent,e.next=6,a.json();case 6:return n=e.sent,e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ke(e,t){return ye.apply(this,arguments)}function ye(){return(ye=Object(Z.a)(X.a.mark((function e(t,a){var n,c,r;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"POST",headers:{"Content-Type":"application/json"}},e.next=3,fetch(be+"/generate-vehicles/".concat(t,"/").concat(a),n);case 3:return c=e.sent,e.next=6,c.json();case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var we=a(238),Ce=a.n(we),Ne=a(520);function Ae(e){var t=e.errorMessage,a=e.retryAction;return Object(V.jsxs)(ae,{flexDirection:"column",children:[Object(V.jsx)(Ce.a,{}),Object(V.jsx)("p",{children:t}),Object(V.jsx)(g.a,{}),a&&Object(V.jsx)(Ne.a,{onClick:a,children:"Retry"})]})}var Fe=Object(r.createContext)({});function Pe(){return Object(r.useContext)(Fe)}function De(e){var t=Object(_.a)(["demoLoadingTime","demoDb"]),a=Object(O.a)(t,2),n=a[0],c=a[1],s=Object(r.useState)(!1),i=Object(O.a)(s,2),o=i[0],l=i[1],u=Object(r.useState)(0),d=Object(O.a)(u,2),j=d[0],b=d[1],h=Object(r.useState)(!1),p=Object(O.a)(h,2),x=p[0],f=p[1],m=Object(r.useState)(null),g=Object(O.a)(m,2),v=g[0],S=g[1],k=Object(r.useState)(!1),y=Object(O.a)(k,2),w=y[0],C=y[1],N=Object(r.useCallback)((function(e){c("demoDb",e,{path:"/"})}),[c]);function A(){return(A=Object(Z.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return setTimeout(e,j)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(r.useEffect)((function(){n.demoLoadingTime?b(parseInt(n.demoLoadingTime)):b(500),n.demoDb?S(n.demoDb):N("mongodb")}),[n.demoLoadingTime,n.demoDb,N]);var F=Object(r.useCallback)((function(e){f(!1),l(!0),function(e){return Oe.apply(this,arguments)}(e).then((function(){f(!0),l(!1)}),(function(e){console.error(e),C(!0),f(!1),l(!1)}))}),[]);Object(r.useEffect)((function(){v&&F(v)}),[F,v]);var P={loadingTime:j,setLoadingTime:b,db:v,setDb:S,dbReady:x,delay:function(){return A.apply(this,arguments)},saveLoadingTime:function(e){c("demoLoadingTime",e,{path:"/"})},saveDb:N,selectDatabase:F};return Object(V.jsx)(Fe.Provider,{value:P,children:o?Object(V.jsx)(le,{}):w?Object(V.jsx)(Ae,{errorMessage:"Failed to connect to server. Ensure that 'Selection Server' is listening on localhost:7001 and refresh"}):e.children})}var Te=Object(r.createContext)({});function Ee(){return null===Te&&console.error("AuthContext is null, make sure to only use AuthContext within an AuthProvider"),Object(r.useContext)(Te)}function Ve(e){var t=ue(),a=Pe(),n=a.dbReady,c=a.delay,s=e.children,i=Object(_.a)(["user","demoDb","demoLoadingTime"]),o=Object(O.a)(i,3),l=o[0],u=o[1],d=o[2],j=Object(r.useState)(l.user),b=Object(O.a)(j,2),h=b[0],p=b[1],x=Object(r.useState)(!0),f=Object(O.a)(x,2),m=f[0],g=f[1];function v(){return(v=Object(Z.a)(X.a.mark((function e(a){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.current&&g(!0),e.next=3,c();case 3:u("user",a,{path:"/"}),t.current&&g(!1);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){return(S=Object(Z.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.current&&g(!0),e.next=3,c();case 3:d("user",{path:"/"}),d("demoDb",{path:"/"}),d("demoLoadingTime",{path:"/"}),t.current&&g(!1);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var k=Object(r.useState)({defaultStageAssignment:{stage:{id:"",name:""},personPlace:{id:"",name:""}}}),y=Object(O.a)(k,2),w=y[0],C=y[1],N=Object(r.useCallback)(Object(Z.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.current&&g(!0),he().then((function(e){t.current&&g(!1),t.current&&"success"===e.status&&e.data&&C(e.data)}),(function(e){t.current&&g(!1),t.current&&console.error(e)}));case 2:case"end":return e.stop()}}),e)}))),[t]);Object(r.useEffect)((function(){n&&N()}),[N,n]),Object(r.useEffect)((function(){p(l.user)}),[l.user]);var A={currentUser:h,loading:m,logIn:function(e){return v.apply(this,arguments)},logOut:function(){return S.apply(this,arguments)},userPreferences:w,setUserPreferences:C,getUserPreferences:N};return Object(V.jsx)(Te.Provider,{value:A,children:m?Object(V.jsx)(le,{}):s})}function Be(){var e=Ee(),t=e.currentUser,a=e.logOut,n=Object(r.useState)(null),c=Object(O.a)(n,2),s=c[0],i=c[1],o=Boolean(s);return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(p.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){i(e.currentTarget)},color:"inherit",size:"large",children:Object(V.jsx)(q.a,{})}),Object(V.jsxs)($.a,{id:"menu-appbar",anchorEl:s,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:o,onClose:function(){i(null)},children:[Object(V.jsx)(K.a,{disabled:!0,children:t}),Object(V.jsx)(K.a,{onClick:a,children:"LOG OUT"})]})]})}var Me=Object(o.a)((function(e){return{root:{position:"relative",color:e.titleColor.lightBlue,margin:e.spacing(7.5),left:"0",top:"0",zIndex:100},title:{flexGrow:1,fontFamily:"Lobster"},link:{textDecoration:"none",color:e.titleColor.lightBlue},appBar:Object(l.a)({backgroundColor:"#101010"},e.breakpoints.up("lg"),{width:"calc(100% - ".concat(e.mainMenu.width,")")})}}));function Ie(){var e=Me();return Object(V.jsxs)("div",{className:e.root,children:[Object(V.jsx)(u.a,{}),Object(V.jsx)(d.a,{className:e.appBar,color:"transparent",position:"fixed",children:Object(V.jsxs)(j.a,{children:[Object(V.jsx)(M,{}),Object(V.jsx)(b.a,{variant:"h6",component:"h1",className:e.title,children:Object(V.jsx)(s.b,{className:e.link,to:"/",children:"AutoFlow"})}),Object(V.jsx)(H,{}),Object(V.jsx)(Be,{})]})})]})}var Le=a(17);function ze(e){var t=Ee().currentUser,a=e.component,n=Object(V.jsx)("div",{});return t?n=Object(V.jsx)(a,{}):t||(n=Object(V.jsx)(i.a,{to:"/log-in"})),Object(V.jsx)(i.b,Object(Le.a)(Object(Le.a)({},e.exact),{},{path:e.path,children:n}))}var Re=a(262),Ue=Object(W.a)(te.a)((function(e){return{width:"clamp(300px, 98vw, 750px)",margin:"auto",paddingBottom:e.theme.spacing(5),backgroundColor:"white"}})),We=Object(W.a)(te.a)((function(e){return{width:"clamp(300px, 98vw, 500px)",margin:"auto",paddingBottom:e.theme.spacing(2),backgroundColor:"white"}})),Ge=Object(W.a)(te.a)((function(e){return{width:"clamp(200px, 50vw, 300px)",margin:"auto",paddingBottom:e.theme.spacing(2),backgroundColor:"white"}})),Je=Object(W.a)("div")((function(e){return{padding:e.theme.spacing(1),width:"100%",textAlign:"center"}})),He=Object(W.a)(b.a)((function(e){return{color:e.theme.titleColor.darkBlue}}));function Ye(e){return Object(V.jsxs)(ae,{style:{gap:10},children:[e.icon,Object(V.jsx)(He,{variant:e.variant,children:e.children})]})}var qe=Object(W.a)(te.a)({width:"clamp(300px, 98vw, 600px)",padding:10,margin:"0px auto 0px auto",backgroundColor:"white"}),$e=Object(W.a)(te.a)({width:"clamp(300px, 98vw, 450px)",padding:10,margin:"auto",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"}),Ke=Object(W.a)(Re.a)((function(e){var t=e.theme;return{padding:t.spacing(2),margin:t.spacing(1)}})),Qe=Object(o.a)((function(e){return{outerFlex:{height:"80vh",width:"100vw",position:"fixed",x:0,y:0},card:{padding:e.spacing(3)},nameField:{marginTop:0,margin:e.spacing(2)},title:{fontFamily:"Lobster"}}}));function Xe(){var e=Qe(),t=Ee(),a=t.currentUser,n=t.logIn,c=Object(r.useState)(""),s=Object(O.a)(c,2),o=s[0],l=s[1];return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(ae,{className:e.outerFlex,children:Object(V.jsxs)(Ge,{className:e.card,children:[Object(V.jsxs)(Je,{children:[Object(V.jsx)(ae,{children:Object(V.jsx)(He,{className:e.title,variant:"h5",children:"AutoFlow"})}),Object(V.jsx)(g.a,{})]}),Object(V.jsxs)(ae,{flexDirection:"column",children:[Object(V.jsx)(z.a,{id:"user-name",label:"Name",variant:"outlined",size:"small",className:e.nameField,onChange:function(e){l(e.target.value)},value:o,autoComplete:"off"}),Object(V.jsx)(Ne.a,{onClick:function(){return n(o)},color:"primary",variant:"contained",disabled:!(o.length>0),children:"Log In"})]})]})}),a&&Object(V.jsx)(i.a,{to:"/"})]})}var Ze=a(523),_e=a(240),et=a.n(_e),tt=Object(o.a)((function(e){return{trash:{color:e.palette.secondary.main},sold:{color:e.palette.success.main},active:{color:e.palette.primary.main}}}));function at(e){var t,a=tt(),n=Object(i.g)(),c=je(),s=c.statusParam,o=c.sortParam,l=c.perPageParam,u=Object(r.useState)(null),d=Object(O.a)(u,2),j=d[0],b=d[1],h=function(e){b(null),n.push("/all-vehicles/".concat(e,"/").concat(o,"/").concat(l,"/first/0"))};return t="trash"===s?Object(V.jsx)("span",{className:a.trash,children:"TRASH"}):"sold"===s?Object(V.jsx)("span",{className:a.sold,children:"SOLD"}):Object(V.jsx)("span",{className:a.active,children:"ACTIVE"}),Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(Ne.a,{size:"small",startIcon:Object(V.jsx)(et.a,{}),"aria-controls":"filter-menu","aria-haspopup":"true",onClick:function(e){b(e.currentTarget)},children:t}),Object(V.jsxs)($.a,{id:"filter-menu",anchorEl:j,keepMounted:!0,open:Boolean(j),onClose:function(){return h(s)},children:[Object(V.jsx)(K.a,{onClick:function(){return h("active")},children:"Active"}),Object(V.jsx)(K.a,{onClick:function(){return h("sold")},children:"Sold"}),Object(V.jsx)(K.a,{onClick:function(){return h("trash")},children:"Trash"})]})]})}var nt=a(133),ct=a.n(nt);function rt(e){var t=Object(i.g)(),a=e.sort,n=e.setSort,c=je(),r=c.statusParam,s=c.perPageParam,o=de().toString();return Object(V.jsx)(Ne.a,{size:"small",startIcon:Object(V.jsx)(ct.a,{}),"aria-controls":"sort-menu","aria-haspopup":"true",onClick:function(){var e;n(e="asc"===a?"desc":"asc"),t.push("/all-vehicles/".concat(r,"/").concat(e,"/").concat(s,"/first/0?").concat(o))},children:"asc"===a?"oldest":"recent"})}var st=a(533),it=Object(o.a)({addButton:{position:"absolute",right:5,top:5}});function ot(){var e=it();return Object(V.jsx)(te.a,{className:e.addButton,children:Object(V.jsx)(s.b,{to:"/add-vehicle",children:Object(V.jsx)(st.a,{size:"small",color:"primary","aria-label":"add",children:Object(V.jsx)(N.a,{})})})})}var lt=a(529),ut=a(495),dt=a(534),jt=Object(o.a)((function(e){return{dialog:{margin:"auto"},dialogContent:{width:"80vw",maxWidth:400,maxHeight:"90vh"}}}));function bt(e){var t=jt(),a=e.open,n=e.setOpen,c=e.children,r=e.flex;return Object(V.jsx)(ut.a,{className:t.dialog,open:a,onClose:function(){return n(!1)},children:Object(V.jsx)(dt.a,{className:t.dialogContent,style:r?{display:"flex",justifyContent:"center",alignItems:"center"}:{},children:c})})}var Ot=a(76),ht=a.n(Ot);function pt(e){var t=e.label,a=e.id,n=e.value,c=e.setOpen,r=e.disabled,s=e.className,i=e.button,o=e.TextFieldProps,l=e.ButtonProps;return i?Object(V.jsx)(Ne.a,Object(Le.a)(Object(Le.a)({id:a,className:s&&s,onClick:function(){!r&&c(!0)},variant:"outlined",size:"small",color:n?"primary":"inherit"},l),{},{disabled:!!r,children:n||t})):Object(V.jsx)(z.a,Object(Le.a)(Object(Le.a)({className:s&&s,label:t,id:a,value:n,variant:"outlined",InputProps:{endAdornment:Object(V.jsx)(ht.a,{}),readOnly:!0,style:{cursor:"pointer"}},inputProps:{style:{cursor:"pointer"}},onClick:function(){!r&&c(!0)}},o),{},{disabled:!!r}))}var xt=a(242),ft=a.n(xt),mt=a(241),gt=a.n(mt),vt=Object(o.a)((function(e){return{listItem:{paddingLeft:e.spacing(2)},emphasized:{fontStyle:"italic",paddingLeft:e.spacing(1)}}}));function St(e){var t=vt(),a=e.onClick,n=e.textVal,c=e.selectCondition,r=e.emphasize;return Object(V.jsxs)(v.a,{button:!0,onClick:a,className:r?t.emphasized:t.listItem,children:[Object(V.jsx)(k.a,{primary:n}),c?Object(V.jsx)(gt.a,{color:"primary"}):Object(V.jsx)(ft.a,{})]})}function kt(e){for(var t=e.year,a=e.setYear,n=e.className,c=e.button,s=e.TextFieldProps,i=e.ButtonProps,o=(new Date).getFullYear(),l=[],u=1980;u<=o;u++)l.unshift(u.toString());var d=Object(r.useState)(!1),j=Object(O.a)(d,2),b=j[0],h=j[1],p=function(e){a(e),h(!1)};return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(pt,{label:c?"year":"Year*",id:"year-select",value:t,setOpen:h,className:n,button:!!c,TextFieldProps:s,ButtonProps:i}),Object(V.jsx)(bt,{open:b,setOpen:h,children:Object(V.jsxs)(lt.a,{children:[Object(V.jsx)(St,{onClick:function(){return p("")},textVal:"",selectCondition:""===t}),Object(V.jsx)(g.a,{}),l.map((function(e){return Object(V.jsxs)("div",{children:[Object(V.jsx)(St,{onClick:function(){return p(e)},textVal:e,selectCondition:e===t}),Object(V.jsx)(g.a,{})]},e)}))]})})]})}var yt=Object(o.a)((function(e){return{emphasized:{fontStyle:"italic",paddingLeft:e.spacing(1)}}}));function wt(e){var t=yt(),a=e.onClick,n=e.textVal;return Object(V.jsxs)(v.a,{button:!0,onClick:a,className:t.emphasized,children:[Object(V.jsx)(k.a,{primary:n}),Object(V.jsx)(N.a,{})]})}var Ct=a(63),Nt=a(64),At=a(51),Ft=function e(t){Object(At.a)(this,e),this.status=void 0,this.status=t},Pt=function(e){Object(Ct.a)(a,e);var t=Object(Nt.a)(a);function a(){return Object(At.a)(this,a),t.call(this,"success")}return a}(Ft),Dt=function(e){Object(Ct.a)(a,e);var t=Object(Nt.a)(a);function a(e){var n;return Object(At.a)(this,a),(n=t.call(this)).data=void 0,n.data=e,n}return a}(Pt),Tt="http://localhost:7000/api/vehicles";function Et(e,t,a,n,c,r){return Vt.apply(this,arguments)}function Vt(){return(Vt=Object(Z.a)(X.a.mark((function e(t,a,n,c,r,s){var i,o;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(Tt,"/get-vehicles-paged/").concat(t,"/").concat(a,"/").concat(n,"/").concat(c,"/").concat(r,"?").concat(s));case 2:return i=e.sent,e.next=5,i.json();case 5:return o=e.sent,e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bt(e,t){return Mt.apply(this,arguments)}function Mt(){return(Mt=Object(Z.a)(X.a.mark((function e(t,a){var n,c;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(Tt,"/find?field=").concat(t,"&value=").concat(a));case 2:return n=e.sent,e.next=5,n.json();case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function It(){return Lt.apply(this,arguments)}function Lt(){return(Lt=Object(Z.a)(X.a.mark((function e(){var t,a;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(Tt+"/next-stock");case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zt(e){return Rt.apply(this,arguments)}function Rt(){return(Rt=Object(Z.a)(X.a.mark((function e(t){var a,n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",new Dt({exists:!1}));case 2:return e.next=4,fetch("".concat(Tt,"/check-stock?stock=").concat(t));case 4:return a=e.sent,e.next=7,a.json();case 7:return n=e.sent,e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ut(){return Wt.apply(this,arguments)}function Wt(){return(Wt=Object(Z.a)(X.a.mark((function e(){var t,a;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(Tt+"/makes");case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gt(e){return Jt.apply(this,arguments)}function Jt(){return(Jt=Object(Z.a)(X.a.mark((function e(t){var a,n,c,r;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={make:t},n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)},e.next=4,fetch(Tt+"/add-make",n);case 4:return c=e.sent,e.next=7,c.json();case 7:return r=e.sent,e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ht(e){return Yt.apply(this,arguments)}function Yt(){return(Yt=Object(Z.a)(X.a.mark((function e(t){var a,n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(Tt,"/models?makeId=").concat(t));case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qt(e,t){return $t.apply(this,arguments)}function $t(){return($t=Object(Z.a)(X.a.mark((function e(t,a){var n,c,r,s;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={makeId:t,model:a},c={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)},e.next=4,fetch(Tt+"/add-model",c);case 4:return r=e.sent,e.next=7,r.json();case 7:return s=e.sent,e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Kt(e){return Qt.apply(this,arguments)}function Qt(){return(Qt=Object(Z.a)(X.a.mark((function e(t){var a,n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(Tt,"/trims?modelId=").concat(t));case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xt(e,t){return Zt.apply(this,arguments)}function Zt(){return(Zt=Object(Z.a)(X.a.mark((function e(t,a){var n,c,r,s;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={modelId:t,trim:a},c={method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)},e.next=4,fetch(Tt+"/add-trim",c);case 4:return r=e.sent,e.next=7,r.json();case 7:return s=e.sent,e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _t(e,t){return ea.apply(this,arguments)}function ea(){return(ea=Object(Z.a)(X.a.mark((function e(t,a){var n,c,r,s;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={addVehicleParam:JSON.stringify(Object(Le.a)(Object(Le.a)({},t),{},{dateAdded:Date.now()})),initialStageParam:JSON.stringify(a)},c={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)},e.next=4,fetch(Tt+"/add",c);case 4:return r=e.sent,e.next=7,r.json();case 7:return s=e.sent,e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ta(e,t){return aa.apply(this,arguments)}function aa(){return(aa=Object(Z.a)(X.a.mark((function e(t,a){var n,c,r,s;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={vehicleId:t,updateDoc:JSON.stringify(a)},c={method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)},e.next=4,fetch(Tt+"/update",c);case 4:return r=e.sent,e.next=7,r.json();case 7:return s=e.sent,e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function na(e,t,a){return ca.apply(this,arguments)}function ca(){return(ca=Object(Z.a)(X.a.mark((function e(t,a,n){var c,r,s,i;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={vehicleId:t,stageAssignmentId:a,dateSold:n},r={method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)},e.next=4,fetch(Tt+"/sell",r);case 4:return s=e.sent,e.next=7,s.json();case 7:return i=e.sent,e.abrupt("return",i);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ra(e){return sa.apply(this,arguments)}function sa(){return(sa=Object(Z.a)(X.a.mark((function e(t){var a,n,c,r;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={vehicleId:t},n={method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)},e.next=4,fetch(Tt+"/delete",n);case 4:return c=e.sent,e.next=7,c.json();case 7:return r=e.sent,e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ia=Object(o.a)((function(e){return{addButtons:{marginLeft:"auto"}}}));function oa(e){var t=ia(),a=Pe().delay,n=e.makeSelectParent,c=e.makeSelect,s=ue(),i=Object(r.useState)(""),o=Object(O.a)(i,2),l=o[0],u=o[1],d=Object(r.useState)(""),j=Object(O.a)(d,2),h=j[0],p=j[1],x=Object(r.useRef)(c.open);Object(r.useEffect)((function(){x.current=c.open}),[c.open]);var f=function(){var e=Object(Z.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u("loading"),e.next=3,a();case 3:Gt(h).then((function(e){if(s.current&&u(e.status),"success"===e.status)n.mounted.current&&x.current&&e.doc&&n.setMake(e.doc),c.mounted.current&&(c.setAddMake(!1),e.data&&c.setMakes(e.data),c.setOpen(!1));else s.current&&p("")}),(function(e){u("failed"),console.error(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(V.jsx)(Ze.a,{in:c.addMake,timeout:"auto",unmountOnExit:!0,children:Object(V.jsx)(lt.a,{children:"loading"===l?Object(V.jsx)(ae,{children:Object(V.jsx)(ee.a,{})}):Object(V.jsxs)(V.Fragment,{children:["exists"===l&&Object(V.jsx)(b.a,{color:"secondary",children:"Already exists"}),"failed"===l&&Object(V.jsx)(b.a,{color:"secondary",children:"Failed to add make"}),Object(V.jsx)(v.a,{children:Object(V.jsx)(z.a,{autoFocus:!0,fullWidth:!0,id:"add-make-input",label:"Add Make*",value:h,onChange:function(e){p(e.target.value.toUpperCase())},autoComplete:"off"})}),Object(V.jsxs)("div",{className:t.addButtons,children:[Object(V.jsx)(Ne.a,{onClick:function(){return c.setAddMake(!1)},children:"Cancel"}),Object(V.jsx)(Ne.a,{onClick:h?f:function(){},disabled:!h,color:"primary",children:"Add"})]})]})})})}function la(e){var t=Pe().delay,a=e.parent,n=e.allowAddMake,c=e.className,s=e.button,i=e.TextFieldProps,o=e.ButtonProps,l=a.mounted,u=a.make,d=a.setMake,j=ue(),h=Object(r.useState)(!1),p=Object(O.a)(h,2),x=p[0],f=p[1],m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u;d(e),f(!1)},v=Object(r.useState)([]),S=Object(O.a)(v,2),k=S[0],y=S[1],w=Object(r.useState)("loading"),C=Object(O.a)(w,2),N=C[0],A=C[1],F=Object(r.useCallback)(Object(Z.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A("loading"),e.next=3,t();case 3:Ut().then((function(e){j.current&&e.data&&y(e.data),j.current&&A(e.status)}),(function(e){j.current&&A("failed"),console.error(e)}));case 4:case"end":return e.stop()}}),e)}))),[t,j]);Object(r.useEffect)((function(){F()}),[F]);var P,D=Object(r.useState)(!1),T=Object(O.a)(D,2),E=T[0],B=T[1];switch(Object(r.useEffect)((function(){!x&&B(!1)}),[x]),N){case"loading":P=Object(V.jsx)(ee.a,{});break;case"failed":P=Object(V.jsx)(b.a,{children:"error loading makes"});break;default:P=Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(Ze.a,{in:!E,timeout:"auto",unmountOnExit:!0,children:Object(V.jsxs)(lt.a,{children:[Object(V.jsx)(St,{onClick:function(){return m({id:"",name:""})},textVal:"",selectCondition:!u.name}),Object(V.jsx)(g.a,{}),k.map((function(e){return Object(V.jsxs)("div",{children:[Object(V.jsx)(St,{onClick:function(){return m(e)},textVal:e.name,selectCondition:e===u}),Object(V.jsx)(g.a,{})]},e.id)})),n&&Object(V.jsx)(wt,{onClick:function(){return B(!0)},textVal:"Add Make"})]})}),n&&Object(V.jsx)(oa,{makeSelectParent:{mounted:l,setMake:d},makeSelect:{mounted:j,setMakes:y,addMake:E,setAddMake:B,open:x,setOpen:f}})]})}return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(pt,{label:s?"make":"Make*",id:"make-select",value:u.name,setOpen:f,className:c,button:!!s,TextFieldProps:i,ButtonProps:o}),Object(V.jsx)(bt,{open:x,setOpen:f,flex:"success"!==N,children:P})]})}var ua=Object(o.a)((function(e){return{addButtons:{marginLeft:"auto"}}}));function da(e){var t=ua(),a=Pe().delay,n=e.modelSelectParent,c=e.modelSelect,s=ue(),i=Object(r.useState)(""),o=Object(O.a)(i,2),l=o[0],u=o[1],d=Object(r.useState)(""),j=Object(O.a)(d,2),h=j[0],p=j[1],x=Object(r.useRef)(c.open);Object(r.useEffect)((function(){x.current=c.open}),[c.open]);var f=function(){var e=Object(Z.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u("loading"),e.next=3,a();case 3:qt(n.makeId,h).then((function(e){if(s.current&&u(e.status),"success"===e.status)n.mounted.current&&x.current&&e.doc&&n.setModel(e.doc),c.mounted.current&&(c.setAddModel(!1),e.data&&c.setModels(e.data),c.setOpen(!1));else s.current&&p("")}),(function(e){u("failed"),console.error(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(V.jsx)(Ze.a,{in:c.addModel,timeout:"auto",unmountOnExit:!0,children:Object(V.jsx)(lt.a,{children:"loading"===l?Object(V.jsx)(ae,{children:Object(V.jsx)(ee.a,{})}):Object(V.jsxs)(V.Fragment,{children:["exists"===l&&Object(V.jsx)(b.a,{color:"secondary",children:"Already exists"}),"failed"===l&&Object(V.jsx)(b.a,{color:"secondary",children:"Failed to add model"}),Object(V.jsx)(v.a,{children:Object(V.jsx)(z.a,{autoFocus:!0,fullWidth:!0,id:"add-model-input",label:"Add Model*",value:h,onChange:function(e){p(e.target.value.toUpperCase())},autoComplete:"off"})}),Object(V.jsxs)("div",{className:t.addButtons,children:[Object(V.jsx)(Ne.a,{onClick:function(){return c.setAddModel(!1)},children:"Cancel"}),Object(V.jsx)(Ne.a,{onClick:h?f:function(){},disabled:!h,color:"primary",children:"Add"})]})]})})})}function ja(e){var t=Pe().delay,a=e.parent,n=e.allowAddModel,c=e.className,s=e.button,i=e.TextFieldProps,o=e.ButtonProps,l=a.mounted,u=a.make,d=a.model,j=a.setModel,h=ue(),p=Object(r.useState)(!1),x=Object(O.a)(p,2),f=x[0],m=x[1],v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d;j(e),m(!1)},S=Object(r.useState)([]),k=Object(O.a)(S,2),y=k[0],w=k[1],C=Object(r.useState)("loading"),N=Object(O.a)(C,2),A=N[0],F=N[1],P=Object(r.useCallback)(Object(Z.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return F("loading"),e.next=3,t();case 3:Ht(u.id).then((function(e){h.current&&e.data&&w(e.data),h.current&&F(e.status)}),(function(e){h.current&&F("failed"),console.error(e)}));case 4:case"end":return e.stop()}}),e)}))),[t,h,u]);Object(r.useEffect)((function(){j({id:"",name:""}),u.id&&P()}),[P,u.id,j]);var D,T=Object(r.useState)(!1),E=Object(O.a)(T,2),B=E[0],M=E[1];switch(Object(r.useEffect)((function(){!f&&M(!1)}),[f]),A){case"loading":D=Object(V.jsx)(ee.a,{});break;case"failed":D=Object(V.jsx)(b.a,{children:"error loading models"});break;default:D=Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(Ze.a,{in:!B,timeout:"auto",unmountOnExit:!0,children:Object(V.jsxs)(lt.a,{children:[Object(V.jsx)(St,{onClick:function(){return v({id:"",name:""})},textVal:"",selectCondition:!d.name}),Object(V.jsx)(g.a,{}),null===y||void 0===y?void 0:y.map((function(e){return Object(V.jsxs)("div",{children:[Object(V.jsx)(St,{onClick:function(){return v(e)},textVal:e.name,selectCondition:e.name===d.name}),Object(V.jsx)(g.a,{})]},e.id)})),n&&Object(V.jsx)(wt,{onClick:function(){return M(!0)},textVal:"Add Model"})]})}),n&&Object(V.jsx)(da,{modelSelectParent:{mounted:l,makeId:u.id,setModel:j},modelSelect:{mounted:h,addModel:B,setAddModel:M,setModels:w,open:f,setOpen:m}})]})}return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(pt,{label:s?"model":"Model*",id:"model-select",value:d.name,setOpen:m,className:c,button:!!s,TextFieldProps:i,ButtonProps:o,disabled:!u.name}),Object(V.jsx)(bt,{open:f,setOpen:m,flex:"success"!==A,children:D})]})}var ba=Object(o.a)((function(e){return{addButtons:{marginLeft:"auto"}}}));function Oa(e){var t=ba(),a=Pe().delay,n=e.trimSelectParent,c=e.trimSelect,s=ue(),i=Object(r.useState)(""),o=Object(O.a)(i,2),l=o[0],u=o[1],d=Object(r.useState)(""),j=Object(O.a)(d,2),h=j[0],p=j[1],x=Object(r.useRef)(c.open);Object(r.useEffect)((function(){x.current=c.open}),[c.open]);var f=function(){var e=Object(Z.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u("loading"),e.next=3,a();case 3:Xt(n.modelId,h).then((function(e){if(s.current&&u(e.status),"success"===e.status)n.mounted.current&&x.current&&e.patch&&n.setTrim(e.patch),c.mounted.current&&(c.setAddTrim(!1),e.data&&c.setTrims(e.data),c.setOpen(!1));else s.current&&p("")}),(function(e){u("failed"),console.error(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(V.jsx)(Ze.a,{in:c.addTrim,timeout:"auto",unmountOnExit:!0,children:Object(V.jsx)(lt.a,{children:"loading"===l?Object(V.jsx)(ae,{children:Object(V.jsx)(ee.a,{})}):Object(V.jsxs)(V.Fragment,{children:["exists"===l&&Object(V.jsx)(b.a,{color:"secondary",children:"Already exists"}),"failed"===l&&Object(V.jsx)(b.a,{color:"secondary",children:"Failed to add trim"}),Object(V.jsx)(v.a,{children:Object(V.jsx)(z.a,{autoFocus:!0,fullWidth:!0,id:"add-trim-input",label:"Add Trim*",value:h,onChange:function(e){p(e.target.value.toUpperCase())},autoComplete:"off"})}),Object(V.jsxs)("div",{className:t.addButtons,children:[Object(V.jsx)(Ne.a,{onClick:function(){return c.setAddTrim(!1)},children:"Cancel"}),Object(V.jsx)(Ne.a,{onClick:h?f:function(){},disabled:!h,color:"primary",children:"Add"})]})]})})})}function ha(e){var t=Pe().delay,a=e.parent,n=e.allowAddTrim,c=e.className,s=e.button,i=e.TextFieldProps,o=e.ButtonProps,l=a.mounted,u=a.make,d=a.model,j=a.trim,h=a.setTrim,p=ue(),x=Object(r.useState)(!1),f=Object(O.a)(x,2),m=f[0],v=f[1],S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j;h(e),v(!1)},k=Object(r.useState)([]),y=Object(O.a)(k,2),w=y[0],C=y[1],N=Object(r.useState)("loading"),A=Object(O.a)(N,2),F=A[0],P=A[1],D=Object(r.useCallback)(Object(Z.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P("loading"),e.next=3,t();case 3:Kt(d.id).then((function(e){p.current&&e.data&&C(e.data),p.current&&P(e.status)}),(function(e){p.current&&P("failed"),console.error(e)}));case 4:case"end":return e.stop()}}),e)}))),[t,p,d.id]);Object(r.useEffect)((function(){h({id:"",name:""}),d.id&&D()}),[D,h,d.id]);var T,E=Object(r.useState)(!1),B=Object(O.a)(E,2),M=B[0],I=B[1];switch(Object(r.useEffect)((function(){!m&&I(!1)}),[m]),F){case"loading":T=Object(V.jsx)(ee.a,{});break;case"failed":T=Object(V.jsx)(b.a,{children:"error loading makes"});break;default:T=Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(Ze.a,{in:!M,timeout:"auto",unmountOnExit:!0,children:Object(V.jsxs)(lt.a,{children:[Object(V.jsx)(St,{onClick:function(){return S({id:"",name:""})},textVal:"",selectCondition:!u.name}),Object(V.jsx)(g.a,{}),w.map((function(e){return Object(V.jsxs)("div",{children:[Object(V.jsx)(St,{onClick:function(){return S(e)},textVal:e.name,selectCondition:e===j}),Object(V.jsx)(g.a,{})]},e.id)})),n&&Object(V.jsx)(wt,{onClick:function(){return I(!0)},textVal:"Add Trim"})]})}),n&&Object(V.jsx)(Oa,{trimSelectParent:{mounted:l,modelId:d.id,setTrim:h},trimSelect:{mounted:p,addTrim:M,setAddTrim:I,setTrims:C,open:m,setOpen:v}})]})}return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(pt,{label:s?"trim":"Trim",id:"trim-select",value:j.name,setOpen:v,className:c,button:!!s,TextFieldProps:i,ButtonProps:o,disabled:!d.name}),Object(V.jsx)(bt,{open:m,setOpen:v,flex:"success"!==F,children:T})]})}var pa=Object(o.a)((function(e){return{select:{margin:e.spacing(.5)}}}));function xa(e){var t=pa(),a=e.mounted,n=e.vehicleDetailFilterState,c=n.yearFilterTmp,r=n.setYearFilterTmp,s=n.makeFilterTmp,i=n.setMakeFilterTmp,o=n.modelFilterTmp,l=n.setModelFilterTmp,u=n.trimFilterTmp,d=n.setTrimFilterTmp;return Object(V.jsxs)(re,{flexWrap:"wrap",children:[Object(V.jsx)(kt,{className:t.select,year:c,setYear:r,button:!0}),Object(V.jsx)(la,{parent:{mounted:a,make:s,setMake:i},className:t.select,button:!0}),Object(V.jsx)(ja,{parent:{mounted:a,make:s,model:o,setModel:l},className:t.select,button:!0}),Object(V.jsx)(ha,{parent:{mounted:a,make:s,model:o,trim:u,setTrim:d},className:t.select,button:!0})]})}var fa=a(504),ma=a(497),ga=a(503),va=a(245),Sa=a.n(va),ka=a(496),ya=a(535),wa=a(528),Ca=Object(o.a)((function(e){return{dialogTitle:{color:e.titleColor.darkBlue,textAlign:"center"},datePicker:{margin:e.spacing(1)}}}));function Na(e){var t=Ca(),a=e.buttonLabel,n=e.dialogTitle,c=e.after,s=e.setAfter,i=e.before,o=e.setBefore,l=e.className,u=Object(r.useState)(!1),d=Object(O.a)(u,2),j=d[0],b=d[1],h=Object(r.useState)(null),p=Object(O.a)(h,2),x=p[0],f=p[1],m=Object(r.useState)(null),g=Object(O.a)(m,2),v=g[0],S=g[1];Object(r.useEffect)((function(){f(c),S(i)}),[c,i]);return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(Ne.a,{className:l,startIcon:Object(V.jsx)(Sa.a,{}),size:"small",variant:"outlined",onClick:function(){b(!j)},color:c||i?"primary":"inherit",children:a}),Object(V.jsxs)(ut.a,{open:j,"aria-labelledby":"date-range-select",children:[Object(V.jsx)(ka.a,{className:t.dialogTitle,children:n}),Object(V.jsx)(dt.a,{children:Object(V.jsx)(ma.b,{dateAdapter:fa.a,children:Object(V.jsxs)(ae,{flexDirection:"column",children:[Object(V.jsx)(wa.a,{className:t.datePicker,children:Object(V.jsx)(ga.a,{clearable:!0,label:"Start Date",value:x,onChange:function(e){return f(e)},renderInput:function(e){return Object(V.jsx)(z.a,Object(Le.a)({},e))}})}),Object(V.jsx)(wa.a,{className:t.datePicker,children:Object(V.jsx)(ga.a,{clearable:!0,label:"End Date",value:v,onChange:function(e){return S(e)},renderInput:function(e){return Object(V.jsx)(z.a,Object(Le.a)({},e))},minDate:x})})]})})}),Object(V.jsxs)(ya.a,{children:[Object(V.jsx)(Ne.a,{size:"large",onClick:function(){f(null),S(null)},children:"CLEAR"}),Object(V.jsx)(Ne.a,{size:"large",onClick:function(){var e=x?new Date(x).getTime():null,t=v?new Date(v).getTime():null;s(e),o(t),b(!1)},children:"OK"})]})]})]})}function Aa(e){var t=e.after,a=e.setAfter,n=e.before,c=e.setBefore,r=e.className,s=t&&new Date(t).toLocaleDateString(),i=n&&new Date(n).toLocaleDateString(),o=t&&n?"Added: ".concat(s," to ").concat(i):t?"Added: after ".concat(s):n?"Added: before ".concat(i):"Date Added";return Object(V.jsx)(Na,{buttonLabel:o,dialogTitle:"Select Date Added Range",after:t,setAfter:a,before:n,setBefore:c,className:r})}function Fa(e){var t=e.after,a=e.setAfter,n=e.before,c=e.setBefore,r=e.className,s=t&&new Date(t).toLocaleDateString(),i=n&&new Date(n).toLocaleDateString(),o=t&&n?"Sold: ".concat(s," to ").concat(i):t?"Sold: after ".concat(s):n?"Sold: before ".concat(i):"Date Sold";return Object(V.jsx)(Na,{buttonLabel:o,dialogTitle:"Select Date Sold Range",after:t,setAfter:a,before:n,setBefore:c,className:r})}var Pa=Object(o.a)((function(e){return{select:{margin:e.spacing(.5)}}}));function Da(e){var t=Pa(),a=je().statusParam,n=e.dateRangeFilterState,c=n.addedAfterFilterTmp,r=n.setAddedAfterFilterTmp,s=n.addedBeforeFilterTmp,i=n.setAddedBeforeFilterTmp,o=n.soldAfterFilterTmp,l=n.setSoldAfterFilterTmp,u=n.soldBeforeFilterTmp,d=n.setSoldBeforeFilterTmp;return Object(V.jsxs)(re,{flexWrap:"wrap",children:[Object(V.jsx)(Aa,{after:c,setAfter:r,before:s,setBefore:i,className:t.select}),"sold"===a&&Object(V.jsx)(Fa,{after:o,setAfter:l,before:u,setBefore:d,className:t.select})]})}var Ta=a(536),Ea=a(507);function Va(e){var t=e.showForSaleTmp,a=e.setShowForSaleTmp;return Object(V.jsx)(Ta.a,{control:Object(V.jsx)(Ea.a,{size:"small",checked:t,onChange:function(){return a(!t)}}),label:'Show "For Sale" Vehicles',sx:{margin:0,"& .MuiFormControlLabel-label":{color:t?"primary.main":"black",fontSize:14}}})}var Ba=Object(o.a)((function(e){return{filterActions:{marginTop:e.spacing(1)}}}));function Ma(e){var t=Ba(),a=Object(i.g)(),n=je(),c=n.statusParam,s=n.sortParam,o=n.perPageParam,l=e.mounted,u=e.setViewFilters,d=e.setFilterCount,j=Object(r.useState)(""),b=Object(O.a)(j,2),h=b[0],p=b[1],x=Object(r.useState)({id:"",name:""}),f=Object(O.a)(x,2),m=f[0],g=f[1],v=Object(r.useState)({id:"",name:""}),S=Object(O.a)(v,2),k=S[0],y=S[1],w=Object(r.useState)({id:"",name:""}),C=Object(O.a)(w,2),N=C[0],A=C[1],F=Object(r.useState)(null),P=Object(O.a)(F,2),D=P[0],T=P[1],E=Object(r.useState)(null),B=Object(O.a)(E,2),M=B[0],I=B[1],L=Object(r.useState)(null),z=Object(O.a)(L,2),R=z[0],U=z[1],W=Object(r.useState)(null),G=Object(O.a)(W,2),J=G[0],H=G[1],Y=Object(r.useState)(!1),q=Object(O.a)(Y,2),$=q[0],K=q[1],Q=Object(r.useState)(""),X=Object(O.a)(Q,2),Z=X[0],_=X[1],ee=Object(r.useState)({id:"",name:""}),te=Object(O.a)(ee,2),ae=te[0],ce=te[1],re=Object(r.useState)({id:"",name:""}),ie=Object(O.a)(re,2),oe=ie[0],le=ie[1],ue=Object(r.useState)({id:"",name:""}),be=Object(O.a)(ue,2),Oe=be[0],he=be[1],pe=Object(r.useState)(null),xe=Object(O.a)(pe,2),fe=xe[0],me=xe[1],ge=Object(r.useState)(null),ve=Object(O.a)(ge,2),Se=ve[0],ke=ve[1],ye=Object(r.useState)(null),we=Object(O.a)(ye,2),Ce=we[0],Ae=we[1],Fe=Object(r.useState)(null),Pe=Object(O.a)(Fe,2),De=Pe[0],Te=Pe[1],Ee=Object(r.useState)(!1),Ve=Object(O.a)(Ee,2),Be=Ve[0],Me=Ve[1],Ie=de(),Le=Ie.get("year"),ze=Ie.get("make"),Re=Ie.get("model"),Ue=Ie.get("trim"),We=Ie.get("addedAfter"),Ge=Ie.get("addedBefore"),Je=Ie.get("soldAfter"),He=Ie.get("soldBefore"),Ye=Ie.get("forSale");Object(r.useEffect)((function(){p(Le||""),_(Le||"");var e=ze?ze.split("-"):["",""];g({id:e[1],name:e[0]}),ce({id:e[1],name:e[0]});var t=Re?Re.split("-"):["",""];y({id:t[1],name:t[0]}),le({id:t[1],name:t[0]}),T(We?parseFloat(We):null),me(We?parseFloat(We):null),I(Ge?parseFloat(Ge):null),ke(Ge?parseFloat(Ge):null),U(Je?parseFloat(Je):null),Ae(Je?parseFloat(Je):null),H(He?parseFloat(He):null),Te(He?parseFloat(He):null);var a="true"===Ye;K(a),Me(a)}),[Le,ze,Re,Ue,We,Ge,Je,He,Ye]),Object(r.useEffect)((function(){var e=Re?Re.split("-"):["",""];y({id:e[1],name:e[0]}),le({id:e[1],name:e[0]})}),[ae,Re]),Object(r.useEffect)((function(){var e=Ue?Ue.split("-"):["",""];A({id:e[1],name:e[0]}),he({id:e[1],name:e[0]})}),[oe,Ue]);var qe=Z===h&&ae.id===m.id&&oe.id===k.id&&Oe.id===N.id&&D===fe&&M===Se&&R===Ce&&J===De&&$===Be;Object(r.useEffect)((function(){var e=0;""!==Z&&e++;[ae,oe,Oe].forEach((function(t){return function(t){return""!==t.name&&e++}(t)})),(fe||Se)&&e++,(Ce||De)&&e++,Be&&e++,d(e)}),[Z,ae,oe,Oe,fe,Se,Ce,De,Be,d]);var $e={yearFilterTmp:h,setYearFilterTmp:p,makeFilterTmp:m,setMakeFilterTmp:g,modelFilterTmp:k,setModelFilterTmp:y,trimFilterTmp:N,setTrimFilterTmp:A},Ke={addedAfterFilterTmp:D,setAddedAfterFilterTmp:T,addedBeforeFilterTmp:M,setAddedBeforeFilterTmp:I,soldAfterFilterTmp:R,setSoldAfterFilterTmp:U,soldBeforeFilterTmp:J,setSoldBeforeFilterTmp:H};return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsxs)(ne,{flexWrap:"wrap",children:[Object(V.jsx)(xa,{mounted:l,vehicleDetailFilterState:$e}),Object(V.jsx)(Da,{dateRangeFilterState:Ke}),"active"===c&&Object(V.jsx)(Va,{showForSaleTmp:$,setShowForSaleTmp:K})]}),Object(V.jsxs)(se,{className:t.filterActions,children:[Object(V.jsx)(Ne.a,{onClick:function(){_(""),p(""),ce({id:"",name:""}),g({id:"",name:""}),le({id:"",name:""}),y({id:"",name:""}),he({id:"",name:""}),A({id:"",name:""}),me(null),T(null),ke(null),I(null),Ae(null),U(null),Te(null),H(null),Me(!1),K(!1),u(!1),a.push("/all-vehicles/".concat(c,"/").concat(s,"/").concat(o,"/first/0"))},children:"REMOVE FILTERS"}),Object(V.jsx)(Ne.a,{onClick:function(){_(h),ce(m),le(k),he(N),me(D),ke(M),Ae(R),Te(J),u(!1);var e=[];h&&e.push("year=".concat(h)),m.id&&e.push("make=".concat(m.name,"-").concat(m.id)),k.id&&e.push("model=".concat(k.name,"-").concat(k.id)),N.id&&e.push("trim=".concat(N.name,"-").concat(N.id)),D&&e.push("addedAfter=".concat(D)),M&&e.push("addedBefore=".concat(M)),R&&e.push("soldAfter=".concat(R)),J&&e.push("soldBefore=".concat(J)),$&&e.push("forSale=".concat($));var t="".concat(e.join("&"));a.push("/all-vehicles/".concat(c,"/").concat(s,"/").concat(o,"/first/0?").concat(t))},disabled:qe,color:"primary",children:"APPLY FILTERS"})]})]})}var Ia=a(515),La=Object(o.a)({skeleton:{width:"100%"}});function za(e){for(var t=La(),a=[],n=0;n<e.skeletonCount;n++)a.push(Object(V.jsx)(v.a,{children:Object(V.jsx)(Ia.a,{className:t.skeleton,variant:"text"})},n));return Object(V.jsx)(lt.a,{children:a.map((function(e){return e}))})}var Ra=a(498),Ua=a(499),Wa=Object(Ra.a)(Ua.a)((function(e){var t=e.theme;return{marginTop:t.spacing(1),marginBottom:t.spacing(1),padding:0,display:"flex",justifyContent:"space-between"}})),Ga=Object(o.a)((function(e){return{textContainer:{width:"60%"},stockLi:{fontSize:12,color:"black"},vehicleTextLi:{width:"100%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontSize:14,color:"black"},stock:{fontSize:16,color:"black"},vehicleText:{color:e.titleColor.darkBlue,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}}));function Ja(e){var t=Ga(),a=e.vehicle,n=e.variant,c=e.listItem,r=a.stock,s=a.year,i=a.make,o=a.model,l=a.trim;return c?Object(V.jsx)("div",{className:t.textContainer,children:Object(V.jsxs)(k.a,{children:[Object(V.jsxs)("span",{className:t.stockLi,children:["stk#:",r>0&&r]}),Object(V.jsx)("br",{}),Object(V.jsxs)("div",{className:t.vehicleTextLi,children:[s," ",i.name," ",o.name," ",l.name]})]})}):Object(V.jsx)("div",{children:Object(V.jsxs)(b.a,{variant:n||"body1",children:[Object(V.jsxs)("span",{className:t.stock,style:{fontSize:14},children:["stk#:",r>0&&r]}),Object(V.jsx)("br",{}),Object(V.jsxs)("div",{className:t.vehicleText,children:[" ",s," ",i.name," ",o.name," ",l.name]})]})})}var Ha=Object(W.a)("div")({float:"right",height:"90%",display:"flex",justifyContent:"center",alignItems:"flex-end",flexDirection:"column",width:"clamp(100px, 35%, 150px)"}),Ya=a(516),qa=Object(W.a)(Ya.a)((function(e){return{margin:e.theme.spacing(.25),width:"100%"}}));function $a(e){var t=e.vehicle,a=e.onClick,n=e.className,c=t.currentStage,r=c.stage,s=c.personPlace,i=c.status,o=Ee().userPreferences.defaultStageAssignment,l=o.stage,u=o.personPlace;return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsxs)(Wa,{className:n||"",onClick:a,children:[Object(V.jsx)(Ja,{vehicle:t,listItem:!0}),Object(V.jsxs)(Ha,{children:["Assign"===r.name?Object(V.jsx)(qa,{size:"small",label:r.name,color:"secondary"}):"complete"===i?Object(V.jsx)(qa,{size:"small",label:l.name,color:"secondary"}):Object(V.jsx)(qa,{size:"small",label:r.name,color:"primary"}),"complete"===i?Object(V.jsx)(qa,{size:"small",label:u.name}):Object(V.jsx)(qa,{size:"small",label:s.name})]})]}),Object(V.jsx)(g.a,{})]})}var Ka=Object(o.a)({timeDifferenceLabel:{fontSize:10}});function Qa(e){var t=Ka(),a=e.milliseconds,n=e.color;return a<6e4?Object(V.jsxs)(b.a,{color:n||"inherit",children:[Math.round(a/1e3)," ",Object(V.jsx)("span",{className:t.timeDifferenceLabel,children:" secs"})]}):a<36e5?Object(V.jsxs)(b.a,{color:n||"inherit",children:[Math.round(a/6e4)," ",Object(V.jsx)("span",{className:t.timeDifferenceLabel,children:" mins"})]}):a<864e5?Object(V.jsxs)(b.a,{color:n||"inherit",children:[Math.round(a/36e5)," ",Object(V.jsx)("span",{className:t.timeDifferenceLabel,children:" hrs"})]}):Object(V.jsxs)(b.a,{color:n||"inherit",children:[Math.round(a/864e5*10)/10," ",Object(V.jsx)("span",{className:t.timeDifferenceLabel,children:" days"})]})}var Xa=Object(W.a)(qa)((function(e){var t=e.theme;return{backgroundColor:t.palette.success.main,color:t.palette.success.contrastText}}));function Za(e){var t=e.vehicle,a=e.onClick,n=e.className,c=t.totalSellTime;return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsxs)(Wa,{className:n||"",onClick:a,children:[Object(V.jsx)(Ja,{vehicle:t,listItem:!0}),Object(V.jsx)(Ha,{children:Object(V.jsx)(Xa,{size:"small",label:c&&Object(V.jsx)(Qa,{milliseconds:c})})})]}),Object(V.jsx)(g.a,{})]})}var _a=a(136),en=a.n(_a),tn=Object(Ra.a)(v.a)((function(e){var t=e.theme;return{marginTop:t.spacing(1),marginBottom:t.spacing(1),padding:0,display:"flex",justifyContent:"space-between"}})),an=a(537),nn=Object(o.a)((function(e){return{title:{color:e.titleColor.darkBlue},dialog:{padding:10,textAlign:"center",maxWidth:500}}}));function cn(e){var t,a=nn(),n=ue(),c=Pe().delay,s=e.onClose,i=e.open,o=e.vehicle,l=e.getVehicles,u=o.id,d=Object(r.useState)(""),j=Object(O.a)(d,2),b=j[0],h=j[1],p=function(){var e=Object(Z.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h("loading"),e.next=3,c();case 3:ra(u).then((function(e){n.current&&h(e.status),l()}),(function(e){n.current&&h("failed"),console.error(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){"success"===b&&s()}),[s,b]),t="loading"===b?Object(V.jsx)(ee.a,{}):"failed"===b?Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)("p",{children:"Failed to delete vehicle"}),Object(V.jsxs)(an.a,{children:[Object(V.jsx)(Ne.a,{onClick:s,children:"cancel"}),Object(V.jsx)(Ne.a,{variant:"outlined",color:"secondary",onClick:p,children:"try again"})]})]}):Object(V.jsxs)(an.a,{children:[Object(V.jsx)(Ne.a,{onClick:s,children:"cancel"}),Object(V.jsx)(Ne.a,{variant:"outlined",color:"secondary",onClick:p,children:"yes, delete"})]}),Object(V.jsx)(ut.a,{onClose:s,"aria-labelledby":"delete-vehicle-dialog",open:i,disableEscapeKeyDown:!0,children:Object(V.jsxs)("div",{className:a.dialog,children:[Object(V.jsx)(ka.a,{id:"add-vehicle-dialog",className:a.title,children:"Delete Permanently?"}),Object(V.jsx)(ae,{children:Object(V.jsx)(Ja,{vehicle:o,variant:"subtitle1"})}),Object(V.jsx)("br",{}),Object(V.jsx)(g.a,{}),Object(V.jsx)("br",{}),t]})})}var rn=Object(o.a)((function(e){return{trashButtons:{margin:e.spacing(.25),width:"100%"}}}));function sn(e){var t=rn(),a=ue(),n=Pe().delay,c=e.vehicle,s=e.getVehicles,i=e.className,o=Object(r.useState)(""),l=Object(O.a)(o,2),u=l[0],d=l[1],j=function(){var e=Object(Z.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d("loading"),e.next=3,n();case 3:ta(c.id,{status:"active"}).then((function(e){a.current&&d(e.status),s()}),(function(e){a.current&&d("failed"),console.error(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=Object(r.useState)(!1),h=Object(O.a)(b,2),p=h[0],x=h[1],f=function(){return x(!p)};return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsxs)(tn,{className:i||"",children:[Object(V.jsx)(Ja,{vehicle:c,listItem:!0}),Object(V.jsx)(Ha,{children:"loading"===u?Object(V.jsx)(ee.a,{size:25}):Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(Ne.a,{className:t.trashButtons,size:"small",variant:"outlined",color:"primary",onClick:j,children:"Activate"}),Object(V.jsx)(Ne.a,{className:t.trashButtons,size:"small",variant:"outlined",color:"secondary",startIcon:Object(V.jsx)(en.a,{}),onClick:f,children:"Delete"}),Object(V.jsx)(cn,{open:p,onClose:f,vehicle:c,getVehicles:s})]})})]}),Object(V.jsx)(g.a,{})]})}function on(e){var t=Object(i.g)(),a=e.vehicle,n=e.getVehicles,c=a.status,r=je(),s=r.statusParam,o=r.sortParam,l=r.perPageParam,u=r.pageParam,d=r.compareParam,j=de().toString(),b=function(){return t.push("/vehicle-details/id/".concat(a.id,"/stage?prev=/all-vehicles/").concat(s,"/").concat(o,"/").concat(l,"/").concat(u,"/").concat(d,"?").concat(j))};switch(c){case"active":return Object(V.jsx)($a,{vehicle:a,onClick:b});case"sold":return Object(V.jsx)(Za,{vehicle:a,onClick:b});case"trash":return Object(V.jsx)(sn,{vehicle:a,getVehicles:n})}}var ln=a(139),un=a.n(ln),dn=a(140),jn=a.n(dn),bn=a(138),On=a.n(bn),hn=a(137),pn=a.n(hn);function xn(e){var t=Object(i.g)(),a=e.vehiclePage,n=a.docStartNumber,c=a.docEndNumber,r=a.totalDocs,s=a.vehicles,o=[];s.forEach((function(e){return o.push(e.dateAdded)}));var l=Math.max.apply(Math,o),u=Math.min.apply(Math,o),d=je(),j=d.statusParam,O=d.sortParam,h=d.perPageParam,x=d.pageParam,f=de().toString();return r>parseInt(h)?Object(V.jsxs)(ae,{children:[Object(V.jsx)(p.a,{"aria-label":"first-page",onClick:function(){1!==n&&t.push("/all-vehicles/".concat(j,"/").concat(O,"/").concat(h,"/first/0?").concat(f))},disabled:1===n,size:"large",children:Object(V.jsx)(pn.a,{})}),Object(V.jsx)(p.a,{"aria-label":"previous-page",onClick:function(){1!==n&&"asc"===O?t.push("/all-vehicles/".concat(j,"/").concat(O,"/").concat(h,"/prev/").concat(u,"?").concat(f)):t.push("/all-vehicles/".concat(j,"/").concat(O,"/").concat(h,"/prev/").concat(l,"?").concat(f))},disabled:1===n,size:"large",children:Object(V.jsx)(On.a,{})}),Object(V.jsxs)(b.a,{align:"center",children:["(",n.toLocaleString(),"-",c.toLocaleString(),") / ",r.toLocaleString()]}),Object(V.jsx)(p.a,{"aria-label":"next-page",onClick:function(){c!==r&&"asc"===O?t.push("/all-vehicles/".concat(j,"/").concat(O,"/").concat(h,"/next/").concat(l,"?").concat(f)):t.push("/all-vehicles/".concat(j,"/").concat(O,"/").concat(h,"/next/").concat(u,"?").concat(f))},disabled:c===r,size:"large",children:Object(V.jsx)(un.a,{})}),Object(V.jsx)(p.a,{"aria-label":"last-page",onClick:function(){"last"!==x&&t.push("/all-vehicles/".concat(j,"/").concat(O,"/").concat(h,"/last/0?").concat(f))},disabled:c===r,size:"large",children:Object(V.jsx)(jn.a,{})})]}):Object(V.jsx)(V.Fragment,{})}function fn(e){var t,a=e.vehicleListState,n=e.getVehicles,c=a.vehiclePage;switch(a.getVehiclesStatus){case"failed":t=Object(V.jsx)(Ae,{errorMessage:"Error loading vehicles",retryAction:function(){return window.location.reload()}});break;case"loading":t=Object(V.jsx)(za,{skeletonCount:20});break;default:t=Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(lt.a,{children:c.vehicles.map((function(e){return e.id?Object(V.jsx)(on,{vehicle:e,getVehicles:n},e.id):Object(V.jsx)(V.Fragment,{})}))}),Object(V.jsx)(xn,{vehiclePage:a.vehiclePage})]})}return Object(V.jsx)(V.Fragment,{children:t})}var mn=a(247),gn=a.n(mn),vn=a(512),Sn=a(538),kn=a(500),yn=Object(Sn.a)((function(e){return Object(kn.a)({badge:{right:0,top:20,border:"2px solid ".concat(e.palette.background.paper),padding:"0 4px"}})}))(vn.a);function wn(e){var t=e.viewFilters,a=e.setViewFilters,n=e.filterCount;return Object(V.jsx)(Ne.a,{size:"small",startIcon:t?Object(V.jsx)(gn.a,{}):Object(V.jsx)(w.a,{}),onClick:function(){return a(!t)},children:Object(V.jsx)(yn,{badgeContent:n,color:"secondary",children:"filters"})})}var Cn=Object(o.a)((function(e){return{listControls:{margin:e.spacing(1)}}}));function Nn(){var e=Cn(),t=ue(),a=Pe().delay,n=je(),c=n.statusParam,s=n.sortParam,i=n.perPageParam,o=n.pageParam,l=n.compareParam,u=de().toString(),d=Object(r.useState)(c),j=Object(O.a)(d,2),b=j[0],h=j[1],p=Object(r.useState)(s),x=Object(O.a)(p,2),f=x[0],m=x[1],v=Object(r.useState)(!1),S=Object(O.a)(v,2),k=S[0],y=S[1],C=Object(r.useState)(0),N=Object(O.a)(C,2),A=N[0],F=N[1],P=Object(r.useState)({docStartNumber:0,docEndNumber:0,totalDocs:0,vehicles:[]}),D=Object(O.a)(P,2),T=D[0],E=D[1],B=Object(r.useState)("loading"),M=Object(O.a)(B,2),I=M[0],L=M[1],z={vehiclePage:T,setVehiclePage:E,getVehiclesStatus:I,setGetVehiclesStatus:L},R=Object(r.useCallback)(Object(Z.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return L("loading"),e.next=3,a();case 3:Et(c,s,parseInt(i),o,parseInt(l),u).then((function(e){t.current&&L(e.status),"success"===e.status&&t.current&&e.data&&E(e.data),"failed"===e.status&&console.error(e)}),(function(e){t.current&&L("failed"),console.error(e)}));case 4:case"end":return e.stop()}}),e)}))),[a,c,s,i,o,l,u,t]);return Object(r.useEffect)((function(){R()}),[R]),Object(V.jsx)(Ue,{children:Object(V.jsxs)(qe,{style:{position:"relative"},sx:{zIndex:0},children:[Object(V.jsx)(ot,{}),Object(V.jsxs)(Je,{children:[Object(V.jsx)(Ye,{icon:Object(V.jsx)(w.a,{color:"primary"}),variant:"h5",children:"All Vehicles"}),Object(V.jsx)(g.a,{}),Object(V.jsxs)(ne,{className:e.listControls,children:[Object(V.jsx)(at,{filter:b,setFilter:h}),Object(V.jsx)(rt,{sort:f,setSort:m}),Object(V.jsx)(wn,{viewFilters:k,setViewFilters:y,filterCount:A})]}),Object(V.jsx)(g.a,{}),Object(V.jsxs)(Ze.a,{in:k,timeout:"auto",style:{width:"100%"},children:[Object(V.jsx)(Ma,{mounted:t,setViewFilters:y,setFilterCount:F}),Object(V.jsx)(g.a,{})]})]}),Object(V.jsx)(fn,{vehicleListState:z,getVehicles:R})]})})}var An=a(530),Fn=Object(o.a)((function(e){return{field:{width:"calc(100% - 75px)"},nextStockButton:{width:75}}}));function Pn(e){var t=Fn(),a=ue(),n=Pe().delay,c=e.editStockState,s=c.setStock,i=c.setStockError,o=c.addEditVehicleStatus,l=Object(r.useState)(""),u=Object(O.a)(l,2),d=u[0],j=u[1],b=Object(r.useState)("loading"),h=Object(O.a)(b,2),p=h[0],x=h[1],f=Object(r.useCallback)(Object(Z.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x("loading"),e.next=3,n();case 3:It().then((function(e){a.current&&e.data&&j(e.data.nextStock.toString()),a.current&&x(e.status)}),(function(e){a.current&&x("failed"),console.error(e)}));case 4:case"end":return e.stop()}}),e)}))),[n,a]);return Object(r.useEffect)((function(){""!==o&&"success"!==o||f()}),[o,f]),"loading"===p?Object(V.jsx)(se,{className:t.nextStockButton,children:Object(V.jsx)(ee.a,{size:25})}):"failed"===p?Object(V.jsx)(Ne.a,{className:t.nextStockButton,disabled:!0,children:"error"}):Object(V.jsx)(Ne.a,{className:t.nextStockButton,onClick:function(){s(d),i("")},children:"USE NEXT"})}function Dn(e){var t=e.editStockState,a=e.className,n=t.stock,c=t.setStock,s=t.stockOkay,i=t.setStockOkay,o=t.stockError,l=t.setStockError,u=Object(r.useCallback)((function(){/^[0-9]{5}$/.test(n)||""===n?"stk# already exists"!==o&&(i(!0),l("")):(i(!1),l("must be 5 digits"))}),[l,i,n,o]);return Object(r.useEffect)((function(){s||u()}),[n,s,u]),Object(V.jsx)(z.a,{className:a&&a,error:!!o,label:"Stock #",helperText:o,variant:"outlined",value:"0"!==n?n:" ",onChange:function(e){c(e.target.value)},onBlur:u,InputProps:{endAdornment:Object(V.jsx)(R.a,{position:"end",children:Object(V.jsx)(Pn,{editStockState:t})})}})}function Tn(e){var t=e.mounted,a=e.addVehicleState,n=e.classes,c=a.stock,r=a.setStock,s=a.stockOkay,i=a.setStockOkay,o=a.stockError,l=a.setStockError,u=a.year,d=a.setYear,j=a.make,b=a.setMake,O=a.model,h=a.setModel,p=a.trim,x=a.setTrim,f={stock:c,setStock:r,stockOkay:s,setStockOkay:i,stockError:o,setStockError:l,addEditVehicleStatus:a.addVehicleStatus};return Object(V.jsxs)("div",{className:n.form,children:[Object(V.jsx)(Dn,{className:n.inputField,editStockState:f}),Object(V.jsx)(kt,{className:n.inputField,year:u,setYear:d}),Object(V.jsx)(la,{className:n.inputField,parent:{mounted:t,make:j,setMake:b},allowAddMake:!0}),Object(V.jsx)(ja,{className:n.inputField,parent:{mounted:t,make:j,model:O,setModel:h},allowAddModel:!0}),Object(V.jsx)(ha,{className:n.inputField,parent:{mounted:t,make:j,model:O,trim:p,setTrim:x},allowAddTrim:!0})]})}var En=a(91),Vn=a.n(En),Bn="http://localhost:7000/api/stages";function Mn(){return In.apply(this,arguments)}function In(){return(In=Object(Z.a)(X.a.mark((function e(){var t,a;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(Bn+"/get-stage-vehicle-counts");case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ln(){return zn.apply(this,arguments)}function zn(){return(zn=Object(Z.a)(X.a.mark((function e(){var t,a;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(Bn+"/get-person-place-vehicle-counts");case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Rn(){return Un.apply(this,arguments)}function Un(){return(Un=Object(Z.a)(X.a.mark((function e(){var t,a;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(Bn+"/get-stages");case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wn(e){return Gn.apply(this,arguments)}function Gn(){return(Gn=Object(Z.a)(X.a.mark((function e(t){var a,n,c,r;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={stage:t},n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)},e.next=4,fetch(Bn+"/add-stage",n);case 4:return c=e.sent,e.next=7,c.json();case 7:return r=e.sent,e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Jn(e){return Hn.apply(this,arguments)}function Hn(){return(Hn=Object(Z.a)(X.a.mark((function e(t){var a,n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(Bn,"/get-people-places?stageId=").concat(t));case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yn(){return qn.apply(this,arguments)}function qn(){return(qn=Object(Z.a)(X.a.mark((function e(){var t,a;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(Bn+"/get-all-people-places");case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $n(e,t){return Kn.apply(this,arguments)}function Kn(){return(Kn=Object(Z.a)(X.a.mark((function e(t,a){var n,c,r,s;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={stageId:t,personPlace:a},c={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)},e.next=4,fetch(Bn+"/add-person-place",c);case 4:return r=e.sent,e.next=7,r.json();case 7:return s=e.sent,e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qn(e,t){return Xn.apply(this,arguments)}function Xn(){return(Xn=Object(Z.a)(X.a.mark((function e(t,a){var n,c,r,s;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={assignStageParam:JSON.stringify(t),previousStage:a&&JSON.stringify(a)},c={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)},e.next=4,fetch(Bn+"/assign-stage",c);case 4:return r=e.sent,e.next=7,r.json();case 7:return s=e.sent,e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zn(e,t){return _n.apply(this,arguments)}function _n(){return(_n=Object(Z.a)(X.a.mark((function e(t,a){var n,c,r,s;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={stageAssignmentId:t,dateCompleted:a},c={method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)},e.next=4,fetch(Bn+"/complete-stage-assignment",c);case 4:return r=e.sent,e.next=7,r.json();case 7:return s=e.sent,e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ec(e){return tc.apply(this,arguments)}function tc(){return(tc=Object(Z.a)(X.a.mark((function e(t){var a,n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(Bn,"/stage-history?vehicleId=").concat(t));case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ac(e){return nc.apply(this,arguments)}function nc(){return(nc=Object(Z.a)(X.a.mark((function e(t){var a,n,c,r;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={updates:t},n={method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)},e.next=4,fetch(Bn+"/update-stage-order",n);case 4:return c=e.sent,e.next=7,c.json();case 7:return r=e.sent,e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var cc=Object(o.a)((function(e){return{addButtons:{marginLeft:"auto"}}}));function rc(e){var t=cc(),a=Pe().delay,n=e.stageSelectParent,c=e.stageSelect,s=ue(),i=Object(r.useState)(""),o=Object(O.a)(i,2),l=o[0],u=o[1],d=Object(r.useState)(""),j=Object(O.a)(d,2),h=j[0],p=j[1],x=Object(r.useRef)(c.open);Object(r.useEffect)((function(){x.current=c.open}),[c.open]);var f=function(){var e=Object(Z.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u("loading"),e.next=3,a();case 3:Wn(h).then((function(e){if(s.current&&u(e.status),"success"===e.status)n.mounted.current&&x.current&&e.doc&&n.setStage({id:e.doc.id,name:e.doc.name}),c.mounted.current&&(c.setAddStage(!1),e.data&&c.setStages(e.data),c.setOpen(!1));else s.current&&p("")}),(function(e){u("failed"),console.error(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(V.jsx)(Ze.a,{in:c.addStage,timeout:"auto",unmountOnExit:!0,children:Object(V.jsx)(lt.a,{children:"loading"===l?Object(V.jsx)(ae,{children:Object(V.jsx)(ee.a,{})}):Object(V.jsxs)(V.Fragment,{children:["exists"===l&&Object(V.jsx)(b.a,{color:"secondary",children:"Already exists"}),"failed"===l&&Object(V.jsx)(b.a,{color:"secondary",children:"Failed to add stage"}),Object(V.jsx)(v.a,{children:Object(V.jsx)(z.a,{autoFocus:!0,fullWidth:!0,id:"add-stage-input",label:"Add Stage*",value:h,onChange:function(e){p(e.target.value)},autoComplete:"off"})}),Object(V.jsxs)("div",{className:t.addButtons,children:[Object(V.jsx)(Ne.a,{onClick:function(){return c.setAddStage(!1)},children:"Cancel"}),Object(V.jsx)(Ne.a,{onClick:h?f:function(){},disabled:!h,color:"primary",children:"Add"})]})]})})})}function sc(e){var t=Pe().delay,a=e.parent,n=e.allowAddStage,c=e.className,s=e.button,i=e.TextFieldProps,o=e.ButtonProps,l=a.mounted,u=a.stage,d=a.setStage,j=ue(),h=Object(r.useState)(!1),p=Object(O.a)(h,2),x=p[0],f=p[1],m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u;d({id:e.id,name:e.name}),f(!1)},v=Object(r.useState)([]),S=Object(O.a)(v,2),k=S[0],y=S[1],w=Object(r.useState)("loading"),C=Object(O.a)(w,2),N=C[0],A=C[1],F=Object(r.useCallback)(Object(Z.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A("loading"),e.next=3,t();case 3:Rn().then((function(e){j.current&&e.data&&y(e.data),j.current&&A(e.status)}),(function(e){j.current&&A("failed"),console.error(e)}));case 4:case"end":return e.stop()}}),e)}))),[t,j]);Object(r.useEffect)((function(){F()}),[F]);var P,D=Object(r.useState)(!1),T=Object(O.a)(D,2),E=T[0],B=T[1];switch(Object(r.useEffect)((function(){!x&&B(!1)}),[x]),N){case"loading":P=Object(V.jsx)(ee.a,{});break;case"failed":P=Object(V.jsx)(b.a,{children:"error loading stages"});break;default:P=Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(Ze.a,{in:!E,timeout:"auto",unmountOnExit:!0,children:Object(V.jsxs)(lt.a,{children:[Object(V.jsx)(St,{onClick:function(){return m({id:"",name:""})},textVal:"",selectCondition:!u.name}),Object(V.jsx)(g.a,{}),k.map((function(e){return Object(V.jsxs)("div",{children:[Object(V.jsx)(St,{onClick:function(){return m(e)},textVal:e.name,selectCondition:e.name===u.name}),Object(V.jsx)(g.a,{})]},e.id)})),n&&Object(V.jsx)(wt,{onClick:function(){return B(!0)},textVal:"Add Stage"})]})}),n&&Object(V.jsx)(rc,{stageSelectParent:{mounted:l,setStage:d},stageSelect:{mounted:j,setStages:y,addStage:E,setAddStage:B,open:x,setOpen:f}})]})}return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(pt,{label:s?"stage":"Stage*",id:"stage-select",value:u.name,setOpen:f,className:c,button:!!s,TextFieldProps:i,ButtonProps:o}),Object(V.jsx)(bt,{open:x,setOpen:f,flex:"success"!==N,children:P})]})}var ic=a(248),oc=a.n(ic),lc=Object(o.a)((function(e){return{emphasized:{fontStyle:"italic",paddingLeft:e.spacing(1)}}}));function uc(e){var t=lc(),a=e.onClick,n=e.selectCondition;return Object(V.jsxs)(v.a,{button:!0,onClick:a,className:t.emphasized,children:[Object(V.jsx)(k.a,{primary:n?"Show less...":"Show more..."}),n?Object(V.jsx)(oc.a,{}):Object(V.jsx)(ht.a,{})]})}var dc=Object(o.a)((function(e){return{addButtons:{marginLeft:"auto"}}}));function jc(e){var t=dc(),a=Pe().delay,n=e.personPlaceSelectParent,c=e.personPlaceSelect,s=ue(),i=Object(r.useState)(""),o=Object(O.a)(i,2),l=o[0],u=o[1],d=Object(r.useState)(""),j=Object(O.a)(d,2),h=j[0],p=j[1],x=Object(r.useRef)(c.open);Object(r.useEffect)((function(){x.current=c.open}),[c.open]);var f=function(){var e=Object(Z.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u("loading"),e.next=3,a();case 3:$n(n.stageId,h).then((function(e){if(s.current&&u(e.status),"success"===e.status)n.mounted.current&&x.current&&e.doc&&n.setPersonPlace(e.doc),c.mounted.current&&(c.setAddPersonPlace(!1),e.data&&c.setAllPeoplePlaces(e.data.allPeoplePlaces),c.setOpen(!1));else s.current&&p("")}),(function(e){u("failed"),console.error(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(V.jsx)(Ze.a,{in:c.addPersonPlace,timeout:"auto",unmountOnExit:!0,children:Object(V.jsx)(lt.a,{children:"loading"===l?Object(V.jsx)(ae,{children:Object(V.jsx)(ee.a,{})}):Object(V.jsxs)(V.Fragment,{children:["exists"===l&&Object(V.jsx)(b.a,{color:"secondary",children:"Already exists"}),"failed"===l&&Object(V.jsx)(b.a,{color:"secondary",children:"Failed to add person/place"}),Object(V.jsx)(v.a,{children:Object(V.jsx)(z.a,{autoFocus:!0,fullWidth:!0,id:"add-person-place-input",label:"Add Person/Place*",value:h,onChange:function(e){p(e.target.value)},autoComplete:"off"})}),Object(V.jsxs)("div",{className:t.addButtons,children:[Object(V.jsx)(Ne.a,{onClick:function(){return c.setAddPersonPlace(!1)},children:"Cancel"}),Object(V.jsx)(Ne.a,{onClick:h?f:function(){},disabled:!h,color:"primary",children:"Add"})]})]})})})}function bc(e){var t=Pe().delay,a=e.parent,n=e.allowAddPersonPlace,c=e.className,s=e.button,i=e.TextFieldProps,o=e.ButtonProps,l=a.mounted,u=a.stage,d=a.personPlace,j=a.setPersonPlace,h=ue(),p=Object(r.useState)(!1),x=Object(O.a)(p,2),f=x[0],m=x[1],v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d;j(e),m(!1)},S=Object(r.useState)([]),k=Object(O.a)(S,2),y=k[0],w=k[1],C=Object(r.useState)("loading"),N=Object(O.a)(C,2),A=N[0],F=N[1],P=Object(r.useCallback)(Object(Z.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return F("loading"),e.next=3,t();case 3:Jn(u.id).then((function(e){h.current&&e.data&&w(e.data),h.current&&F(e.status)}),(function(e){h.current&&F("failed"),console.error(e)}));case 4:case"end":return e.stop()}}),e)}))),[t,h,u.id]);Object(r.useEffect)((function(){j({id:"",name:""}),u.id&&P()}),[j,P,u.id]);var D=Object(r.useState)([]),T=Object(O.a)(D,2),E=T[0],B=T[1],M=Object(r.useState)("loading"),I=Object(O.a)(M,2),L=I[0],z=I[1],R=Object(r.useCallback)(Object(Z.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return z("loading"),e.next=3,t();case 3:Yn().then((function(e){h.current&&e.data&&B(e.data),h.current&&z(e.status)}),(function(e){h.current&&z("failed"),console.error(e)}));case 4:case"end":return e.stop()}}),e)}))),[t,h]);Object(r.useEffect)((function(){R()}),[R]);var U,W=Object(r.useState)(!1),G=Object(O.a)(W,2),J=G[0],H=G[1],Y=Object(r.useState)(!1),q=Object(O.a)(Y,2),$=q[0],K=q[1];switch(Object(r.useEffect)((function(){!f&&K(!1),!f&&H(!1)}),[f]),A||L){case"loading":U=Object(V.jsx)(ee.a,{});break;case"failed":U=Object(V.jsx)(b.a,{children:"error loading People/Places"});break;default:U=Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(Ze.a,{in:!$,timeout:"auto",unmountOnExit:!0,children:Object(V.jsxs)(lt.a,{children:[Object(V.jsx)(St,{onClick:function(){return v({id:"",name:""})},textVal:"",selectCondition:!d.name}),Object(V.jsx)(g.a,{}),y.map((function(e){return Object(V.jsxs)("div",{children:[Object(V.jsx)(St,{onClick:function(){return v(e)},textVal:e.name,selectCondition:e.name===d.name}),Object(V.jsx)(g.a,{})]},e.id)})),Object(V.jsx)(uc,{onClick:function(){return H(!J)},selectCondition:J}),Object(V.jsxs)(Ze.a,{in:J,timeout:"auto",children:[E.filter((function(e){return!y.find((function(t){return t.id===e.id}))})).map((function(e){return Object(V.jsx)("div",{children:Object(V.jsx)(St,{onClick:function(){return v(e)},textVal:e.name,selectCondition:e.name===d.name})},e.id)})),n&&Object(V.jsx)(wt,{onClick:function(){return K(!0)},textVal:"Add Person/Place"})]})]})}),n&&Object(V.jsx)(jc,{personPlaceSelectParent:{mounted:l,stageId:u.id,setPersonPlace:j},personPlaceSelect:{mounted:h,addPersonPlace:$,setAddPersonPlace:K,setAllPeoplePlaces:B,setPeoplePlaces:w,open:f,setOpen:m}})]})}return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(pt,{label:s?"person/place":"Person/Place*",id:"person-place-select",value:d.name,setOpen:m,className:c,button:!!s,TextFieldProps:i,ButtonProps:o,disabled:!u.id}),Object(V.jsx)(bt,{open:f,setOpen:m,flex:"success"!==A||"success"!==L,children:U})]})}var Oc=a(18),hc=a(249),pc=a.n(hc),xc=Object(o.a)((function(e){return{taskList:{outline:"1px solid #D3D3D3",margin:"auto",marginTop:e.spacing(0),backgroundColor:"#F8F8F8"},listItem:{wordWrap:"break-word"}}}));function fc(e){var t,a,n=xc(),c=e.taskList,s=e.setTaskList,i=e.className,o=Object(r.useState)(""),l=Object(O.a)(o,2),u=l[0],d=l[1];return t=c.length>0?Object(V.jsx)("div",{className:i,children:Object(V.jsx)(lt.a,{className:n.taskList,children:c.map((function(e,t){return Object(V.jsxs)(v.a,{alignItems:"flex-start",children:[Object(V.jsx)(k.a,{className:n.listItem,children:Object(V.jsx)("div",{className:n.listItem,children:e})}),Object(V.jsx)(p.a,{onClick:function(){return function(e){var t=Object(Oc.a)(c);t.splice(e,1),s(t)}(t)},size:"small",children:Object(V.jsx)(pc.a,{})})]},e+Math.random())}))})}):Object(V.jsx)(V.Fragment,{}),a=u?Object(V.jsx)(p.a,{onClick:function(){s([].concat(Object(Oc.a)(c),[u])),d("")},size:"large",children:Object(V.jsx)(N.a,{})}):Object(V.jsx)(p.a,{disabled:!0,size:"large",children:Object(V.jsx)(N.a,{})}),Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(z.a,{className:i&&i,label:"Add Task",variant:"outlined",value:u,onChange:function(e){d(e.target.value)},InputProps:{endAdornment:Object(V.jsx)(R.a,{position:"end",children:a})}}),t]})}function mc(e){var t=e.classes,a=e.addVehicleState,n=e.mounted,c=a.stage,s=a.setStage,i=a.personPlace,o=a.setPersonPlace,l=a.taskList,u=a.setTaskList,d=a.addVehicleStatus,j=Object(r.useState)(!1),b=Object(O.a)(j,2),h=b[0],p=b[1];return Object(r.useEffect)((function(){d&&p(!1)}),[d]),Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(Ne.a,{className:t.inputField,startIcon:h?Object(V.jsx)(Vn.a,{}):Object(V.jsx)(N.a,{}),onClick:function(){h&&p(!1),!h&&p(!0)},children:"Stage Assignment"}),Object(V.jsx)(Ze.a,{in:h,timeout:"auto",sx:{width:"100%"},children:Object(V.jsxs)("div",{className:t.form,children:[Object(V.jsx)(sc,{className:t.inputField,parent:{mounted:n,stage:c,setStage:s},allowAddStage:!0}),Object(V.jsx)(bc,{className:t.inputField,parent:{mounted:n,stage:c,personPlace:i,setPersonPlace:o},allowAddPersonPlace:!0}),Object(V.jsx)(fc,{className:t.inputField,taskList:l,setTaskList:u})]})})]})}var gc=a(92),vc=a.n(gc);function Sc(e){var t=e.classes,a=e.addVehicleState,n=a.notes,c=a.setNotes,s=a.addVehicleStatus,i=Object(r.useState)(!1),o=Object(O.a)(i,2),l=o[0],u=o[1];return Object(r.useEffect)((function(){s&&u(!1)}),[s]),Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(Ne.a,{className:t.inputField,startIcon:l?Object(V.jsx)(Vn.a,{}):Object(V.jsx)(vc.a,{}),onClick:function(){l&&u(!1),!l&&u(!0)},children:"Notes"}),Object(V.jsx)(Ze.a,{in:l,timeout:"auto",style:{width:"100%"},children:Object(V.jsx)("div",{className:t.form,children:Object(V.jsx)(z.a,{className:t.inputField,multiline:!0,maxRows:4,variant:"outlined",label:"Notes",value:n,onChange:function(e){c(e.target.value)}})})})]})}function kc(e){var t=e.addVehicleState,a=e.addVehicleClick,n=e.className,c=t.stockOkay,r=t.year,s=t.make,i=t.model,o=t.stage,l=t.personPlace;return"loading"===t.addVehicleStatus?Object(V.jsx)(ee.a,{style:{width:"25px",margin:"auto"}}):c&&r&&s.id&&i.id&&o.id&&l.id?Object(V.jsx)(wa.a,{className:n||"",children:Object(V.jsx)(Ne.a,{variant:"contained",color:"primary",onClick:a,children:"ADD"})}):Object(V.jsx)(wa.a,{className:n||"",children:Object(V.jsx)(Ne.a,{variant:"contained",color:"primary",disabled:!0,children:"ADD"})})}var yc=Object(o.a)((function(e){return{title:{color:e.titleColor.darkBlue},dialog:{padding:10,textAlign:"center",maxWidth:500},button:{width:120,margin:5}}}));function wc(e){var t=yc(),a=Object(i.g)(),n=e.open,c=e.addVehicleState,r=c.setAddVehicleStatus,s=c.addedVehicle;return Object(V.jsx)(ut.a,{"aria-labelledby":"add-vehicle-dialog",open:n,disableEscapeKeyDown:!0,children:Object(V.jsxs)("div",{className:t.dialog,children:[Object(V.jsx)(ka.a,{id:"add-vehicle-dialog",className:t.title,children:"Successfully Added:"}),s?Object(V.jsx)(Ja,{vehicle:s,variant:"subtitle1"}):Object(V.jsx)(V.Fragment,{}),Object(V.jsx)("br",{}),Object(V.jsx)(g.a,{}),Object(V.jsx)(b.a,{variant:"subtitle1",children:"What next?"}),Object(V.jsx)(Ne.a,{onClick:function(){r(""),a.push("/add-vehicle")},className:t.button,color:"primary",startIcon:Object(V.jsx)(N.a,{}),variant:"outlined",size:"small",children:"ANOTHER"}),Object(V.jsx)(Ne.a,{onClick:function(){r(""),a.push("/all-vehicles/active/asc/10/first/0")},className:t.button,color:"primary",variant:"outlined",size:"small",children:"DONE"})]})})}var Cc=Object(o.a)((function(e){return{title:{color:e.titleColor.darkBlue},dialog:{padding:10,textAlign:"center",maxWidth:500},button:{width:120,margin:5}}}));function Nc(e){var t=Cc(),a=Object(i.g)(),n=e.open,c=e.addVehicleClick,r=e.addVehicleState.setAddVehicleStatus;return Object(V.jsx)(ut.a,{"aria-labelledby":"add-vehicle-dialog",open:n,children:Object(V.jsxs)("div",{className:t.dialog,children:[Object(V.jsx)(ka.a,{id:"add-vehicle-dialog",className:t.title,children:"Failed to Add Vehicle"}),Object(V.jsx)("br",{}),Object(V.jsx)(g.a,{}),Object(V.jsx)(b.a,{variant:"subtitle1",children:"What next?"}),Object(V.jsx)(Ne.a,{className:t.button,onClick:function(){r(""),a.push("/all-vehicles/active/asc/10/first/0")},variant:"outlined",size:"small",children:"CANCEL"}),Object(V.jsx)(Ne.a,{className:t.button,onClick:c,variant:"outlined",size:"small",children:"TRY AGAIN"})]})})}var Ac=Object(o.a)((function(e){return{form:{marginTop:e.spacing(1),margin:"auto",width:"clamp(200px, 100%, 400px)",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},inputField:{marginTop:e.spacing(1),marginBottom:e.spacing(1),margin:"auto",width:"clamp(200px, 100%, 300px)"}}}));function Fc(){var e=Ac(),t=ue(),a=Ee().userPreferences,n=Pe().delay,c=a.defaultStageAssignment,s=Object(r.useState)(""),i=Object(O.a)(s,2),o=i[0],l=i[1],u=Object(r.useState)(!0),d=Object(O.a)(u,2),j=d[0],b=d[1],h=Object(r.useState)(""),p=Object(O.a)(h,2),x=p[0],f=p[1],m=Object(r.useState)(""),g=Object(O.a)(m,2),v=g[0],S=g[1],k=Object(r.useState)({id:"",name:""}),y=Object(O.a)(k,2),w=y[0],C=y[1],N=Object(r.useState)({id:"",name:""}),A=Object(O.a)(N,2),F=A[0],P=A[1],D=Object(r.useState)({id:"",name:""}),T=Object(O.a)(D,2),E=T[0],B=T[1],M=Object(r.useState)({id:"",name:""}),I=Object(O.a)(M,2),L=I[0],z=I[1],R=Object(r.useState)({id:"",name:""}),U=Object(O.a)(R,2),W=U[0],G=U[1],J=Object(r.useState)([]),H=Object(O.a)(J,2),Y=H[0],q=H[1],$=Object(r.useState)(""),K=Object(O.a)($,2),Q=K[0],_=K[1],ee=Object(r.useState)(""),te=Object(O.a)(ee,2),ne=te[0],ce=te[1],re=Object(r.useState)(null),se=Object(O.a)(re,2),ie=se[0],oe=se[1];Object(r.useEffect)((function(){L.id||z(c.stage)}),[c,L]),Object(r.useEffect)((function(){L===c.stage&&(""!==ne&&"success"!==ne||G(c.personPlace))}),[c,L,ne]);var le={stock:o,setStock:l,stockOkay:j,setStockOkay:b,stockError:x,setStockError:f,year:v,setYear:S,make:w,setMake:C,model:F,setModel:P,trim:E,setTrim:B,stage:L,setStage:z,personPlace:W,setPersonPlace:G,taskList:Y,setTaskList:q,notes:Q,setNotes:_,addVehicleStatus:ne,setAddVehicleStatus:ce,addedVehicle:ie,setAddedVehicle:oe},de=function(){var e=Object(Z.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ce("loading"),e.next=3,n();case 3:zt(o).then((function(e){t.current&&e.data&&e.data.exists?(ce(""),f("stk# already exists")):_t({stock:""!==o?parseInt(o):0,year:parseInt(v),make:w,model:F,trim:E,notes:Q||""},{stage:L,personPlace:W,tasks:Y}).then((function(e){t.current&&ce(e.status),"success"===e.status&&(t.current&&oe(e.doc),l(""),b(!0),f(""),S(""),C({id:"",name:""}),P({id:"",name:""}),B({id:"",name:""}),z({id:"",name:""}),G({id:"",name:""}),q([]),_("")),"failed"===e.status&&console.error(e)}),(function(e){t.current&&ce("failed"),console.error(e)}))}),(function(e){t.current&&ce("failed"),console.error(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),je=Object(r.useState)(!1),be=Object(O.a)(je,2),Oe=be[0],he=be[1];Object(r.useEffect)((function(){he("success"===ne)}),[ne,ie]);var pe=Object(r.useState)(!1),xe=Object(O.a)(pe,2),fe=xe[0],me=xe[1];return Object(r.useEffect)((function(){me("failed"===ne)}),[ne]),Object(V.jsx)(V.Fragment,{children:Object(V.jsx)("form",{autoComplete:"off",children:Object(V.jsxs)(ae,{flexDirection:"column",children:[Object(V.jsx)(An.a,{children:"*required field"}),Object(V.jsx)(Tn,{mounted:t,addVehicleState:le,classes:e}),Object(V.jsx)(mc,{mounted:t,addVehicleState:le,classes:e}),Object(V.jsx)(Sc,{mounted:t,addVehicleState:le,classes:e}),Object(V.jsx)(kc,{className:e.inputField,addVehicleState:le,addVehicleClick:de}),Object(V.jsx)(wc,{open:Oe,addVehicleState:le}),Object(V.jsx)(Nc,{open:fe,addVehicleClick:de,addVehicleState:le})]})})})}var Pc=Object(o.a)((function(e){return{addVehicle:{margin:"auto"}}}));function Dc(){var e=Pc();return Object(V.jsx)(We,{className:e.addVehicle,children:Object(V.jsxs)($e,{children:[Object(V.jsxs)(Je,{children:[Object(V.jsx)(Ye,{icon:Object(V.jsx)(N.a,{color:"primary"}),variant:"h5",children:"Add Vehicle"}),Object(V.jsx)(g.a,{})]}),Object(V.jsx)(Ke,{children:Object(V.jsx)(Fc,{})})]})})}function Tc(){return Object(V.jsx)(Ue,{children:Object(V.jsxs)(qe,{children:[Object(V.jsxs)(Je,{children:[Object(V.jsx)(Ia.a,{}),Object(V.jsx)(Ia.a,{})]}),Object(V.jsx)(g.a,{}),Object(V.jsx)(Ia.a,{variant:"rectangular",height:300})]})})}var Ec=a(250),Vc=a.n(Ec),Bc=a(251),Mc=a.n(Bc),Ic=a(141),Lc=a.n(Ic);function zc(e){var t=Pe().delay,a=e.vehicleDetailState,n=e.mounted,c=a.vehicle,s=a.setVehicle,i=a.setUpdateVehicleStatus,o=Object(r.useState)(null),l=Object(O.a)(o,2),u=l[0],d=l[1],j=function(){var e=Object(Z.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i("loading"),e.next=3,t();case 3:c&&ta(c.id,{status:"trash"}).then((function(e){n.current&&i(e.status),"success"===e.status&&n.current&&s(e.doc),"failed"===e.status&&console.error(e)}),(function(e){n.current&&i("failed"),console.error(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Object(Z.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i("loading"),e.next=3,t();case 3:c&&na(c.id,c.currentStage.id,Date.now()).then((function(e){n.current&&i(e.status),"success"===e.status&&n.current&&s(e.doc),"failed"===e.status&&console.error(e)}),(function(e){n.current&&i("failed"),console.error(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(V.jsxs)("div",{children:[Object(V.jsx)(p.a,{"aria-controls":"action-menu","aria-haspopup":"true",onClick:function(e){d(e.currentTarget)},size:"large",children:Object(V.jsx)(Vc.a,{})}),Object(V.jsxs)($.a,{id:"action-menu",anchorEl:u,keepMounted:!0,open:Boolean(u),onClose:function(){d(null)},children:[Object(V.jsxs)(K.a,{onClick:j,children:[Object(V.jsxs)(S.a,{children:[Object(V.jsx)(Mc.a,{})," "]}),Object(V.jsx)(k.a,{children:"Trash"})]}),c&&"sold"!==c.status&&Object(V.jsxs)(K.a,{onClick:b,children:[Object(V.jsxs)(S.a,{children:[Object(V.jsx)(Lc.a,{})," "]}),Object(V.jsx)(k.a,{children:"Sell"})]})]})]})}var Rc=a(93),Uc=a(506),Wc=a(539),Gc=Object(Sn.a)({root:{"&$selected":{backgroundColor:"#F5F5F5"}},selected:{}})(Wc.a),Jc=a(252),Hc=a.n(Jc);function Yc(e){var t=ue(),a=Pe().delay,n=e.vehicleDetailState,c=e.assignStageState,s=c.stage,i=c.personPlace,o=c.taskList,l=n.mounted,u=n.vehicle,d=n.setVehicle,j=null===u||void 0===u?void 0:u.id,b=null===u||void 0===u?void 0:u.currentStage,h=null===u||void 0===u?void 0:u.dateOnLot,p=Object(r.useState)(""),x=Object(O.a)(p,2),f=x[0],m=x[1],g=function(){var e=Object(Z.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m("loading"),e.next=3,a();case 3:j&&b&&Qn({vehicleId:j,stage:s,personPlace:i,tasks:o,dateAssigned:Date.now(),dateOnLot:h},b).then((function(e){t.current&&m(e.status),"success"===e.status&&l.current&&d(e.doc),"failed"===e.status&&console.error(e)}),(function(e){t.current&&m("failed"),console.error(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=Object(V.jsx)(Ne.a,{onClick:g,variant:"contained",color:"primary",disableElevation:!0,children:"Assign Now"}),S=Object(V.jsx)(Ne.a,{variant:"contained",color:"primary",disableElevation:!0,disabled:!0,children:"Assign Now"});return Object(V.jsx)(wa.a,{children:"loading"===f?Object(V.jsx)(ee.a,{size:50}):j&&s.name&&i.name?v:S})}var qc=Object(o.a)((function(e){return{inputField:{marginTop:e.spacing(1),marginBottom:e.spacing(1),margin:"auto",width:"clamp(200px, 100%, 300px)"}}}));function $c(e){var t=ue(),a=qc(),n=e.vehicleDetailState,c=Object(r.useState)({id:"",name:""}),s=Object(O.a)(c,2),i=s[0],o=s[1],l=Object(r.useState)({id:"",name:""}),u=Object(O.a)(l,2),d=u[0],j=u[1],b=Object(r.useState)([]),h=Object(O.a)(b,2),p=h[0],x=h[1],f={stage:i,personPlace:d,taskList:p};return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(sc,{className:a.inputField,parent:{mounted:t,stage:i,setStage:o},allowAddStage:!0}),Object(V.jsx)(bc,{className:a.inputField,parent:{mounted:t,stage:i,personPlace:d,setPersonPlace:j},allowAddPersonPlace:!0}),Object(V.jsx)(fc,{className:a.inputField,taskList:p,setTaskList:x}),Object(V.jsx)("br",{}),Object(V.jsx)(Yc,{vehicleDetailState:n,assignStageState:f})]})}var Kc=Object(o.a)((function(e){return{sellButton:{width:125,backgroundColor:e.palette.success.main,color:"white","&:hover":{backgroundColor:e.palette.success.dark}},reassignButton:{width:125}}}));function Qc(e){var t=ue(),a=Kc(),n=Pe().delay,c=e.vehicleDetailState,s=c.mounted,i=c.vehicle,o=c.setVehicle,l=null===i||void 0===i?void 0:i.currentStage.id,u=Object(r.useState)(""),d=Object(O.a)(u,2),j=d[0],b=d[1],h=Object(r.useState)(""),p=Object(O.a)(h,2),x=p[0],f=p[1],m=function(){var e=Object(Z.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f("loading"),e.next=3,n();case 3:l&&Zn(l,Date.now()).then((function(e){t.current&&f(e.status),"success"===e.status&&s&&e.data&&o(e.data),"failed"===e.status&&console.error(e)}),(function(e){t.current&&f("failed"),console.error(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(Z.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b("loading"),e.next=3,n();case 3:i&&na(i.id,i.currentStage.id,Date.now()).then((function(e){t.current&&b(e.status),"success"===e.status&&s.current&&o(e.doc),"failed"===e.status&&console.error(e)}),(function(e){t.current&&b("failed"),console.error(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return"failed"===x?Object(V.jsx)(Ae,{errorMessage:"Failed to re-assign vehicle",retryAction:m}):"failed"===j?Object(V.jsx)(Ae,{errorMessage:"Failed to sell vehicle",retryAction:g}):Object(V.jsx)(te.a,{m:1,children:"loading"===j||"loading"===x?Object(V.jsx)(ee.a,{size:50}):l&&Object(V.jsxs)(an.a,{children:[Object(V.jsx)(Ne.a,{className:a.reassignButton,onClick:m,variant:"outlined",children:"re-assign"}),Object(V.jsx)(Ne.a,{className:a.sellButton,startIcon:Object(V.jsx)(Lc.a,{}),onClick:g,variant:"contained",disableElevation:!0,children:"Sell"})]})})}function Xc(e){var t=ue(),a=Pe().delay,n=e.vehicleDetailState,c=n.mounted,s=n.vehicle,i=n.setVehicle,o=null===s||void 0===s?void 0:s.currentStage.id,l=Object(r.useState)(""),u=Object(O.a)(l,2),d=u[0],j=u[1],b=function(){var e=Object(Z.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j("loading"),e.next=3,a();case 3:o&&Zn(o,Date.now()).then((function(e){t.current&&j(e.status),"success"===e.status&&c&&e.data&&i(e.data),"failed"===e.status&&console.error(e)}),(function(e){t.current&&j("failed"),console.error(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return"failed"===d?Object(V.jsx)(Ae,{errorMessage:"Failed to complete stage",retryAction:b}):Object(V.jsx)(te.a,{m:1,children:"loading"===d?Object(V.jsx)(ee.a,{size:50}):o&&Object(V.jsx)(Ne.a,{onClick:b,variant:"contained",color:"primary",disableElevation:!0,children:"Complete"})})}var Zc=Object(W.a)(te.a)((function(e){e.theme;return{display:"flex",p:1,justifyContent:"center",alignItems:"center",alignContent:"start",flexDirection:"column",margin:"auto",width:"clamp(200px, 100%, 600px)",minHeight:"200px"}})),_c=Object(o.a)((function(e){return{sold:{color:e.palette.success.main},content:{width:"clamp(200px, 100%, 500px)"},flexDivider:{width:"clamp(200px, 100%, 400px)",height:1,margin:"auto",marginTop:5}}}));function er(e){var t=_c(),a=e.vehicleDetailState,n=a.vehicle,c=null===n||void 0===n?void 0:n.currentStage,r=null===c||void 0===c?void 0:c.stage.name,s=null===c||void 0===c?void 0:c.personPlace.name,i=(null===n||void 0===n?void 0:n.dateSold)&&new Date(n.dateSold);return Object(V.jsx)(Ke,{children:Object(V.jsxs)(Zc,{children:[Object(V.jsxs)(ae,{flexDirection:"column",className:t.content,children:["sold"===(null===n||void 0===n?void 0:n.status)?Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(b.a,{className:t.sold,variant:"h6",children:Object(V.jsx)("strong",{children:"Sold"})}),Object(V.jsx)(b.a,{variant:"subtitle1",children:i&&i.toLocaleDateString()})]}):"complete"===(null===c||void 0===c?void 0:c.status)?Object(V.jsx)(V.Fragment,{children:Object(V.jsx)(b.a,{variant:"h6",color:"primary",children:Object(V.jsx)("strong",{children:"Assign"})})}):Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(b.a,{variant:"h6",color:"primary",children:Object(V.jsx)("strong",{children:r})}),Object(V.jsx)(b.a,{variant:"h6",children:s})]}),"sold"!==(null===n||void 0===n?void 0:n.status)&&Object(V.jsx)(g.a,{className:t.flexDivider,flexItem:!0})]}),"sold"===(null===n||void 0===n?void 0:n.status)?Object(V.jsx)(V.Fragment,{}):"Assign"===r||"complete"===(null===c||void 0===c?void 0:c.status)?Object(V.jsx)($c,{vehicleDetailState:a}):"For Sale"===r?Object(V.jsx)(Qc,{vehicleDetailState:a}):Object(V.jsxs)(V.Fragment,{children:[n&&n.currentStage.tasks.length>=1&&Object(V.jsxs)(ae,{sx:{flexDirection:"column",width:"clamp(200px, 100%, 400px)"},children:[Object(V.jsx)(b.a,{sx:{textAlign:"center"},children:"Tasks:"}),Object(V.jsx)(lt.a,{dense:!0,sx:{paddingLeft:3,paddingRight:3},children:null===n||void 0===n?void 0:n.currentStage.tasks.map((function(e){return Object(V.jsxs)(v.a,{disablePadding:!0,sx:{overflowWrap:"break-word"},children:[Object(V.jsx)(S.a,{children:Object(V.jsx)(Hc.a,{})}),Object(V.jsx)(k.a,{primary:e})]},e[0]+Math.random().toString())}))}),Object(V.jsx)(g.a,{flexItem:!0})]}),Object(V.jsx)(Xc,{vehicleDetailState:a})]})]})})}var tr=a(541),ar=a(542),nr=a(544),cr=a(540),rr=a(543),sr=a(253),ir=a.n(sr),or=Object(o.a)((function(e){return{table:{width:"clamp(200px, 100%, 400px)"},chip:{minWidth:95}}}));function lr(e){var t=or(),a=e.vehicle,n=a.status,c=a.currentStage,r=a.dateAdded,s=a.reconditionTime,i=a.forSaleTime,o=a.dateOnLot,l=a.totalSellTime,u=c.stage.name,d=s?Object(V.jsx)(Qa,{milliseconds:s}):Object(V.jsx)(Qa,{milliseconds:Date.now()-r}),j=c.completeTime?Object(V.jsx)(Qa,{milliseconds:c.completeTime}):Object(V.jsx)(Qa,{milliseconds:Date.now()-c.dateAssigned}),O=i&&Object(V.jsx)(Qa,{milliseconds:i}),h=l&&Object(V.jsx)(Qa,{milliseconds:l});return Object(V.jsx)(Ke,{children:Object(V.jsxs)(Zc,{children:[Object(V.jsxs)(ae,{style:{gap:10},children:[Object(V.jsx)(ir.a,{color:"primary"}),Object(V.jsx)(b.a,{variant:"h6",color:"primary",children:Object(V.jsx)("strong",{children:"Duration Statistics:"})})]}),Object(V.jsx)(cr.a,{component:Re.a,className:t.table,children:Object(V.jsx)(tr.a,{"aria-label":"stats table",children:Object(V.jsxs)(ar.a,{children:[Object(V.jsxs)(rr.a,{children:[Object(V.jsx)(nr.a,{component:"th",scope:"row",align:"left",children:"Total Reconditioning:"}),Object(V.jsx)(nr.a,{align:"right",children:Object(V.jsx)(qa,{className:t.chip,color:o?"primary":"default",label:d})})]}),"sold"!==n?Object(V.jsxs)(rr.a,{children:[Object(V.jsxs)(nr.a,{component:"th",scope:"row",align:"left",children:[u,":"]}),Object(V.jsx)(nr.a,{align:"right",children:Object(V.jsx)(qa,{className:t.chip,color:"complete"===c.status?"primary":"Assign"===c.stage.name?"secondary":"default",label:j})})]}):i?Object(V.jsxs)(rr.a,{children:[Object(V.jsx)(nr.a,{component:"th",scope:"row",align:"left",children:"For Sale:"}),Object(V.jsx)(nr.a,{align:"right",children:Object(V.jsx)(qa,{className:t.chip,color:"primary",label:O})})]}):Object(V.jsx)(V.Fragment,{}),"sold"===n&&Object(V.jsxs)(rr.a,{children:[Object(V.jsx)(nr.a,{component:"th",scope:"row",align:"left",children:"Total Time to Sell:"}),Object(V.jsx)(nr.a,{align:"right",children:Object(V.jsx)(Xa,{className:t.chip,color:"primary",label:h})})]}),Object(V.jsx)(rr.a,{children:Object(V.jsx)(nr.a,{align:"right",size:"small",colSpan:2,children:Object(V.jsxs)(ce,{children:[Object(V.jsx)(Ya.a,{label:"incomplete",size:"small"}),Object(V.jsx)(Ya.a,{label:"complete",size:"small",color:"primary"})]})})})]})})})]})})}var ur=["children","value","index"];function dr(e){var t=e.children,a=e.value,n=e.index,c=Object(Rc.a)(e,ur);return Object(V.jsx)("div",Object(Le.a)(Object(Le.a)({role:"tabpanel",hidden:a!==n,id:"stage-tabpanel-".concat(n),"aria-labelledby":"stage-tab-".concat(n)},c),{},{children:a===n&&Object(V.jsx)("div",{children:t})}))}function jr(e){return{id:"stage-tab-".concat(e),"aria-controls":"vehicle-tabpanel-".concat(e)}}function br(e){var t=e.vehicleDetailState,a=t.vehicle,n=Object(r.useState)("current"),c=Object(O.a)(n,2),s=c[0],i=c[1];return Object(V.jsxs)("div",{children:[Object(V.jsxs)(Uc.a,{centered:!0,value:s,indicatorColor:"primary",textColor:"primary",onChange:function(e,t){i(t)},"aria-label":"current stage navigation",children:[Object(V.jsx)(Gc,Object(Le.a)({label:"Current Stage",value:"current"},jr("current"))),Object(V.jsx)(Gc,Object(Le.a)({label:"Duration Stats",value:"stats"},jr("stats")))]}),Object(V.jsx)(dr,{value:s,index:"current",children:Object(V.jsx)(er,{vehicleDetailState:t})}),Object(V.jsx)(dr,{value:s,index:"stats",children:a&&Object(V.jsx)(lr,{vehicle:a})})]})}function Or(e){var t,a=e.editVehicleState,n=e.setEdit,c=e.className,r=Pe().delay,s=a.vehicleDetailsMounted,i=a.mounted,o=a.vehicleId,l=a.stock,u=a.stockOkay,d=a.setStockError,j=a.editStock,b=a.year,O=a.editYear,h=a.make,p=a.editMake,x=a.model,f=a.editModel,m=a.trim,g=a.editTrim,v=a.dateAdded,S=a.editDateAdded,k=a.dateSold,y=a.editDateSold,w=a.editVehicleStatus,C=a.setEditVehicleStatus,N=a.setVehicle,A=function(){var e={stock:parseInt(j),year:parseInt(O),make:p,model:f,trim:g,dateAdded:S,dateSold:k&&y};ta(o,e).then((function(e){i.current&&C(e.status),"success"===e.status&&(s.current&&N(e.doc),i&&n(!1)),"failed"===e.status&&console.error(e)}),(function(e){i.current&&C("failed"),console.error(e)}))},F=function(){var e=Object(Z.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C("loading"),e.next=3,r();case 3:l===j?A():zt(j).then((function(e){i.current&&e.data&&e.data.exists?(C(""),d("stk# already exists")):A()}),(function(e){i.current&&C("failed"),console.error(e)}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=Object(V.jsx)(Ne.a,{variant:"contained",color:"primary",onClick:F,children:"Update"}),D=Object(V.jsx)(Ne.a,{variant:"contained",color:"primary",disabled:!0,children:"Update"});return t="loading"===w?Object(V.jsx)(ee.a,{size:25}):k?(l!==j||b!==O||h!==p||x!==f||m!==g||v!==S||k!==y)&&u&&O&&p.id&&f.id&&S?P:D:(l!==j||b!==O||h!==p||x!==f||m!==g||v!==S)&&u&&O&&p.id&&f.id&&S?P:D,Object(V.jsxs)(ne,{className:c||"",children:[Object(V.jsx)(Ne.a,{variant:"contained",onClick:function(){return n(!1)},children:"Cancel"}),t]})}function hr(e){var t=ue(),a=e.vehicleDetailsMounted,n=e.vehicle,c=e.setVehicle,s=e.setEdit,i=e.inputFieldStyle,o=n.id,l=n.stock,u=n.year,d=n.make,j=n.model,b=n.trim,h=n.dateAdded,p=n.dateSold,x=Object(r.useState)(l.toString()),f=Object(O.a)(x,2),m=f[0],g=f[1],v=Object(r.useState)(!0),S=Object(O.a)(v,2),k=S[0],y=S[1],w=Object(r.useState)(""),C=Object(O.a)(w,2),N=C[0],A=C[1],F=Object(r.useState)(u.toString()),P=Object(O.a)(F,2),D=P[0],T=P[1],E=Object(r.useState)(d),B=Object(O.a)(E,2),M=B[0],I=B[1],L=Object(r.useState)({id:"",name:""}),R=Object(O.a)(L,2),U=R[0],W=R[1],G=Object(r.useState)({id:"",name:""}),J=Object(O.a)(G,2),H=J[0],Y=J[1],q=Object(r.useState)(h),$=Object(O.a)(q,2),K=$[0],Q=$[1],X=Object(r.useState)(p||0),Z=Object(O.a)(X,2),_=Z[0],ee=Z[1],te=Object(r.useState)(""),ae=Object(O.a)(te,2),ne=ae[0],ce=ae[1];Object(r.useEffect)((function(){W(M===d?j:{id:"",name:""})}),[M,d,j]),Object(r.useEffect)((function(){Y(U===j?b:{id:"",name:""})}),[U,j,b]);var re={stock:m,setStock:g,stockOkay:k,setStockOkay:y,stockError:N,setStockError:A,addEditVehicleStatus:ne},se={vehicleDetailsMounted:a,mounted:t,vehicleId:o,stock:l.toString(),editStock:m,stockOkay:k,setStockOkay:y,setStockError:A,year:u.toString(),editYear:D,make:d,editMake:M,model:j,editModel:U,trim:b,editTrim:H,dateAdded:h,editDateAdded:K,dateSold:p,editDateSold:_,editVehicleStatus:ne,setEditVehicleStatus:ce,setVehicle:c};return"failed"===ne?Object(V.jsx)(Ae,{errorMessage:"Failed to update vehicle info"}):Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(Dn,{className:i,editStockState:re}),Object(V.jsx)(kt,{className:i,year:D,setYear:T}),Object(V.jsx)(la,{className:i,parent:{mounted:t,make:M,setMake:I},allowAddMake:!0}),Object(V.jsx)(ja,{className:i,parent:{mounted:t,make:M,model:U,setModel:W},allowAddModel:!0}),Object(V.jsx)(ha,{className:i,parent:{mounted:t,make:M,model:U,trim:H,setTrim:Y},allowAddTrim:!0}),Object(V.jsxs)(ma.b,{dateAdapter:fa.a,children:[Object(V.jsx)(wa.a,{className:i,children:Object(V.jsx)(ga.a,{label:"Date Added",value:K,onChange:function(e){e&&Q(e.getTime())},renderInput:function(e){return Object(V.jsx)(z.a,Object(Le.a)({},e))},maxDate:new Date})}),p&&p>0&&Object(V.jsx)(wa.a,{className:i,children:Object(V.jsx)(ga.a,{label:"Date Sold",value:_,onChange:function(e){e&&ee(e.getTime())},renderInput:function(e){return Object(V.jsx)(z.a,Object(Le.a)({},e))},minDate:new Date(K),maxDate:new Date})})]}),Object(V.jsx)(Or,{className:i,editVehicleState:se,setEdit:s})]})}var pr=Object(W.a)(z.a)((function(e){e.theme;return{"&.MuiTextField-root":{"& .Mui-disabled":{WebkitTextFillColor:"black","& .label":{WebkitTextFillColor:"gray"}}}}}));function xr(e){var t=e.vehicle,a=e.inputFieldStyle,n=t.stock,c=t.year,r=t.make.name,s=t.model.name,i=t.trim.name,o=new Date(t.dateAdded).toLocaleDateString("en-us",{year:"numeric",month:"2-digit",day:"2-digit"}),l=t.dateSold&&new Date(t.dateSold).toLocaleDateString("en-us",{year:"numeric",month:"2-digit",day:"2-digit"});return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(pr,{disabled:!0,className:a,label:Object(V.jsx)("span",{className:"label",children:"Stock #"}),value:n>0?n:" "}),Object(V.jsx)(pr,{disabled:!0,className:a,label:Object(V.jsx)("span",{className:"label",children:"Year"}),value:c}),Object(V.jsx)(pr,{disabled:!0,className:a,label:Object(V.jsx)("span",{className:"label",children:"Make"}),value:r}),Object(V.jsx)(pr,{disabled:!0,className:a,label:Object(V.jsx)("span",{className:"label",children:"Model"}),value:s}),Object(V.jsx)(pr,{disabled:!0,className:a,label:Object(V.jsx)("span",{className:"label",children:"Trim"}),value:i||" "}),Object(V.jsx)(pr,{disabled:!0,className:a,label:Object(V.jsx)("span",{className:"label",children:"Date Added"}),value:o}),t.dateSold&&t.dateSold>0&&Object(V.jsx)(pr,{disabled:!0,className:a,label:Object(V.jsx)("span",{className:"label",children:"Date Sold"}),value:l})]})}var fr=Object(o.a)((function(e){return{editButtonDiv:{width:"100%",marginTop:-25,marginBottom:-10},editButton:{float:"right"},inputField:{marginTop:e.spacing(1),marginBottom:e.spacing(1),margin:"auto",width:"clamp(200px, 100%, 300px)"}}}));function mr(e){var t=fr(),a=e.vehicleDetailState,n=a.mounted,c=a.vehicle,s=a.setVehicle,i=a.setDisableDoneButton,o=Object(r.useState)(!1),l=Object(O.a)(o,2),u=l[0],d=l[1];return Object(r.useEffect)((function(){return i(!!u),function(){return i(!1)}}),[u,i]),Object(V.jsx)(Ke,{children:Object(V.jsxs)(Zc,{children:[Object(V.jsx)("div",{className:t.editButtonDiv,children:Object(V.jsx)(p.a,{"aria-label":"edit",className:t.editButton,onClick:function(){d(!u)},color:u?"primary":"inherit",size:"large",children:Object(V.jsx)(vc.a,{})})}),u?c&&Object(V.jsx)(hr,{vehicleDetailsMounted:n,vehicle:c,setVehicle:s,setEdit:d,inputFieldStyle:t.inputField}):c&&Object(V.jsx)(xr,{vehicle:c,inputFieldStyle:t.inputField})]})})}function gr(e){var t,a=e.editNotesState,n=e.setEdit,c=e.className,r=Pe().delay,s=a.vehicleDetailsMounted,i=a.mounted,o=a.vehicleId,l=a.notes,u=a.editNotes,d=a.editNotesStatus,j=a.setEditNotesStatus,b=a.setVehicle,O=function(){var e=Object(Z.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j("loading"),e.next=3,r();case 3:ta(o,{notes:u}).then((function(e){i.current&&j(e.status),"success"===e.status&&(s.current&&b(e.doc),i&&n(!1)),"failed"===e.status&&console.error(e)}),(function(e){i.current&&j("failed"),console.error(e)}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=Object(V.jsx)(Ne.a,{variant:"contained",color:"primary",onClick:O,children:"Update"}),p=Object(V.jsx)(Ne.a,{variant:"contained",color:"primary",disabled:!0,children:"Update"});return t="loading"===d?Object(V.jsx)(ee.a,{size:25}):l!==u?h:p,Object(V.jsxs)(ne,{className:c||"",children:[Object(V.jsx)(Ne.a,{variant:"contained",onClick:function(){return n(!1)},children:"Cancel"}),t]})}function vr(e){var t=ue(),a=e.vehicleDetailsMounted,n=e.vehicle,c=e.setVehicle,s=e.setEdit,i=e.inputFieldStyle,o=n.id,l=n.notes,u=Object(r.useState)(l),d=Object(O.a)(u,2),j=d[0],b=d[1],h=Object(r.useState)(""),p=Object(O.a)(h,2),x=p[0],f={vehicleDetailsMounted:a,mounted:t,vehicleId:o,notes:l,editNotes:j,editNotesStatus:x,setEditNotesStatus:p[1],setVehicle:c};return"failed"===x?Object(V.jsx)(Ae,{errorMessage:"Failed to update vehicle notes"}):Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(wa.a,{className:i,children:Object(V.jsx)(z.a,{onChange:function(e){b(e.target.value)},label:"Notes",value:j,variant:"outlined",multiline:!0,maxRows:5,autoFocus:!0})}),Object(V.jsx)(gr,{className:i,editNotesState:f,setEdit:s})]})}function Sr(e){var t=e.vehicle,a=e.inputFieldStyle,n=t.notes;return Object(V.jsx)(pr,{disabled:!0,label:""===n?Object(V.jsx)("span",{className:"label",children:"..."}):Object(V.jsx)("span",{className:"label",children:"Notes"}),value:n,className:a,multiline:!0,maxRows:5})}var kr=Object(o.a)((function(e){return{editButtonDiv:{width:"100%",marginTop:-25,marginBottom:-10},editButton:{float:"right"},inputField:{marginTop:e.spacing(1),marginBottom:e.spacing(1),margin:"auto",width:"clamp(200px, 100%, 400px)"}}}));function yr(e){var t=kr(),a=e.vehicleDetailState,n=a.mounted,c=a.vehicle,s=a.setVehicle,i=a.setDisableDoneButton,o=Object(r.useState)(!1),l=Object(O.a)(o,2),u=l[0],d=l[1];return Object(r.useEffect)((function(){return i(!!u),function(){return i(!1)}}),[u,i]),Object(V.jsx)(Ke,{children:Object(V.jsxs)(Zc,{children:[Object(V.jsx)("div",{className:t.editButtonDiv,children:Object(V.jsx)(p.a,{"aria-label":"edit",className:t.editButton,onClick:function(){d(!u)},color:u?"primary":"inherit",size:"large",children:Object(V.jsx)(vc.a,{})})}),u?c&&Object(V.jsx)(vr,{vehicleDetailsMounted:n,vehicle:c,setVehicle:s,setEdit:d,inputFieldStyle:t.inputField}):c&&Object(V.jsx)(Sr,{vehicle:c,inputFieldStyle:t.inputField})]})})}var wr=a(254),Cr=a.n(wr);function Nr(e){var t=e.order,a=e.setOrder,n=Object(r.useState)(null),c=Object(O.a)(n,2),s=c[0],i=c[1],o=function(e){i(null),a(e)};return Object(V.jsxs)(ae,{children:[Object(V.jsx)(He,{variant:"h6",children:"Stage History:"}),Object(V.jsx)(p.a,{"aria-controls":"order-menu","aria-haspopup":"true",onClick:function(e){i(e.currentTarget)},size:"large",children:"asc"===t?Object(V.jsx)(ct.a,{}):Object(V.jsx)(Cr.a,{})}),Object(V.jsxs)($.a,{id:"order-menu",anchorEl:s,keepMounted:!0,open:Boolean(s),onClose:function(){return o(t)},children:[Object(V.jsx)(K.a,{onClick:function(){o("desc")},children:"Oldest First"}),Object(V.jsx)(K.a,{onClick:function(){o("asc")},children:"Newest First"})]})]})}var Ar=a(545),Fr=a(255),Pr=a.n(Fr),Dr=Object(o.a)({dialog:{padding:20,textAlign:"left",width:"clamp(200px, 80vw, 400px)",marginTop:-50},closeButton:{float:"right"},label:{fontSize:10,float:"left",width:"100%",marginTop:10}});function Tr(e){var t=Dr(),a=e.onClose,n=e.open,c=e.stageAssignment,r=e.timeElapsed,s=c.stage.name,i=c.personPlace.name,o=function(){a()},l=function(e){var t=new Date(e);return Object(V.jsx)("span",{children:t.toLocaleDateString("en-US",{year:"2-digit",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})})};return Object(V.jsxs)(ut.a,{onClose:o,"aria-labelledby":"stage-details-dialog",open:n,children:[Object(V.jsx)("div",{children:Object(V.jsx)(p.a,{className:t.closeButton,onClick:o,size:"large",children:Object(V.jsx)(Pr.a,{})})}),Object(V.jsxs)("div",{className:t.dialog,children:[Object(V.jsx)("div",{className:t.label,children:"Stage:"}),Object(V.jsx)(b.a,{variant:"subtitle1",children:s}),Object(V.jsx)(g.a,{}),Object(V.jsx)("span",{className:t.label,children:"Person/Place:"}),Object(V.jsx)(b.a,{variant:"subtitle1",children:i}),Object(V.jsx)(g.a,{}),Object(V.jsx)("span",{className:t.label,children:"Status:"}),Object(V.jsx)(b.a,{variant:"subtitle1",children:c.status}),Object(V.jsx)(g.a,{}),Object(V.jsx)("span",{className:t.label,children:"Tasks: "}),Object(V.jsx)(lt.a,{children:c.tasks.map((function(e){return Object(V.jsx)(v.a,{children:e},e+Math.random())}))}),Object(V.jsx)(g.a,{}),Object(V.jsx)("span",{className:t.label,children:"Date Assigned:"}),Object(V.jsx)(b.a,{variant:"subtitle1",children:l(c.dateAssigned)}),Object(V.jsx)(g.a,{}),c.dateCompleted>0&&Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)("span",{className:t.label,children:"Date Completed:"}),Object(V.jsx)(b.a,{variant:"subtitle1",children:l(c.dateCompleted)})]}),Object(V.jsx)(g.a,{}),Object(V.jsx)("span",{className:t.label,children:"complete"===c.status?"Time to Complete":"Time Elapsed"}),Object(V.jsx)(b.a,{variant:"subtitle1",children:r(c.dateAssigned,c.status,c.completeTime)}),Object(V.jsx)(g.a,{})]})]})}var Er=Object(o.a)({tableContainer:{width:"clamp(200px, 100%, 600px)"},table:{minWidth:450,backgroundColor:"#F9F9F9"},stageButton:{width:75,textAlign:"left",overflow:"hidden",textOverflow:"ellipsis"}});function Vr(e){var t=Er(),a=e.sortedStageHistory,n=function(e){var t=new Date(e);return Object(V.jsx)("span",{children:t.toLocaleDateString("en-US",{year:"2-digit",month:"2-digit",day:"2-digit"})})},c=function(e,t,a){if("complete"===t)return Object(V.jsx)(Qa,{color:"primary",milliseconds:a});var n=Date.now()-e;return Object(V.jsx)(Qa,{color:"secondary",milliseconds:n})},s=Object(r.useState)(!1),i=Object(O.a)(s,2),o=i[0],l=i[1],u=Object(r.useState)(),d=Object(O.a)(u,2),j=d[0],b=d[1];return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(cr.a,{className:t.tableContainer,component:Re.a,children:Object(V.jsxs)(tr.a,{className:t.table,size:"small","aria-label":"stage history table",children:[Object(V.jsx)(Ar.a,{children:Object(V.jsxs)(rr.a,{children:[Object(V.jsx)(nr.a,{children:"Stage"}),Object(V.jsx)(nr.a,{children:"Time"}),Object(V.jsx)(nr.a,{children:"Person/Place"}),Object(V.jsx)(nr.a,{children:"Assigned"}),Object(V.jsx)(nr.a,{children:"Completed"})]})}),Object(V.jsx)(ar.a,{children:a.map((function(e){return Object(V.jsxs)(rr.a,{children:[Object(V.jsx)(nr.a,{component:"th",scope:"row",children:Object(V.jsx)(Ne.a,{size:"small",color:"incomplete"===e.status?"secondary":"inherit",onClick:function(){return b(e),void l(!0)},children:Object(V.jsx)("span",{className:t.stageButton,children:e.stage.name})})}),Object(V.jsx)(nr.a,{children:c(e.dateAssigned,e.status,e.completeTime)}),Object(V.jsx)(nr.a,{children:e.personPlace.name}),Object(V.jsx)(nr.a,{component:"th",scope:"row",children:n(e.dateAssigned)}),Object(V.jsx)(nr.a,{children:e.dateCompleted>0&&n(e.dateCompleted)})]},e.dateAssigned)}))})]})}),j&&Object(V.jsx)(Tr,{open:o,onClose:function(){l(!1),b(void 0)},stageAssignment:j,timeElapsed:c})]})}function Br(e){var t=ue(),a=Pe().delay,n=e.vehicleId,c=Object(r.useState)([]),s=Object(O.a)(c,2),i=s[0],o=s[1],l=Object(r.useState)(""),u=Object(O.a)(l,2),d=u[0],j=u[1],b=Object(r.useCallback)(Object(Z.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j("loading"),e.next=3,a();case 3:ec(n).then((function(e){t.current&&e.data&&o(e.data),t.current&&j(e.status)}),(function(e){}));case 4:case"end":return e.stop()}}),e)}))),[t,a,n]);Object(r.useEffect)((function(){b()}),[b]);var h=Object(r.useState)("asc"),p=Object(O.a)(h,2),x=p[0],f=p[1],m=Object(Oc.a)(i).sort((function(e,t){var a=e.dateAssigned,n=t.dateAssigned;return"desc"===x?a<n?-1:a>n?1:0:"asc"===x?a>n?-1:a<n?1:0:0}));return Object(V.jsx)(Ke,{children:Object(V.jsxs)(Zc,{children:[Object(V.jsx)(Nr,{order:x,setOrder:f}),"loading"===d?Object(V.jsx)(Ia.a,{variant:"rectangular",width:"100%",height:200}):Object(V.jsx)(Vr,{sortedStageHistory:m})]})})}var Mr=["children","value","index"];function Ir(e){var t=e.children,a=e.value,n=e.index,c=Object(Rc.a)(e,Mr);return Object(V.jsx)("div",Object(Le.a)(Object(Le.a)({role:"tabpanel",hidden:a!==n,id:"vehicle-tabpanel-".concat(n),"aria-labelledby":"vehicle-tab-".concat(n)},c),{},{children:a===n&&Object(V.jsx)("div",{children:t})}))}function Lr(e){return{id:"vehicle-tab-".concat(e),"aria-controls":"vehicle-tabpanel-".concat(e)}}function zr(e){var t=Object(i.g)(),a=de(),n=e.vehicleDetailState,c=n.vehicle,s=Object(i.i)().tab,o=Object(r.useState)(s),l=Object(O.a)(o,2),u=l[0],d=l[1];Object(r.useEffect)((function(){return d(s)}),[s]);return Object(V.jsxs)("div",{children:[Object(V.jsxs)(Uc.a,{centered:!0,value:u,indicatorColor:"primary",textColor:"primary",onChange:function(e,n){d(n);var r=a.get("prev")?window.location.href.replace(/.*(?=prev=)(prev=)/,""):"";t.push("/vehicle-details/id/".concat(null===c||void 0===c?void 0:c.id,"/").concat(n,"?prev=").concat(r))},"aria-label":"vehicle details navigation",children:[Object(V.jsx)(Gc,Object(Le.a)({label:"Stage",value:"stage"},Lr("stage"))),Object(V.jsx)(Gc,Object(Le.a)({label:"Info",value:"info"},Lr("info"))),Object(V.jsx)(Gc,Object(Le.a)({label:"Notes",value:"notes"},Lr("notes"))),Object(V.jsx)(Gc,Object(Le.a)({label:"History",value:"history"},Lr("history")))]}),Object(V.jsx)(Ir,{value:u,index:"stage",children:Object(V.jsx)(br,{vehicleDetailState:n})}),Object(V.jsx)(Ir,{value:u,index:"info",children:Object(V.jsx)(mr,{vehicleDetailState:n})}),Object(V.jsx)(Ir,{value:u,index:"notes",children:Object(V.jsx)(yr,{vehicleDetailState:n})}),Object(V.jsx)(Ir,{value:u,index:"history",children:c&&Object(V.jsx)(Br,{vehicleId:c.id})})]})}var Rr=Object(o.a)((function(e){return{buttonContainer:{width:"100%",textAlign:"right"},button:{marginTop:e.spacing(2),marginRight:e.spacing(2),marginBottom:e.spacing(1)}}}));function Ur(e){var t=de(),a=Object(i.g)(),n=Rr(),c=Pe().delay,r=e.disableDoneButton,s=e.mounted,o=e.vehicle,l=e.setUpdateVehicleStatus,u=Ee().userPreferences.defaultStageAssignment,d=function(){var e=Object(Z.a)(X.a.mark((function e(){var n,r;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.get("prev")?window.location.href.replace(/.*(?=prev=)(prev=)/,""):"",r=function(){n?a.push("".concat(n)):a.push("/all-vehicles/active/asc/10/first/0")},!o||"complete"!==o.currentStage.status||"sold"===o.status){e.next=9;break}return l("loading"),e.next=6,c();case 6:Qn({vehicleId:o.id,stage:u.stage,personPlace:u.personPlace,tasks:[],dateAssigned:Date.now()}).then((function(e){"success"===e.status&&r(),s.current&&"failed"===e.status&&l("failed")}),(function(e){s.current&&l("failed"),console.error(e)})),e.next=10;break;case 9:r();case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(V.jsx)("div",{className:n.buttonContainer,children:r?Object(V.jsx)(Ne.a,{disabled:!0,className:n.button,color:"primary",variant:"contained",children:"Done"}):Object(V.jsx)(Ne.a,{onClick:d,className:n.button,color:"primary",variant:"contained",children:"Done"})})}function Wr(e){var t=e.errorMessage,a=e.retryAction,n=t||"failed to load vehicle details";return Object(V.jsx)(Ue,{children:Object(V.jsxs)(qe,{children:[Object(V.jsx)(Je,{children:Object(V.jsx)(He,{variant:"h5",children:"Vehicle Details:"})}),Object(V.jsx)(Ae,{errorMessage:n,retryAction:a})]})})}function Gr(){return Object(V.jsxs)(ae,{style:{marginTop:10},children:[Object(V.jsx)(b.a,{children:"This vehicle has been moved to the "}),Object(V.jsx)(Ne.a,{children:Object(V.jsx)(s.b,{to:"/all-vehicles/trash/asc/10/first/0",children:"Trash List"})})]})}function Jr(){return Object(V.jsx)(Ue,{children:Object(V.jsxs)(qe,{children:[Object(V.jsxs)(Je,{children:[Object(V.jsx)(Ia.a,{}),Object(V.jsx)(Ia.a,{})]}),Object(V.jsx)(g.a,{}),Object(V.jsxs)(ae,{flexDirection:"column",sx:{height:300},children:[Object(V.jsx)(ee.a,{}),Object(V.jsx)(b.a,{children:"Updating vehicle..."})]})]})})}var Hr=Object(o.a)((function(e){return{vehicleTitle:{maxWidth:"80%"}}}));function Yr(){var e=Hr(),t=ue(),a=Pe().delay,n=Object(i.i)(),c=n.searchCriteria,s=n.searchValue,o=Object(r.useState)(null),l=Object(O.a)(o,2),u=l[0],d=l[1],j=Object(r.useState)("loading"),b=Object(O.a)(j,2),h=b[0],p=b[1],x=Object(r.useState)(""),f=Object(O.a)(x,2),m=f[0],v=f[1],S=Object(r.useState)(""),k=Object(O.a)(S,2),y=k[0],w=k[1],C=Object(r.useState)(!1),N=Object(O.a)(C,2),A=N[0],F=N[1],P={mounted:t,vehicle:u,setVehicle:d,getVehicleStatus:h,setGetVehicleStatus:p,updateVehicleStatus:y,setUpdateVehicleStatus:w,setDisableDoneButton:F},D=Object(r.useCallback)(Object(Z.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(""),p("loading"),e.next=4,a();case 4:Bt(c,s).then((function(e){t.current&&"success"===e.status&&!e.data&&v("No vehicles match ".concat(c,": ").concat(s)),t.current&&p(e.status),t.current&&d(e.data)}),(function(e){t.current&&p("failed"),console.error(e)}));case 5:case"end":return e.stop()}}),e)}))),[a,c,s,t]);return Object(r.useEffect)((function(){D()}),[D]),"loading"===h?Object(V.jsx)(Tc,{}):"loading"===y?Object(V.jsx)(Jr,{}):"failed"===h||""!==m?Object(V.jsx)(Wr,{errorMessage:m,retryAction:function(){return window.location.reload()}}):Object(V.jsx)(Ue,{children:Object(V.jsxs)(qe,{children:[Object(V.jsx)(Je,{children:Object(V.jsxs)(ae,{style:{position:"relative"},children:[Object(V.jsx)("div",{className:e.vehicleTitle,children:u&&Object(V.jsx)(Ja,{vehicle:u,variant:"h6"})}),Object(V.jsx)(te.a,{position:"absolute",right:0,children:P.vehicle&&Object(V.jsx)(zc,{vehicleDetailState:P,mounted:t})})]})}),Object(V.jsx)(g.a,{}),"failed"===y?Object(V.jsx)(Ae,{errorMessage:"Failed to update vehicle details"}):"trash"===(null===u||void 0===u?void 0:u.status)?Object(V.jsx)(Gr,{}):Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(zr,{vehicleDetailState:P}),Object(V.jsx)(Ur,{disableDoneButton:A,mounted:t,vehicle:u,setUpdateVehicleStatus:w})]})]})})}var qr=a(547),$r=a(517),Kr=Object(W.a)($r.a)({marginTop:5,marginBottom:5,border:".5pt solid #D0D0D0",width:"100%"}),Qr=a(546);function Xr(e){var t=e.vehiclePage,a=e.getVehicles,n=t.docStartNumber,c=t.docEndNumber,r=t.totalDocs,s=t.vehicles,i=[];s.forEach((function(e){return i.push(e.dateAdded)}));var o=Math.max.apply(Math,i),l=Math.min.apply(Math,i);return r>5?Object(V.jsxs)(ae,{children:[Object(V.jsx)(p.a,{"aria-label":"first-page",onClick:function(){a("first",0)},disabled:1===n,size:"large",children:Object(V.jsx)(pn.a,{})}),Object(V.jsx)(p.a,{"aria-label":"previous-page",onClick:function(){1!==n&&a("prev",l)},disabled:1===n,size:"large",children:Object(V.jsx)(On.a,{})}),Object(V.jsxs)(b.a,{align:"center",children:["(",n.toLocaleString(),"-",c.toLocaleString(),") / ",r.toLocaleString()]}),Object(V.jsx)(p.a,{"aria-label":"next-page",onClick:function(){c!==r&&a("next",o)},disabled:c===r,size:"large",children:Object(V.jsx)(un.a,{})}),Object(V.jsx)(p.a,{"aria-label":"last-page",onClick:function(){c!==r&&a("last",0)},disabled:c===r,size:"large",children:Object(V.jsx)(jn.a,{})})]}):Object(V.jsx)(V.Fragment,{})}var Zr=Object(o.a)((function(e){return{accordianDetails:{padding:e.spacing(2),paddingTop:0},vehicleList:{width:"100%"}}}));function _r(e){var t,a=Zr(),n=ue(),c=Pe().delay,s=e.stageId,i=Object(r.useState)({docStartNumber:0,docEndNumber:0,totalDocs:0,vehicles:[]}),o=Object(O.a)(i,2),l=o[0],u=o[1],d=Object(r.useState)("loading"),j=Object(O.a)(d,2),b=j[0],h=j[1],p=Object(r.useCallback)(function(){var e=Object(Z.a)(X.a.mark((function e(t,a){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h("loading"),e.next=3,c();case 3:Et("active","asc",5,t,a,"stageId=".concat(s)).then((function(e){n.current&&h(e.status),"success"===e.status&&n.current&&e.data&&u(e.data),"failed"===e.status&&console.error(e)}),(function(e){n.current&&h("failed"),console.error(e)}));case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),[c,n,s]);return Object(r.useEffect)((function(){p("first",0)}),[p]),t="failed"===b?Object(V.jsx)(Ae,{errorMessage:"Error loading vehicles..."}):"loading"===b?Object(V.jsx)(za,{skeletonCount:10}):Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(lt.a,{className:a.vehicleList,children:l.vehicles.map((function(e){return Object(V.jsx)(ts,{vehicle:e},e.id)}))}),Object(V.jsx)(Xr,{vehiclePage:l,getVehicles:p})]}),Object(V.jsx)(Qr.a,{className:a.accordianDetails,children:t})}var es=Object(o.a)((function(e){return{vehicle:{width:"100%"},vehicleDivider:{width:"98%"}}}));function ts(e){var t=es(),a=Object(i.g)(),n=e.vehicle;return Object(V.jsxs)("div",{className:t.vehicle,children:[Object(V.jsx)(g.a,{className:t.vehicleDivider}),Object(V.jsxs)(Wa,{onClick:function(){return e=n.id,void a.push("/vehicle-details/id/".concat(e,"/stage?prev=/stages"));var e},children:[Object(V.jsx)(Ja,{vehicle:n,listItem:!0}),Object(V.jsxs)(Ha,{children:[Object(V.jsx)(qa,{size:"small",label:function(e){var t=Date.now()-e;return Object(V.jsx)(Qa,{milliseconds:t})}(n.currentStage.dateAssigned)}),Object(V.jsx)(qa,{size:"small",label:n.currentStage.personPlace.name,color:"primary"})]})]}),Object(V.jsx)(g.a,{className:t.vehicleDivider})]},n.id)}var as=Object(o.a)((function(e){return{accordianDetails:{padding:e.spacing(2),paddingTop:0},vehicleList:{width:"100%"}}}));function ns(e){var t,a=as(),n=ue(),c=Pe().delay,s=e.personPlaceId,i=Object(r.useState)({docStartNumber:0,docEndNumber:0,totalDocs:0,vehicles:[]}),o=Object(O.a)(i,2),l=o[0],u=o[1],d=Object(r.useState)("loading"),j=Object(O.a)(d,2),b=j[0],h=j[1],p=Object(r.useCallback)(function(){var e=Object(Z.a)(X.a.mark((function e(t,a){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h("loading"),e.next=3,c();case 3:Et("active","asc",5,t,a,"personPlaceId=".concat(s)).then((function(e){n.current&&h(e.status),"success"===e.status&&n.current&&e.data&&u(e.data),"failed"===e.status&&console.error(e)}),(function(e){n.current&&h("failed"),console.error(e)}));case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),[c,n,s]);return Object(r.useEffect)((function(){p("first",0)}),[p]),t="failed"===b?Object(V.jsx)(Ae,{errorMessage:"Error loading vehicles..."}):"loading"===b?Object(V.jsx)(za,{skeletonCount:5}):Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(lt.a,{className:a.vehicleList,children:l.vehicles.map((function(e){return Object(V.jsx)(rs,{vehicle:e},e.id)}))}),Object(V.jsx)(Xr,{vehiclePage:l,getVehicles:p})]}),Object(V.jsx)(Qr.a,{className:a.accordianDetails,children:t})}var cs=Object(o.a)((function(e){return{vehicle:{width:"100%"},vehicleDivider:{width:"98%"}}}));function rs(e){var t=cs(),a=Object(i.g)(),n=e.vehicle;return Object(V.jsxs)("div",{className:t.vehicle,children:[Object(V.jsx)(g.a,{className:t.vehicleDivider}),Object(V.jsxs)(Wa,{onClick:function(){return e=n.id,void a.push("/vehicle-details/id/".concat(e,"/stage?prev=/people-places"));var e},children:[Object(V.jsx)(Ja,{vehicle:n,listItem:!0}),Object(V.jsxs)(Ha,{children:[Object(V.jsx)(qa,{size:"small",label:function(e){var t=Date.now()-e;return Object(V.jsx)(Qa,{milliseconds:t})}(n.currentStage.dateAssigned)}),Object(V.jsx)(qa,{size:"small",label:n.currentStage.stage.name,color:"primary"})]})]}),Object(V.jsx)(g.a,{className:t.vehicleDivider})]},n.id)}var ss=Object(o.a)((function(e){return{list:{margin:"auto",width:"clamp(290px, 100%, 500px)"},accordianDetails:{padding:0},vehicleList:{width:"100%"}}}));function is(e){var t=ss(),a=e.variant,n=e.accordianTitles,c=function(e,t){return"peoplePlaces"===a?"Small Town Auto Sales"!==t.name&&e>5?"secondary":"primary":"stages"===a?"For Sale"!==t.name&&e>5?"secondary":"primary":void 0};return Object(V.jsx)("div",{className:t.list,children:n.filter((function(e){return e.count})).map((function(e){return Object(V.jsx)("div",{children:Object(V.jsxs)(Kr,{children:[Object(V.jsx)(qr.a,{expandIcon:Object(V.jsx)(ht.a,{}),children:Object(V.jsxs)(b.a,{color:c(e.count,e),children:[e.name," (",e.count.toLocaleString(),")"]})}),"stages"===a?Object(V.jsx)(_r,{stageId:e.id}):Object(V.jsx)(ns,{personPlaceId:e.id})]})},e.id)}))})}function os(){var e,t=ue(),a=Pe().delay,n=Object(r.useState)([]),c=Object(O.a)(n,2),s=c[0],i=c[1],o=Object(r.useState)("loading"),l=Object(O.a)(o,2),u=l[0],d=l[1],j=Object(r.useCallback)(Object(Z.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d("loading"),e.next=3,a();case 3:Ln().then((function(e){t.current&&d(e.status),t.current&&"success"===e.status&&e.data&&i(e.data),"failed"===e.status&&console.error(e)}),(function(e){t.current&&d("failed"),console.error(e)}));case 4:case"end":return e.stop()}}),e)}))),[a,t]);return Object(r.useEffect)((function(){j()}),[j]),e="failed"===u?Object(V.jsx)(Ae,{errorMessage:"Error loading People/Places view....",retryAction:function(){return window.location.reload()}}):"loading"===u?Object(V.jsx)(za,{skeletonCount:10}):Object(V.jsx)(is,{variant:"peoplePlaces",accordianTitles:s}),Object(V.jsx)(Ue,{children:Object(V.jsxs)(qe,{children:[Object(V.jsxs)(Je,{children:[Object(V.jsx)(Ye,{icon:Object(V.jsx)(w.a,{color:"primary"}),variant:"h5",children:"People/Places"}),Object(V.jsx)(g.a,{})]}),Object(V.jsx)("br",{}),e]})})}var ls=a(258),us=a.n(ls),ds=a(149),js=a(257),bs=a.n(js),Os=Object(o.a)((function(e){return{updateButtons:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",marginTop:10},updateButton:{width:100}}}));function hs(e){var t=Os(),a=Pe().delay,n=e.mounted,c=e.setReorderStages,r=e.originalStageOrder,s=e.editStageOrder,i=e.setEditStageOrder,o=e.setOrderStagesStatus,l=e.getStageVehicleCounts,u=function(){var e=Object(Z.a)(X.a.mark((function e(){var t;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],s.forEach((function(e,a){e!==r[a]&&t.push({id:e.id,order:a})})),o("loading"),e.next=5,a();case 5:ac(t).then((function(e){n&&o(e.status),n&&"failed"===e.status&&console.error(e),"success"===e.status&&l(),n&&c(!1)}),(function(e){n&&o("failed"),console.error(e)}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(V.jsxs)(wa.a,{className:t.updateButtons,children:[Object(V.jsx)(Ne.a,{className:t.updateButton,onClick:function(){c(!1),i(r)},children:"cancel"}),function(e,t){for(var a=0;a<e.length;++a)if(e[a]!==t[a])return!1;return!0}(r,s)?Object(V.jsx)(Ne.a,{disabled:!0,className:t.updateButton,children:"update"}):Object(V.jsx)(Ne.a,{className:t.updateButton,onClick:u,color:"primary",children:"update"})]})}var ps=Object(o.a)((function(e){return{stage:{marginTop:5,marginBottom:5,border:"1pt solid #999999"},list:{backgroundColor:"#F9F9F9",padding:e.spacing(1)}}}));function xs(e){var t=ue(),a=ps(),n=Pe().delay,c=e.setReorderStages,s=e.getStageVehicleCounts,i=Object(r.useState)([]),o=Object(O.a)(i,2),l=o[0],u=o[1],d=Object(r.useState)([]),j=Object(O.a)(d,2),h=j[0],p=j[1],x=Object(r.useState)(""),f=Object(O.a)(x,2),m=f[0],g=f[1],v=Object(r.useState)(""),S=Object(O.a)(v,2),k=S[0],y=S[1],w=Object(r.useCallback)(Object(Z.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g("loading"),e.next=3,n();case 3:Rn().then((function(e){t.current&&g(e.status),"success"===e.status&&t.current&&e.data&&(u(e.data),p(e.data)),"failed"===e.status&&console.error(e)}),(function(e){t.current&&g("failed"),console.error(e)}));case 4:case"end":return e.stop()}}),e)}))),[n,t]);Object(r.useEffect)((function(){w()}),[w]);var C=Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)($r.a,{disabled:!0,className:a.stage,children:Object(V.jsx)(qr.a,{children:Object(V.jsx)(b.a,{children:"Assign"})})}),Object(V.jsx)(ds.a,{onDragEnd:function(e){var t=Object(Oc.a)(h),a=t.splice(e.source.index,1),n=Object(O.a)(a,1)[0];e.destination&&t.splice(e.destination.index,0,n),p(t)},children:Object(V.jsx)(ds.c,{droppableId:"stages",children:function(e){return Object(V.jsxs)(lt.a,Object(Le.a)(Object(Le.a)({className:a.list},e.droppableProps),{},{ref:e.innerRef,children:[h.map((function(e,t){return"Assign"!==e.name&&"For Sale"!==e.name?Object(V.jsx)(ds.b,{draggableId:e.id,index:t,children:function(t){return Object(V.jsx)($r.a,Object(Le.a)(Object(Le.a)(Object(Le.a)({className:a.stage,ref:t.innerRef},t.draggableProps),t.dragHandleProps),{},{children:Object(V.jsx)(qr.a,{expandIcon:Object(V.jsx)(bs.a,{}),children:Object(V.jsx)(b.a,{children:e.name})})}))}},e.id):Object(V.jsx)("span",{},e.id)})),e.placeholder]}))}})}),Object(V.jsx)($r.a,{disabled:!0,className:a.stage,children:Object(V.jsx)(qr.a,{children:Object(V.jsx)(b.a,{children:"For Sale"})})}),Object(V.jsx)(hs,{mounted:t,setReorderStages:c,originalStageOrder:l,editStageOrder:h,setEditStageOrder:p,setOrderStagesStatus:y,getStageVehicleCounts:s})]});switch(m){case"failed":return Object(V.jsx)(Ae,{errorMessage:"Error loading Edit Stage Order"});case"loading":return Object(V.jsx)(za,{skeletonCount:10});default:switch(k){case"failed":return Object(V.jsx)(Ae,{errorMessage:"Error saving Edited Stage Order"});case"loading":return Object(V.jsx)(za,{skeletonCount:10});default:return C}}}function fs(){var e=ue(),t=Pe().delay,a=Object(r.useState)([]),n=Object(O.a)(a,2),c=n[0],s=n[1],i=Object(r.useState)("loading"),o=Object(O.a)(i,2),l=o[0],u=o[1],d=Object(r.useCallback)(Object(Z.a)(X.a.mark((function a(){return X.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return u("loading"),a.next=3,t();case 3:Mn().then((function(t){e.current&&u(t.status),e.current&&"success"===t.status&&t.data&&s(t.data),"failed"===t.status&&console.error(t)}),(function(t){e.current&&u("failed"),console.error(t)}));case 4:case"end":return a.stop()}}),a)}))),[t,e]);Object(r.useEffect)((function(){d()}),[d]);var j,b=Object(r.useState)(!1),h=Object(O.a)(b,2),p=h[0],x=h[1];return j="failed"===l?Object(V.jsx)(Ae,{errorMessage:"Error loading Stages view...",retryAction:function(){return window.location.reload()}}):"loading"===l?Object(V.jsx)(za,{skeletonCount:10}):p?Object(V.jsx)(xs,{setReorderStages:x,getStageVehicleCounts:d}):Object(V.jsx)(is,{variant:"stages",accordianTitles:c}),Object(V.jsx)(Ue,{children:Object(V.jsxs)(qe,{children:[Object(V.jsxs)(Je,{children:[Object(V.jsx)(Ye,{icon:Object(V.jsx)(w.a,{color:"primary"}),variant:"h5",children:"Stages"}),Object(V.jsx)(g.a,{})]}),Object(V.jsx)(se,{children:Object(V.jsx)(Ne.a,{startIcon:Object(V.jsx)(us.a,{}),onClick:function(){x(!p)},children:"reorder"})}),j]})})}var ms=a(58);function gs(e){return e<6e4?"".concat(Math.round(e/1e3)," secs"):e<36e5?"".concat(Math.round(e/6e4)," mins"):e<864e5?"".concat(Math.round(e/36e5)," hrs"):"".concat(Math.round(e/864e5*10)/10," days")}var vs=Object(o.a)({donutChart:{height:"100%",width:"100%"}});function Ss(e){var t=vs(),a=e.data,n=e.total,c=e.totalLabel,s=Object(r.useRef)(null);return Object(r.useLayoutEffect)((function(){var e=ms.e().domain(a.map((function(e){return e.name}))).range(ms.f),t=ms.c().padAngle(.005).sort(null).value((function(e){return e.value})),r=t(a),i=500,o=r.filter((function(e){return e.endAngle-e.startAngle<=.25})),l=30*o.length+0+10,u=430+l,d=function(){return ms.a().innerRadius(140).outerRadius(200)},j=function(t){return e(t.data.name)},b=function(e){return e.split(" ").join("")};ms.g("#donut-chart").remove();var O=ms.g(s.current).append("svg").attr("id","donut-chart").attr("viewBox","0, 0, ".concat(i,", ").concat(u)),h=O.append("defs").append("filter").attr("id","drop-shadow").attr("height","150%").attr("width","150%");h.append("feGaussianBlur").attr("in","SourceAlpha").attr("stdDeviation",2).attr("result","blur"),h.append("feOffset").attr("in","blur").attr("dx",3).attr("dy",3).attr("result","offsetBlur");var p=h.append("feMerge");p.append("feMergeNode").attr("in","offsetBlur"),p.append("feMergeNode").attr("in","SourceGraphic");var x=l+20-u/2;O.append("svg").attr("viewBox","".concat(-250,", ").concat(x,", ").concat(i," ,").concat(400)).selectAll("path").data(t([{name:"",value:1}])).join("path").attr("fill","white").attr("d",d()).style("filter","url(#drop-shadow)");var f=O.append("svg").attr("viewBox","".concat(-250,", ").concat(x,", ").concat(i," ,").concat(400));f.selectAll("path").data(r).join("path").attr("fill",j).attr("d",d()).append("title").text((function(e){return"".concat(e.data.name,": ").concat(gs(e.data.value))})),f.append("g").attr("id","labelG").attr("font-size",14).attr("text-anchor","middle").selectAll("text").data(r).join("text").attr("id",(function(e){return b(e.data.name)})).attr("transform",(function(e){return"translate(".concat(d().centroid(e),")")})).style("fill","white").call((function(e){return e.filter((function(e){return e.endAngle-e.startAngle>.25})).append("tspan").attr("y","-0.4em").text((function(e){return e.data.name}))})).call((function(e){return e.filter((function(e){return e.endAngle-e.startAngle>.25})).append("tspan").attr("x",0).attr("y","0.7em").text((function(e){return"".concat(gs(e.data.value))}))}));f.insert("g","#labelG").selectAll("rect").data(r).join("rect").attr("x",(function(e){var t,a=null===(t=document.querySelector("#".concat(b(e.data.name))))||void 0===t?void 0:t.getBoundingClientRect().width,n=a&&a+10;return n&&-n/2})).attr("y",(function(e){var t,a=null===(t=document.querySelector("#".concat(b(e.data.name))))||void 0===t?void 0:t.getBoundingClientRect().height,n=a&&a+10;return n&&-n/2})).attr("width",(function(e){var t,a=null===(t=document.querySelector("#".concat(b(e.data.name))))||void 0===t?void 0:t.getBoundingClientRect().width;return a&&a+10})).attr("height",(function(e){var t,a=null===(t=document.querySelector("#".concat(b(e.data.name))))||void 0===t?void 0:t.getBoundingClientRect().height;return a&&a+10})).attr("fill","black").attr("fill-opacity",.5).attr("rx",5).attr("transform",(function(e){return"translate(".concat(d().centroid(e),")")}));var m=f.append("g").append("text").attr("text-anchor","middle");m.append("tspan").text(n?"".concat(gs(n)):"N/A").attr("font-size",48),m.append("tspan").text(c).attr("y",30).attr("x",0);var g=O.append("g");g.selectAll("rect").data(o).join("rect").attr("height",20).attr("width",20).attr("fill",j).attr("stroke","black").attr("stroke-width",.5).attr("x",25).attr("y",(function(e,t){return 430+30*t})).style("filter","url(#drop-shadow)"),g.selectAll("text").data(o).join("text").attr("text-anchor","start").attr("font-size",14).attr("x",55).attr("y",(function(e,t){return 430+30*t+15})).text((function(e){return"".concat(e.data.name," / ").concat(gs(e.data.value))}))}),[a,n,c]),Object(V.jsx)(Re.a,{ref:s,className:t.donutChart})}var ks=Object(o.a)({chip:{minWidth:95}});function ys(e){var t=ks(),a=e.turnStatistics,n=a.count,c=a.average,r=a.median,s=a.mode;return Object(V.jsx)(cr.a,{component:Re.a,children:Object(V.jsxs)(tr.a,{"aria-label":"overview stats table",children:[Object(V.jsx)(Ar.a,{children:Object(V.jsxs)(rr.a,{children:[Object(V.jsx)(nr.a,{children:"Overview"}),Object(V.jsx)(nr.a,{align:"center",children:"Average"}),Object(V.jsx)(nr.a,{align:"center",children:"Median"}),Object(V.jsx)(nr.a,{align:"center",children:"Mode (days)"})]})}),Object(V.jsxs)(ar.a,{children:[Object(V.jsxs)(rr.a,{children:[Object(V.jsxs)(nr.a,{component:"th",scope:"row",align:"left",children:["Become For Sale (",n.getForSale,"):"]}),Object(V.jsx)(nr.a,{align:"center",children:Object(V.jsx)(qa,{className:t.chip,color:"primary",label:Object(V.jsx)(Qa,{milliseconds:c.getForSale})})}),Object(V.jsx)(nr.a,{align:"center",children:Object(V.jsx)(qa,{className:t.chip,color:"primary",label:Object(V.jsx)(Qa,{milliseconds:r.getForSale})})}),Object(V.jsx)(nr.a,{align:"center",children:Object(V.jsx)(qa,{className:t.chip,color:"primary",label:"".concat(s.getForSale," / ").concat(s.getForSalePercent,"%")})})]}),Object(V.jsxs)(rr.a,{children:[Object(V.jsxs)(nr.a,{component:"th",scope:"row",align:"left",children:["To Be Sold (",n.getSold,"):"]}),Object(V.jsx)(nr.a,{align:"center",children:Object(V.jsx)(Xa,{className:t.chip,label:Object(V.jsx)(Qa,{milliseconds:c.getSold})})}),Object(V.jsx)(nr.a,{align:"center",children:Object(V.jsx)(Xa,{className:t.chip,label:Object(V.jsx)(Qa,{milliseconds:r.getSold})})}),Object(V.jsx)(nr.a,{align:"center",children:Object(V.jsx)(Xa,{className:t.chip,label:"".concat(s.getSold," / ").concat(s.getSoldPercent,"%")})})]}),Object(V.jsxs)(rr.a,{children:[Object(V.jsxs)(nr.a,{component:"th",scope:"row",align:"left",children:["Total Turn Time (",n.total,"):"]}),Object(V.jsx)(nr.a,{align:"center",children:Object(V.jsx)(qa,{className:t.chip,label:Object(V.jsx)(Qa,{milliseconds:c.total})})}),Object(V.jsx)(nr.a,{align:"center",children:Object(V.jsx)(qa,{className:t.chip,label:Object(V.jsx)(Qa,{milliseconds:r.total})})}),Object(V.jsx)(nr.a,{align:"center",children:Object(V.jsx)(qa,{className:t.chip,label:"".concat(s.total," / ").concat(s.totalPercent,"%")})})]})]})]})})}var ws=Object(o.a)((function(e){return{button:{marginTop:e.spacing(2)}}}));function Cs(e){var t=ws(),a=e.children,n=Object(r.useState)(!1),c=Object(O.a)(n,2),s=c[0],i=c[1];return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(Ne.a,{startIcon:s?Object(V.jsx)(Vn.a,{}):Object(V.jsx)(N.a,{}),onClick:function(){s&&i(!1),!s&&i(!0)},size:"large",className:t.button,children:"Details"}),Object(V.jsx)(Ze.a,{in:s,timeout:"auto",style:{width:"100%"},children:a})]})}function Ns(e){var t=e.turnStatistics,a=e.getTurnStatsStatus,n=null===t||void 0===t?void 0:t.count,c=null===t||void 0===t?void 0:t.average,r=null===t||void 0===t?void 0:t.median,s=null===t||void 0===t?void 0:t.mode,i=c?[{name:"Recondition Time",value:c.getForSale},{name:"To Get Sold",value:c.getSold}]:[];return"loading"===a?Object(V.jsx)(Re.a,{children:Object(V.jsx)(ae,{flexDirection:"column",sx:{height:500},children:Object(V.jsx)(Ia.a,{variant:"rectangular",height:"90%",width:"90%",style:{margin:"auto"}})})}):"failed"===a?Object(V.jsx)(Ae,{errorMessage:"Failed to load statistics...",retryAction:function(){return window.location.reload()}}):Object(V.jsx)(V.Fragment,{children:t&&n&&c&&r&&s?Object(V.jsxs)(ae,{flexDirection:"column",children:[Object(V.jsx)(Ss,{data:i,total:c.total,totalLabel:"avg total time to be sold"}),Object(V.jsx)(Cs,{children:Object(V.jsx)(ys,{turnStatistics:t})})]}):Object(V.jsx)(V.Fragment,{})})}var As=Object(o.a)({dialog:{padding:10}});function Fs(e){var t=As(),a=e.onClose,n=e.selectedValue,c=e.open;return Object(V.jsx)(ut.a,{onClose:function(){a()},open:c,children:Object(V.jsx)(Re.a,{className:t.dialog,children:Object(V.jsx)(b.a,{variant:"subtitle1",children:n})})})}var Ps=Object(o.a)({list:{width:"100%"},accordionDetails:{padding:0},shortData:{minWidth:50,textAlign:"left"},longData:{minWidth:50},personPlaceLabel:{width:"clamp(150px, 50vw, 200px)",whiteSpace:"nowrap"},subLabel:{maxWidth:175,maxHeight:20,overflowWrap:"break-word",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",cursor:"pointer",marginRight:4},timeDifferenceLabel:{fontSize:10},tableContainer:{width:"100%"},table:{minWidth:450}});function Ds(e){var t=Ps(),a=e.statistics,n=Object(r.useState)(!1),c=Object(O.a)(n,2),s=c[0],i=c[1],o=Object(r.useState)(""),l=Object(O.a)(o,2),u=l[0],d=l[1];return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(lt.a,{className:t.list,children:a.map((function(e){return Object(V.jsx)("div",{children:Object(V.jsxs)(Kr,{children:[Object(V.jsx)(qr.a,{expandIcon:Object(V.jsx)(ht.a,{}),children:Object(V.jsxs)(b.a,{children:[e.name," (",e.count,")"]})}),Object(V.jsx)(Qr.a,{className:t.accordionDetails,children:Object(V.jsx)(cr.a,{className:t.tableContainer,component:Re.a,children:Object(V.jsxs)(tr.a,{className:t.table,size:"small","aria-label":"stage statistics table",children:[Object(V.jsx)(Ar.a,{children:Object(V.jsxs)(rr.a,{children:[Object(V.jsx)(nr.a,{children:"Person/Place"}),Object(V.jsx)(nr.a,{children:"Avg"}),Object(V.jsx)(nr.a,{children:"Median"}),Object(V.jsxs)(nr.a,{children:["Mode  ",Object(V.jsx)("span",{className:t.timeDifferenceLabel,children:"(days)"})]})]})}),Object(V.jsxs)(ar.a,{children:[Object(V.jsxs)(rr.a,{children:[Object(V.jsxs)(nr.a,{component:"th",scope:"row",children:["All (",e.count,")"]}),Object(V.jsx)(nr.a,{children:Object(V.jsx)("div",{className:t.shortData,children:Object(V.jsx)(Qa,{milliseconds:e.average})})}),Object(V.jsx)(nr.a,{children:Object(V.jsx)("div",{className:t.shortData,children:Object(V.jsx)(Qa,{milliseconds:e.median})})}),Object(V.jsx)(nr.a,{children:Object(V.jsxs)("div",{className:t.longData,children:[e.mode," / ",e.modePercent,"%"]})})]}),e.portions.map((function(e){return Object(V.jsxs)(rr.a,{children:[Object(V.jsx)(nr.a,{component:"th",scope:"row",onClick:function(){return t=e.name,i(!0),void d(t);var t},children:Object(V.jsx)("div",{className:t.personPlaceLabel,children:Object(V.jsxs)(re,{whiteSpace:"nowrap",children:[Object(V.jsxs)("div",{className:t.subLabel,children:[e.name," "]}),Object(V.jsxs)("div",{children:[" (",e.count,")"]})]})})}),Object(V.jsx)(nr.a,{children:Object(V.jsx)("div",{className:t.shortData,children:Object(V.jsx)(Qa,{milliseconds:e.average})})}),Object(V.jsx)(nr.a,{children:Object(V.jsx)("div",{className:t.shortData,children:Object(V.jsx)(Qa,{milliseconds:e.median})})}),Object(V.jsx)(nr.a,{children:Object(V.jsxs)("div",{className:t.longData,children:[e.mode," / ",e.modePercent,"%"]})})]},e.name)}))]})]})})})]})},e.name)}))}),Object(V.jsx)(Fs,{selectedValue:u,open:s,onClose:function(){i(!1),d("")}})]})}var Ts="http://localhost:7000/api/statistics";function Es(){return Vs.apply(this,arguments)}function Vs(){return(Vs=Object(Z.a)(X.a.mark((function e(){var t,a;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(Ts+"/vehicle-turn-statistics");case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bs(){return Ms.apply(this,arguments)}function Ms(){return(Ms=Object(Z.a)(X.a.mark((function e(){var t,a;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(Ts+"/stages-statistics");case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Is(){return Ls.apply(this,arguments)}function Ls(){return(Ls=Object(Z.a)(X.a.mark((function e(){var t,a;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(Ts+"/people-places-statistics");case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zs(e){var t=ue(),a=e.forSaleAvg,n=Pe().delay,c=Object(r.useState)("loading"),s=Object(O.a)(c,2),i=s[0],o=s[1],l=Object(r.useState)(null),u=Object(O.a)(l,2),d=u[0],j=u[1],b=Object(r.useState)(null),h=Object(O.a)(b,2),p=h[0],x=h[1],f=Object(r.useCallback)(Object(Z.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o("loading"),e.next=3,n();case 3:Bs().then((function(e){t.current&&o(e.status),"success"===e.status&&t.current&&e.data&&(j(e.data.avgOverview.filter((function(e){return"For Sale"!==e.name}))),x(e.data.details)),"failed"===e.status&&console.error(e)}),(function(e){t.current&&o("failed"),console.error(e)}));case 4:case"end":return e.stop()}}),e)}))),[n,t]);return Object(r.useEffect)((function(){f()}),[f]),"loading"===i?Object(V.jsx)(Re.a,{children:Object(V.jsx)(ae,{flexDirection:"column",sx:{height:500},children:Object(V.jsx)(Ia.a,{variant:"rectangular",height:"90%",width:"90%",style:{margin:"auto"}})})}):"failed"===i?Object(V.jsx)(Ae,{errorMessage:"Failed to load statistics...",retryAction:function(){return window.location.reload()}}):Object(V.jsx)(V.Fragment,{children:d&&p?Object(V.jsxs)(ae,{flexDirection:"column",children:[Object(V.jsx)(Ss,{data:d,total:a,totalLabel:'avg time to get "For Sale"'}),Object(V.jsx)(Cs,{children:Object(V.jsx)(Ds,{statistics:p})})]}):Object(V.jsx)(V.Fragment,{})})}var Rs=Object(o.a)({chart:{height:"100%",width:"100%"}});function Us(e){var t=Rs(),a=e.data,n=Object(r.useRef)(null);return Object(r.useLayoutEffect)((function(){var e=50*a.length+20,t=Object(Oc.a)(a).sort((function(e,t){return t.value-e.value})),c=ms.d().domain([0,ms.b(a.map((function(e){return e.value})))]).range([0,385]);ms.g("#bar-chart").remove();var r=ms.g(n.current).append("svg").attr("id","bar-chart").attr("viewBox","0, 0, ".concat(500,", ").concat(e)),s=r.append("defs").append("filter").attr("id","drop-shadow").attr("height","150%").attr("width","150%");s.append("feGaussianBlur").attr("in","SourceAlpha").attr("stdDeviation",2).attr("result","blur"),s.append("feOffset").attr("in","blur").attr("dx",3).attr("dy",3).attr("result","offsetBlur");var i=s.append("feMerge");i.append("feMergeNode").attr("in","offsetBlur"),i.append("feMergeNode").attr("in","SourceGraphic"),r.selectAll("rect").data(t).join("rect").attr("fill",(function(e){return e.avgPercentile>=90?"#9500ae":e.avgPercentile>=80?"#d500f9":e.avgPercentile>=60?"#dd33fa":e.avgPercentile>=40?"#757de8":e.avgPercentile>=20?"#3f51b5":"#002984"})).attr("x",20).attr("y",(function(e,t){return 50*t+30})).attr("height",20).attr("width",(function(e){return c(e.value)})).attr("stroke","black").attr("stroke-width",.25).attr("rx",5).style("filter","url(#drop-shadow)"),r.append("g").attr("font-size",14).selectAll("text").data(t).join("text").attr("transform",(function(e,t){return"translate(".concat(20,", ").concat(50*t+27,")")})).call((function(e){return e.append("tspan").text((function(e){return e.name})).attr("font-family","roboto").attr("font-size",16).attr("y",-3)})).call((function(e){return e.append("tspan").attr("x",(function(e){return c(e.value)+15})).attr("y",20).attr("font-style","normal").text((function(e){return"(".concat(gs(e.value),")")}))}))}),[a]),Object(V.jsx)(Re.a,{ref:n,className:t.chart})}function Ws(){var e=ue(),t=Pe().delay,a=Object(r.useState)("loading"),n=Object(O.a)(a,2),c=n[0],s=n[1],i=Object(r.useState)(null),o=Object(O.a)(i,2),l=o[0],u=o[1],d=Object(r.useState)(null),j=Object(O.a)(d,2),b=j[0],h=j[1],p=Object(r.useCallback)(Object(Z.a)(X.a.mark((function a(){return X.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return s("loading"),a.next=3,t();case 3:Is().then((function(t){e.current&&s(t.status),"success"===t.status&&e.current&&t.data&&(u(t.data.avgOverview.filter((function(e){return"For Sale"!==e.name}))),h(t.data.details)),"failed"===t.status&&console.error(t)}),(function(t){e.current&&s("failed"),console.error(t)}));case 4:case"end":return a.stop()}}),a)}))),[t,e]);return Object(r.useEffect)((function(){p()}),[p]),"loading"===c?Object(V.jsx)(Re.a,{children:Object(V.jsx)(ae,{flexDirection:"column",sx:{height:500},children:Object(V.jsx)(Ia.a,{variant:"rectangular",height:"90%",width:"90%",style:{margin:"auto"}})})}):"failed"===c?Object(V.jsx)(Ae,{errorMessage:"Failed to load statistics...",retryAction:function(){return window.location.reload()}}):Object(V.jsx)(V.Fragment,{children:l&&b?Object(V.jsxs)(ae,{flexDirection:"column",children:[Object(V.jsx)(Us,{data:l}),Object(V.jsx)(Cs,{children:Object(V.jsx)(Ds,{statistics:b})})]}):Object(V.jsx)(V.Fragment,{})})}var Gs=["children","value","index"];function Js(e){var t=e.children,a=e.value,n=e.index,c=Object(Rc.a)(e,Gs);return Object(V.jsx)("div",Object(Le.a)(Object(Le.a)({role:"tabpanel",hidden:a!==n,id:"analytics-tabpanel-".concat(n),"aria-labelledby":"analytics-tab-".concat(n)},c),{},{children:a===n&&Object(V.jsx)("div",{children:t})}))}function Hs(e){return{id:"analytics-tab-".concat(e),"aria-controls":"analytics-tabpanel-".concat(e)}}function Ys(e){var t=Object(i.g)(),a=e.turnStatistics,n=e.getTurnStatsStatus,c=Object(i.i)().tab,s=Object(r.useState)(c),o=Object(O.a)(s,2),l=o[0],u=o[1];Object(r.useEffect)((function(){return u(c)}),[c]);return Object(V.jsxs)("div",{children:[Object(V.jsxs)(Uc.a,{centered:!0,value:l,indicatorColor:"primary",textColor:"primary",onChange:function(e,a){u(a),t.push("/analytics/".concat(a))},"aria-label":"vehicle details navigation",children:[Object(V.jsx)(Gc,Object(Le.a)({label:"Overview",value:"overview"},Hs("overview"))),Object(V.jsx)(Gc,Object(Le.a)({label:"Stages",value:"stages"},Hs("stages"))),Object(V.jsx)(Gc,Object(Le.a)({label:"People/Places",value:"peoplePlaces"},Hs("peoplePlaces")))]}),Object(V.jsx)(Js,{value:l,index:"overview",children:Object(V.jsx)(Ns,{turnStatistics:a,getTurnStatsStatus:n})}),Object(V.jsx)(Js,{value:l,index:"stages",children:Object(V.jsx)(zs,{forSaleAvg:a?a.average.getForSale:0})}),Object(V.jsx)(Js,{value:l,index:"peoplePlaces",children:Object(V.jsx)(Ws,{})})]})}function qs(){var e=ue(),t=Pe().delay,a=Object(r.useState)(null),n=Object(O.a)(a,2),c=n[0],s=n[1],i=Object(r.useState)(""),o=Object(O.a)(i,2),l=o[0],u=o[1],d=Object(r.useCallback)(Object(Z.a)(X.a.mark((function a(){return X.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return u("loading"),a.next=3,t();case 3:Es().then((function(t){e.current&&u(t.status),"success"===t.status&&e.current&&t.data&&s(t.data),"failed"===t.status&&console.error(t)}),(function(t){e.current&&u("failed"),console.error(t)}));case 4:case"end":return a.stop()}}),a)}))),[t,e]);return Object(r.useEffect)((function(){d()}),[d]),Object(V.jsx)(Ue,{children:Object(V.jsxs)(qe,{children:[Object(V.jsx)(Je,{children:Object(V.jsx)(Ye,{icon:Object(V.jsx)(F.a,{color:"primary"}),variant:"h5",children:"Analytics"})}),Object(V.jsx)(g.a,{}),Object(V.jsx)(Ys,{turnStatistics:c,getTurnStatsStatus:l})]})})}var $s=a(548),Ks=a(148),Qs=a.n(Ks);function Xs(e){var t=e.demoState,a=t.clearDatabase,n=t.addVehicleDescriptors,c=t.addStages,r=t.generateVehicles,s=Object(V.jsxs)(v.a,{children:[Object(V.jsx)(S.a,{children:Object(V.jsx)(en.a,{color:"secondary"})}),Object(V.jsx)(k.a,{primary:"Clear Database"})]}),i=Object(V.jsxs)(v.a,{children:[Object(V.jsx)(S.a,{children:Object(V.jsx)(Qs.a,{color:"primary"})}),Object(V.jsx)(k.a,{primary:"Add Vehicle Descriptors"})]}),o=Object(V.jsxs)(v.a,{children:[Object(V.jsx)(S.a,{children:Object(V.jsx)(Qs.a,{color:"primary"})}),Object(V.jsx)(k.a,{primary:"Add Stages and People/Places"})]}),l=Object(V.jsxs)(v.a,{children:[Object(V.jsx)(S.a,{children:Object(V.jsx)(Qs.a,{color:"primary"})}),Object(V.jsx)(k.a,{primary:"Generate Demo Vehicles"})]});return Object(V.jsxs)(lt.a,{id:"demo-dialog-description",children:[a&&s,n&&i,c&&o,r&&l]})}function Zs(e){var t=Ee().getUserPreferences,a=e.demoState,n=e.open,c=e.setOpen,r=a.mounted,s=a.setLoading,i=a.clearDatabase,o=a.setClearDatabaseStatus,l=a.addVehicleDescriptors,u=a.setAddVehicleDescriptorsStatus,d=a.addStages,j=a.setAddStagesStatus,b=a.generateVehicles,O=a.setGenerateVehiclesStatus,h=a.vehiclesAmount,p=a.months,x=function(){var e=Object(Z.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i){e.next=4;break}return e.abrupt("return");case 4:return o("loading"),e.next=7,xe().then((function(e){r.current&&o(e.status),"failed"===e.status&&console.error(e)}),(function(e){r.current&&o("failed"),console.error(e)}));case 7:return e.abrupt("return");case 8:case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=Object(Z.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l){e.next=4;break}return e.abrupt("return");case 4:return u("loading"),e.next=7,me().then((function(e){r.current&&u(e.status),"failed"===e.status&&console.error(e)}),(function(e){r.current&&u("failed"),console.error(e)}));case 7:case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(Z.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d){e.next=4;break}return e.abrupt("return");case 4:return j("loading"),e.next=7,ve().then((function(e){r.current&&j(e.status),"failed"===e.status&&console.error(e)}),(function(e){r.current&&j("failed"),console.error(e)}));case 7:case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(Z.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b){e.next=4;break}return e.abrupt("return");case 4:return O("loading"),e.next=7,ke(h,p).then((function(e){r.current&&O(e.status),"failed"===e.status&&console.error(e)}),(function(e){r.current&&O("failed"),console.error(e)}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(Z.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),e.next=3,x();case 3:return e.next=5,Promise.all([f(),m()]);case 5:return e.next=7,g();case 7:s(!1),t();case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(V.jsxs)(ut.a,{open:n,"aria-labelledby":"demo-dialog-title","aria-describedby":"demo-dialog-description",children:[Object(V.jsxs)(ka.a,{id:"demo-dialog-title",children:["Continue with the following ",Object(V.jsx)("strong",{children:"PERMANENT"})," action(s)?"]}),Object(V.jsx)(dt.a,{children:Object(V.jsx)(Xs,{demoState:a})}),Object(V.jsxs)(ya.a,{children:[Object(V.jsx)(Ne.a,{color:"primary",onClick:function(){return c(!1)},children:"go back"}),Object(V.jsx)(Ne.a,{color:"primary",onClick:v,children:"continue"})]})]})}function _s(e){var t=e.demoState,a=Object(r.useState)(!1),n=Object(O.a)(a,2),c=n[0],s=n[1],i=t.loading,o=t.clearDatabase,l=t.addVehicleDescriptors,u=t.addStages,d=t.generateVehicles,j=t.vehiclesAmountError,b=t.monthsError;return Object(r.useEffect)((function(){i&&s(!1)}),[i]),Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(Ne.a,{color:"primary",variant:"outlined",onClick:function(){return s(!0)},disabled:!o&&!l&&!u&&!d||""!==j||""!==b,children:"continue"}),Object(V.jsx)(Zs,{demoState:t,open:c,setOpen:s})]})}function ei(e){var t=e.generateVehicles,a=e.vehiclesAmountInput,n=e.setVehiclesAmountInput,c=e.vehiclesAmountError,r=e.setVehiclesAmountError,s=e.setVehiclesAmount,i=e.months,o=e.setMonths,l=e.monthsError,u=e.setMonthsError;return Object(V.jsx)(Ze.a,{in:t,children:Object(V.jsxs)(ae,{flexDirection:"column",children:[Object(V.jsx)(z.a,{size:"small",margin:"normal",id:"vehicle-amount",label:"Amount of Vehicles to Add",variant:"outlined",value:a,onChange:function(e){var t=e.target.value.trim().replace(/[^0-9]/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",");n(t);var a=t.replace(",","");s(a);/^\d+$/.test(a)?parseInt(a)>1e4?r("Vehicle Amount must be less than 10,000"):r(""):r("Vehice Amount must be a whole number")},error:!!c,helperText:c}),Object(V.jsx)(z.a,{size:"small",margin:"normal",id:"months",label:"Amount of Months to Go Back",variant:"outlined",value:i,onChange:function(e){var t=e.target.value.trim().replace(/[^0-9]/g,"");o(t);/^\d+$/.test(t)?parseInt(t)>36?u("Months must be less than or equal to 36"):u(""):u("Months must be a whole number")},error:!!l,helperText:l})]})})}var ti=Object(Ra.a)(ie)((function(e){e.theme;return{height:200}}));function ai(e){var t=e.loading,a=e.clearDatabaseStatus,n=e.addVehicleDescriptorsStatus,c=e.addStagesStatus,r=e.generateVehiclesStatus;return Object(V.jsx)(ut.a,{open:t,fullWidth:!0,children:Object(V.jsxs)(ti,{flexDirection:"column",children:[Object(V.jsx)(ee.a,{}),Object(V.jsxs)(ae,{flexDirection:"column",sx:{textAlign:"center"},children:["loading"===a&&Object(V.jsx)(b.a,{children:"...Clearing Database"}),"loading"===n&&Object(V.jsx)(b.a,{children:"...Adding Vehicle Descriptors"}),"loading"===c&&Object(V.jsx)(b.a,{children:"...Adding Stages/People/Places"}),"loading"===r&&Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(b.a,{children:"...Generating Vehicles"}),Object(V.jsx)(b.a,{children:"(this could take several minutes)"})]})]})]})})}var ni=Object(o.a)((function(e){return{formControl:{padding:e.spacing(3),marginTop:e.spacing(1),marginBottom:e.spacing(3)}}}));function ci(){var e=ni(),t=ue(),a=Object(i.g)(),n=Object(r.useState)(!1),c=Object(O.a)(n,2),s=c[0],o=c[1],l=Object(r.useState)(!1),u=Object(O.a)(l,2),d=u[0],j=u[1],b=Object(r.useState)(!1),h=Object(O.a)(b,2),p=h[0],x=h[1],f=Object(r.useState)(""),m=Object(O.a)(f,2),g=m[0],v=m[1],S=Object(r.useState)(!1),k=Object(O.a)(S,2),y=k[0],w=k[1],C=Object(r.useState)(""),N=Object(O.a)(C,2),A=N[0],F=N[1],P=Object(r.useState)(!1),D=Object(O.a)(P,2),T=D[0],E=D[1],B=Object(r.useState)(""),M=Object(O.a)(B,2),I=M[0],L=M[1],z=Object(r.useState)(!1),R=Object(O.a)(z,2),U=R[0],W=R[1],G=Object(r.useState)(""),J=Object(O.a)(G,2),H=J[0],Y=J[1],q=Object(r.useState)("300"),$=Object(O.a)(q,2),K=$[0],Q=$[1],X=Object(r.useState)(""),Z=Object(O.a)(X,2),_=Z[0],ee=Z[1],te=Object(r.useState)("300"),ne=Object(O.a)(te,2),ce=ne[0],re=ne[1],se=Object(r.useState)("12"),ie=Object(O.a)(se,2),oe=ie[0],le=ie[1],de=Object(r.useState)(""),je=Object(O.a)(de,2),be=je[0],Oe=je[1],he={mounted:t,loading:s,setLoading:o,error:d,setError:j,clearDatabase:p,setClearDatabase:x,clearDatabaseStatus:g,setClearDatabaseStatus:v,addVehicleDescriptors:y,setAddVehicleDescriptors:w,addVehicleDescriptorsStatus:A,setAddVehicleDescriptorsStatus:F,addStages:T,setAddStages:E,addStagesStatus:I,setAddStagesStatus:L,generateVehicles:U,setGenerateVehicles:W,generateVehiclesStatus:H,setGenerateVehiclesStatus:Y,vehiclesAmount:ce,vehiclesAmountError:_,months:oe,monthsError:be};return Object(r.useEffect)((function(){U?(x(!0),w(!0),E(!0)):(y||T)&&x(!0)}),[U,y,T]),Object(r.useEffect)((function(){if(!s){var e=[{check:p,status:g},{check:y,status:A},{check:I,status:I},{check:U,status:H}];if(e.find((function(e){return""!==e.status})))void 0===e.map((function(e){return!0!==e.check||"success"===e.status})).find((function(e){return!e}))?(x(!1),v(""),w(!1),F(""),E(!1),L(""),W(!1),Y(""),a.push("/all-vehicles/active/asc/10/first/0")):j(!0)}}),[s,p,g,y,A,T,I,U,H,a]),d?Object(V.jsx)(Ae,{errorMessage:"An error occured in 1 or more demo actions...."}):Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(ai,{loading:s,clearDatabaseStatus:g,addVehicleDescriptorsStatus:A,addStagesStatus:I,generateVehiclesStatus:H}),Object(V.jsxs)(ae,{flexDirection:"column",children:[Object(V.jsxs)(wa.a,{component:Re.a,className:e.formControl,children:[Object(V.jsx)($s.a,{children:Object(V.jsx)(Ta.a,{control:Object(V.jsx)(Ea.a,{disabled:y||T||U,checked:p,onChange:function(){return x(!p)}}),label:"Clear Database"})}),Object(V.jsx)($s.a,{children:Object(V.jsx)(Ta.a,{control:Object(V.jsx)(Ea.a,{color:"primary",disabled:U,checked:y,onChange:function(){return w(!y)}}),label:"Add Vehicle Descriptors"})}),Object(V.jsx)($s.a,{children:Object(V.jsx)(Ta.a,{control:Object(V.jsx)(Ea.a,{color:"primary",disabled:U,checked:T,onChange:function(){return E(!T)}}),label:"Add Stages and People/Places"})}),Object(V.jsxs)($s.a,{children:[Object(V.jsx)(Ta.a,{control:Object(V.jsx)(Ea.a,{color:"primary",checked:U,onChange:function(){return W(!U)}}),label:"Generate Demo Vehicles"}),Object(V.jsx)(ei,{generateVehicles:U,vehiclesAmountInput:K,setVehiclesAmountInput:Q,vehiclesAmountError:_,setVehiclesAmountError:ee,setVehiclesAmount:re,months:oe,setMonths:le,monthsError:be,setMonthsError:Oe})]})]}),Object(V.jsx)(_s,{demoState:he})]})]})}function ri(){return Object(V.jsx)(Ue,{children:Object(V.jsxs)(qe,{children:[Object(V.jsxs)(Je,{children:[Object(V.jsx)(Ye,{icon:Object(V.jsx)(D.a,{color:"primary"}),variant:"h5",children:"Demo Actions"}),Object(V.jsx)(g.a,{})]}),Object(V.jsx)(ci,{})]})})}var si=a(509),ii=Object(Ra.a)(z.a,{shouldForwardProp:function(e){return"variant"!==e},name:"LoadingDelayField",slot:"Root",overridesResolver:function(e,t){return[t.root,"outlined"===e.variant&&t.outlined]}})((function(e){return{width:"150px",marginLeft:e.theme.spacing(2),"&.MuiTextField-root":{textAlign:"center"}}})),oi=Object(Ra.a)(se)((function(e){return{margin:e.theme.spacing(2)}}));function li(){var e=Pe(),t=e.loadingTime,a=e.saveLoadingTime,n=e.db,c=e.saveDb,s=Object(r.useState)(t.toLocaleString("en-US")),i=Object(O.a)(s,2),o=i[0],l=i[1],u=Object(r.useState)(t),d=Object(O.a)(u,2),j=d[0],h=d[1],p=Object(r.useState)(""),x=Object(O.a)(p,2),f=x[0],m=x[1],g=Object(r.useState)(n),v=Object(O.a)(g,2),S=v[0],k=v[1];return Object(r.useEffect)((function(){var e=t.toLocaleString("en-US");l(e)}),[t]),Object(V.jsx)(Ue,{children:Object(V.jsxs)(qe,{children:[Object(V.jsx)(Je,{children:Object(V.jsx)(Ye,{icon:Object(V.jsx)(E.a,{color:"primary"}),variant:"h5",children:"Demo Settings"})}),Object(V.jsxs)(Ke,{children:[Object(V.jsxs)(ne,{children:[Object(V.jsx)(b.a,{children:"Simulated Loading Delay (milliseconds):"}),Object(V.jsx)(ii,{value:o,onChange:function(e){var t=e.target.value.trim().replace(/[^0-9]/g,"");if(parseInt(t)>1e4)m("cannot exceed 10 seconds");else{m(""),h(t?parseInt(t):0);var a=t.replace(/^0+(?!$)/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",");l(a)}},onBlur:function(){j>1e4?(l("0"),m("cannot exceed 10 seconds")):m("")},size:"small",inputProps:{sx:{textAlign:"right"}},error:!!f,helperText:f})]}),Object(V.jsx)(oi,{children:Object(V.jsx)(Ne.a,{disabled:t===j,onClick:function(){return a(j)},children:"Save"})}),Object(V.jsxs)(ne,{children:[Object(V.jsx)(b.a,{children:"Database:"}),Object(V.jsx)(wa.a,{children:Object(V.jsxs)(si.a,{value:S||"",onChange:function(e){k(e.target.value)},sx:{width:"150px"},size:"small",children:[Object(V.jsx)(K.a,{value:"mongodb",children:"MongoDB"}),Object(V.jsx)(K.a,{value:"mysql",children:"MySQL"})]})})]}),Object(V.jsx)(oi,{children:Object(V.jsx)(Ne.a,{disabled:n===S,onClick:function(){return c(S)},children:"Save"})})]})]})})}var ui=Object(o.a)((function(e){return{app:{fontFamily:"Roboto",backgroundColor:"#404040",minHeight:"100vh",minWidth:"100vw",position:"absolute",left:"0",top:"0"}}}));function di(){var e=ui(),t=Ee().currentUser;return Object(V.jsx)("div",{className:e.app,children:Object(V.jsxs)(s.a,{children:[t&&Object(V.jsx)(Ie,{}),Object(V.jsxs)(i.d,{children:[Object(V.jsx)(i.b,{exact:!0,path:"/",children:Object(V.jsx)(i.a,{to:"/all-vehicles/active/asc/10/first/0"})}),Object(V.jsx)(i.b,{path:"/log-in",component:Xe}),Object(V.jsx)(ze,{path:"/all-vehicles/:statusParam/:sortParam/:perPageParam/:pageParam/:compareParam",component:Nn}),Object(V.jsx)(ze,{path:"/add-vehicle",component:Dc}),Object(V.jsx)(ze,{path:"/vehicle-details/:searchCriteria/:searchValue/:tab",component:Yr}),Object(V.jsx)(ze,{path:"/people-places",component:os}),Object(V.jsx)(ze,{path:"/stages",component:fs}),Object(V.jsx)(ze,{path:"/analytics/:tab",component:qs}),Object(V.jsx)(ze,{path:"/demo-actions",component:ri}),Object(V.jsx)(ze,{path:"/demo-settings",component:li})]})]})})}a(423);var ji=a(501),bi=a(502),Oi=a(549),hi=a(259),pi=Object(hi.a)({mainMenu:{width:"250px"},titleColor:{lightBlue:"#aab6fe",darkBlue:"#49599a"}});function xi(e){return Object(V.jsx)(ji.a,{children:Object(V.jsx)(bi.a,{injectFirst:!0,children:Object(V.jsx)(Oi.a,{theme:pi,children:Object(V.jsx)(De,{children:Object(V.jsx)(Ve,{children:e.children})})})})})}c.a.render(Object(V.jsx)(xi,{children:Object(V.jsx)(di,{})}),document.getElementById("root"))}},[[424,1,2]]]);
//# sourceMappingURL=main.a885578e.chunk.js.map