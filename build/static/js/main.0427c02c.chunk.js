(this["webpackJsonpautoapp-ts"]=this["webpackJsonpautoapp-ts"]||[]).push([[0],{413:function(e,t,a){},424:function(e,t,a){"use strict";a.r(t);var n=a(55),c=a.n(n),r=(a(413),a(1)),s=a(18),i=a(28),l=a(505),o=a(4),u=a(494),d=a(521),j=a(522),b=a(118),O=a(3),h=a(510),x=a(530),p=a(238),f=a.n(p),m=a(514),g=a(490),v=a(511),S=a(491),k=a(492),y=a(45),w=a.n(y),C=a(34),N=a.n(C),A=a(109),P=a.n(A),F=a(110),D=a.n(F),T=a(111),E=a.n(T),V=a(132),B=a.n(V),M=a(235),I=a.n(M),L=a(508),z=a(524),R=a(117),W=a(8),U=a(0),G=Object(W.a)(z.a)((function(e){return{color:e.theme.titleColor.lightBlue,opacity:"50%"}})),J=Object(l.a)((function(e){return{search:{paddingLeft:e.spacing(.5),display:"flex",position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(R.a)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(R.a)(e.palette.common.white,.25)}},inputRoot:{color:"inherit"}}}));function H(e){var t=e.setOpenMenu,a=J(),n=Object(i.g)(),c=Object(i.h)(),s=/^[0-9]{5}$/,l=Object(r.useState)(""),o=Object(O.a)(l,2),u=o[0],d=o[1],j=Object(r.useState)(""),b=Object(O.a)(j,2),h=b[0],x=b[1];return Object(U.jsx)(L.a,{className:a.search,size:"small",placeholder:"Stk#",error:!!h,helperText:h,inputProps:{"aria-label":"search"},InputProps:{startAdornment:Object(U.jsx)(G,{position:"start",children:Object(U.jsx)(I.a,{color:"inherit"})}),classes:{root:a.inputRoot}},value:u,onChange:function(e){d(e.target.value)},onKeyDown:function(e){var a=c.pathname;"Enter"===e.key?""!==u&&(s.test(u)?(t(!1),n.push("/vehicle-details/stock/".concat(u,"/stage?prev=").concat(a)),d("")):x("must be 5 digits")):x("")}})}var Y=Object(l.a)((function(e){return{title:{flexGrow:1,fontFamily:"Lobster",color:e.titleColor.darkBlue},menuItems:{width:e.mainMenu.width},link:{textDecoration:"none",color:"black"},menuButton:Object(o.a)({marginRight:e.spacing(2)},e.breakpoints.up("lg"),{display:"none"})}}));function q(e){var t=e.window,a=Y(),n=Object(i.h)(),c=Object(r.useState)(!1),l=Object(O.a)(c,2),o=l[0],u=l[1],d=void 0!==t?function(){return t().document.body}:void 0,j=Object(r.useState)("/all-vehicles"),b=Object(O.a)(j,2),p=b[0],y=b[1];Object(r.useEffect)((function(){var e=n.pathname.match(/(\/[\w-]+)/);y(e?e[1]:"")}),[n,y]);var C=Object(U.jsxs)("div",{className:a.menuItems,role:"presentation",children:[Object(U.jsx)(v.a,{sx:{marginTop:1},secondaryAction:Object(U.jsx)(x.a,{edge:"end","aria-label":"close menu",onClick:function(){return u(!1)},children:Object(U.jsx)(B.a,{})})}),Object(U.jsx)(v.a,{children:Object(U.jsx)(H,{setOpenMenu:u})}),Object(U.jsx)(g.a,{}),Object(U.jsx)(s.b,{className:a.link,to:"/all-vehicles/active/asc/10/first/0",onClick:function(){return u(!1)},children:Object(U.jsxs)(v.a,{button:!0,children:[Object(U.jsx)(S.a,{children:Object(U.jsx)(w.a,{})}),Object(U.jsx)(k.a,{children:"All Vehicles"})]})}),Object(U.jsx)(s.b,{className:a.link,to:"/add-vehicle",onClick:function(){return u(!1)},children:Object(U.jsxs)(v.a,{button:!0,children:[Object(U.jsx)(S.a,{children:Object(U.jsx)(N.a,{})}),Object(U.jsx)(k.a,{children:"Add Vehicle"})]})}),Object(U.jsx)(g.a,{}),Object(U.jsx)(s.b,{className:a.link,to:"/stages",onClick:function(){return u(!1)},children:Object(U.jsxs)(v.a,{button:!0,children:[Object(U.jsx)(S.a,{children:Object(U.jsx)(w.a,{})}),Object(U.jsx)(k.a,{children:"Stages"})]})}),Object(U.jsx)(s.b,{className:a.link,to:"/people-places",onClick:function(){return u(!1)},children:Object(U.jsxs)(v.a,{button:!0,children:[Object(U.jsx)(S.a,{children:Object(U.jsx)(w.a,{})}),Object(U.jsx)(k.a,{children:"People/Places"})]})}),Object(U.jsx)(g.a,{}),Object(U.jsx)(s.b,{className:a.link,to:"/analytics/overview",onClick:function(){return u(!1)},children:Object(U.jsxs)(v.a,{button:!0,children:[Object(U.jsx)(S.a,{children:Object(U.jsx)(P.a,{})}),Object(U.jsx)(k.a,{children:"Analytics"})]})}),Object(U.jsx)(g.a,{}),Object(U.jsx)(s.b,{className:a.link,to:"/demo-actions",onClick:function(){return u(!1)},children:Object(U.jsxs)(v.a,{button:!0,children:[Object(U.jsx)(S.a,{children:Object(U.jsx)(D.a,{})}),Object(U.jsx)(k.a,{children:"Demo Actions"})]})}),Object(U.jsx)(s.b,{className:a.link,to:"/demo-settings",onClick:function(){return u(!1)},children:Object(U.jsxs)(v.a,{button:!0,children:[Object(U.jsx)(S.a,{children:Object(U.jsx)(E.a,{})}),Object(U.jsx)(k.a,{children:"Demo Settings"})]})}),Object(U.jsx)(g.a,{})]}),A=Object(U.jsxs)("div",{className:a.menuItems,role:"presentation",children:[Object(U.jsx)(v.a,{children:Object(U.jsx)(H,{setOpenMenu:u})}),Object(U.jsx)(g.a,{}),Object(U.jsx)(s.b,{className:a.link,to:"/all-vehicles/active/asc/10/first/0",children:Object(U.jsxs)(v.a,{button:!0,selected:"/all-vehicles"===p,children:[Object(U.jsx)(S.a,{children:Object(U.jsx)(w.a,{})}),Object(U.jsx)(k.a,{children:"All Vehicles"})]})}),Object(U.jsx)(s.b,{className:a.link,to:"/add-vehicle",children:Object(U.jsxs)(v.a,{button:!0,selected:"/add-vehicle"===p,children:[Object(U.jsx)(S.a,{children:Object(U.jsx)(N.a,{})}),Object(U.jsx)(k.a,{children:"Add Vehicle"})]})}),Object(U.jsx)(g.a,{}),Object(U.jsx)(s.b,{className:a.link,to:"/stages",children:Object(U.jsxs)(v.a,{button:!0,selected:"/stages"===p,children:[Object(U.jsx)(S.a,{children:Object(U.jsx)(w.a,{})}),Object(U.jsx)(k.a,{children:"Stages"})]})}),Object(U.jsx)(s.b,{className:a.link,to:"/people-places",children:Object(U.jsxs)(v.a,{button:!0,selected:"/people-places"===p,children:[Object(U.jsx)(S.a,{children:Object(U.jsx)(w.a,{})}),Object(U.jsx)(k.a,{children:"People/Places"})]})}),Object(U.jsx)(g.a,{}),Object(U.jsx)(s.b,{className:a.link,to:"/analytics/overview",children:Object(U.jsxs)(v.a,{button:!0,selected:"/analytics"===p,children:[Object(U.jsx)(S.a,{children:Object(U.jsx)(P.a,{})}),Object(U.jsx)(k.a,{children:"Analytics"})]})}),Object(U.jsx)(g.a,{}),Object(U.jsx)(s.b,{className:a.link,to:"/demo-actions",children:Object(U.jsxs)(v.a,{button:!0,selected:"/demo-actions"===p,children:[Object(U.jsx)(S.a,{children:Object(U.jsx)(D.a,{})}),Object(U.jsx)(k.a,{children:"Demo Actions"})]})}),Object(U.jsx)(s.b,{className:a.link,to:"/demo-settings",children:Object(U.jsxs)(v.a,{button:!0,selected:"/demo-settings"===p,children:[Object(U.jsx)(S.a,{children:Object(U.jsx)(E.a,{})}),Object(U.jsx)(k.a,{children:"Demo Settings"})]})}),Object(U.jsx)(g.a,{})]});return Object(U.jsxs)(U.Fragment,{children:[!o&&Object(U.jsx)(x.a,{edge:"start",className:a.menuButton,color:"inherit","aria-label":"menu",onClick:function(){return u(!0)},size:"large",children:Object(U.jsx)(f.a,{})}),Object(U.jsxs)("nav",{children:[Object(U.jsx)(h.a,{lgUp:!0,implementation:"css",children:Object(U.jsx)(m.a,{container:d,anchor:"left",open:o,children:C})}),Object(U.jsx)(h.a,{lgDown:!0,implementation:"css",children:Object(U.jsx)(m.a,{variant:"permanent",open:!0,children:A})})]})]})}var $=a(240),K=a.n($),Q=a(260),X=a(532),Z=a(6),_=a.n(Z),ee=a(13),te=a(518),ae=a(531),ne=a(519),ce=Object(W.a)(ne.a)({display:"flex",p:1,justifyContent:"center",alignItems:"center"}),re=Object(W.a)(ne.a)({display:"flex",p:1,justifyContent:"space-between",alignItems:"center"}),se=Object(W.a)(ne.a)({display:"flex",p:1,justifyContent:"space-evenly",alignItems:"center"}),ie=Object(W.a)(ne.a)({display:"flex",p:1,justifyContent:"start",alignItems:"center"}),le=Object(W.a)(ne.a)({display:"flex",p:1,justifyContent:"flex-end",alignItems:"center"}),oe=Object(W.a)(ne.a)({display:"flex",p:1,justifyContent:"space-around",alignItems:"center"}),ue=Object(l.a)({flexCenter:{position:"fixed",top:0,left:0,height:"100vh",width:"100vw",backgroundColor:"black",opacity:.5,zIndex:100}});function de(){var e=ue();return Object(U.jsx)(ce,{className:e.flexCenter,children:Object(U.jsx)(ae.a,{})})}function je(){var e=Object(r.useRef)(!0);return Object(r.useEffect)((function(){return e.current=!0,function(){e.current=!1}})),e}function be(){return new URLSearchParams(Object(i.h)().search)}function Oe(){return Object(i.i)()}var he="http://localhost:7000/api/demo";function xe(){return(xe=Object(ee.a)(_.a.mark((function e(t){var a,n,c,r;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={dbSelection:t},n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)},e.next=4,fetch("http://localhost:7001/api/demo/select-db",n);case 4:return c=e.sent,e.next=7,c.json();case 7:return r=e.sent,e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pe(){return fe.apply(this,arguments)}function fe(){return(fe=Object(ee.a)(_.a.mark((function e(){var t,a;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(he+"/get-defaults");case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function me(){return ge.apply(this,arguments)}function ge(){return(ge=Object(ee.a)(_.a.mark((function e(){var t,a,n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"DELETE",headers:{"Content-Type":"application/json"}},e.next=3,fetch(he+"/clear-database",t);case 3:return a=e.sent,e.next=6,a.json();case 6:return n=e.sent,e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ve(){return Se.apply(this,arguments)}function Se(){return(Se=Object(ee.a)(_.a.mark((function e(){var t,a,n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"POST",headers:{"Content-Type":"application/json"}},e.next=3,fetch(he+"/add-vehicle-descriptors",t);case 3:return a=e.sent,e.next=6,a.json();case 6:return n=e.sent,e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ke(){return ye.apply(this,arguments)}function ye(){return(ye=Object(ee.a)(_.a.mark((function e(){var t,a,n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"POST",headers:{"Content-Type":"application/json"}},e.next=3,fetch(he+"/add-stages",t);case 3:return a=e.sent,e.next=6,a.json();case 6:return n=e.sent,e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function we(e,t){return Ce.apply(this,arguments)}function Ce(){return(Ce=Object(ee.a)(_.a.mark((function e(t,a){var n,c,r;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"POST",headers:{"Content-Type":"application/json"}},e.next=3,fetch(he+"/generate-vehicles/".concat(t,"/").concat(a),n);case 3:return c=e.sent,e.next=6,c.json();case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ne=a(239),Ae=a.n(Ne),Pe=a(520);function Fe(e){var t=e.errorMessage,a=e.retryAction;return Object(U.jsxs)(ce,{flexDirection:"column",children:[Object(U.jsx)(Ae.a,{}),Object(U.jsx)("p",{children:t}),Object(U.jsx)(g.a,{}),a&&Object(U.jsx)(Pe.a,{onClick:a,children:"Retry"})]})}var De=Object(r.createContext)({});function Te(){return Object(r.useContext)(De)}function Ee(e){var t=Object(te.a)(["demoLoadingTime","demoDb"]),a=Object(O.a)(t,2),n=a[0],c=a[1],s=Object(r.useState)(!1),i=Object(O.a)(s,2),l=i[0],o=i[1],u=Object(r.useState)(0),d=Object(O.a)(u,2),j=d[0],b=d[1],h=Object(r.useState)(!1),x=Object(O.a)(h,2),p=x[0],f=x[1],m=Object(r.useState)(null),g=Object(O.a)(m,2),v=g[0],S=g[1],k=Object(r.useState)(!1),y=Object(O.a)(k,2),w=y[0],C=y[1],N=Object(r.useCallback)((function(e){c("demoDb",e,{path:"/"})}),[c]);function A(){return(A=Object(ee.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return setTimeout(e,j)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(r.useEffect)((function(){n.demoLoadingTime?b(parseInt(n.demoLoadingTime)):b(500),n.demoDb?S(n.demoDb):N("mongodb")}),[n.demoLoadingTime,n.demoDb,N]);var P=Object(r.useCallback)((function(e){f(!1),o(!0),function(e){return xe.apply(this,arguments)}(e).then((function(){f(!0),o(!1)}),(function(e){console.error(e),C(!0),f(!1),o(!1)}))}),[]);Object(r.useEffect)((function(){v&&P(v)}),[P,v]);var F={loadingTime:j,setLoadingTime:b,db:v,setDb:S,dbReady:p,delay:function(){return A.apply(this,arguments)},saveLoadingTime:function(e){c("demoLoadingTime",e,{path:"/"})},saveDb:N,selectDatabase:P};return Object(U.jsx)(De.Provider,{value:F,children:l?Object(U.jsx)(de,{}):w?Object(U.jsx)(Fe,{errorMessage:"Failed to connect to server. Ensure that 'Selection Server' is listening on localhost:7001 and refresh"}):e.children})}var Ve=Object(r.createContext)({});function Be(){return null===Ve&&console.error("AuthContext is null, make sure to only use AuthContext within an AuthProvider"),Object(r.useContext)(Ve)}function Me(e){var t=je(),a=Te(),n=a.dbReady,c=a.delay,s=e.children,i=Object(te.a)(["user","demoDb","demoLoadingTime"]),l=Object(O.a)(i,3),o=l[0],u=l[1],d=l[2],j=Object(r.useState)(o.user),b=Object(O.a)(j,2),h=b[0],x=b[1],p=Object(r.useState)(!0),f=Object(O.a)(p,2),m=f[0],g=f[1];function v(){return(v=Object(ee.a)(_.a.mark((function e(a){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.current&&g(!0),e.next=3,c();case 3:u("user",a,{path:"/"}),t.current&&g(!1);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){return(S=Object(ee.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.current&&g(!0),e.next=3,c();case 3:d("user",{path:"/"}),d("demoDb",{path:"/"}),d("demoLoadingTime",{path:"/"}),t.current&&g(!1);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var k=Object(r.useState)({defaultStageAssignment:{stage:{id:"",name:""},personPlace:{id:"",name:""}}}),y=Object(O.a)(k,2),w=y[0],C=y[1],N=Object(r.useCallback)(Object(ee.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.current&&g(!0),pe().then((function(e){t.current&&g(!1),t.current&&"success"===e.status&&e.data&&C(e.data)}),(function(e){t.current&&g(!1),t.current&&console.error(e)}));case 2:case"end":return e.stop()}}),e)}))),[t]);Object(r.useEffect)((function(){n&&N()}),[N,n]),Object(r.useEffect)((function(){x(o.user)}),[o.user]);var A={currentUser:h,loading:m,logIn:function(e){return v.apply(this,arguments)},logOut:function(){return S.apply(this,arguments)},userPreferences:w,setUserPreferences:C,getUserPreferences:N};return Object(U.jsx)(Ve.Provider,{value:A,children:m?Object(U.jsx)(de,{}):s})}function Ie(){var e=Be(),t=e.currentUser,a=e.logOut,n=Object(r.useState)(null),c=Object(O.a)(n,2),s=c[0],i=c[1],l=Boolean(s);return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(x.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){i(e.currentTarget)},color:"inherit",size:"large",children:Object(U.jsx)(K.a,{})}),Object(U.jsxs)(Q.a,{id:"menu-appbar",anchorEl:s,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:l,onClose:function(){i(null)},children:[Object(U.jsx)(X.a,{disabled:!0,children:t}),Object(U.jsx)(X.a,{onClick:a,children:"LOG OUT"})]})]})}var Le=Object(l.a)((function(e){return{root:{position:"relative",color:e.titleColor.lightBlue,margin:e.spacing(7.5),left:"0",top:"0",zIndex:100},title:{flexGrow:1,fontFamily:"Lobster"},link:{textDecoration:"none",color:e.titleColor.lightBlue},appBar:Object(o.a)({backgroundColor:"#101010"},e.breakpoints.up("lg"),{width:"calc(100% - ".concat(e.mainMenu.width,")")})}}));function ze(){var e=Le();return Object(U.jsxs)("div",{className:e.root,children:[Object(U.jsx)(u.a,{}),Object(U.jsx)(d.a,{className:e.appBar,color:"transparent",position:"fixed",children:Object(U.jsxs)(j.a,{children:[Object(U.jsx)(q,{}),Object(U.jsx)(b.a,{variant:"h6",component:"h1",className:e.title,children:Object(U.jsx)(s.b,{className:e.link,to:"/",children:"Auto Inventory Flow"})}),Object(U.jsx)(Ie,{})]})})]})}var Re=a(17);function We(e){var t=Be().currentUser,a=e.component,n=Object(U.jsx)("div",{});return t?n=Object(U.jsx)(a,{}):t||(n=Object(U.jsx)(i.a,{to:"/log-in"})),Object(U.jsx)(i.b,Object(Re.a)(Object(Re.a)({},e.exact),{},{path:e.path,children:n}))}var Ue=a(262),Ge=Object(W.a)(ne.a)((function(e){return{width:"clamp(300px, 98vw, 750px)",margin:"auto",paddingBottom:e.theme.spacing(5),backgroundColor:"white"}})),Je=Object(W.a)(ne.a)((function(e){return{width:"clamp(300px, 98vw, 500px)",margin:"auto",paddingBottom:e.theme.spacing(2),backgroundColor:"white"}})),He=Object(W.a)(ne.a)((function(e){return{width:"clamp(200px, 50vw, 300px)",margin:"auto",paddingBottom:e.theme.spacing(2),backgroundColor:"white"}})),Ye=Object(W.a)("div")((function(e){return{padding:e.theme.spacing(1),width:"100%",textAlign:"center"}})),qe=Object(W.a)(b.a)((function(e){return{color:e.theme.titleColor.darkBlue}}));function $e(e){return Object(U.jsxs)(ce,{style:{gap:10},children:[e.icon,Object(U.jsx)(qe,{variant:e.variant,children:e.children})]})}var Ke=Object(W.a)(ne.a)({width:"clamp(300px, 98vw, 600px)",padding:10,margin:"0px auto 0px auto",backgroundColor:"white"}),Qe=Object(W.a)(ne.a)({width:"clamp(300px, 98vw, 450px)",padding:10,margin:"auto",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"}),Xe=Object(W.a)(Ue.a)((function(e){var t=e.theme;return{padding:t.spacing(2),margin:t.spacing(1)}})),Ze=Object(l.a)((function(e){return{outerFlex:{height:"80vh",width:"100vw",position:"fixed",x:0,y:0},card:{padding:e.spacing(3)},nameField:{marginTop:0,margin:e.spacing(2)},title:{fontFamily:"Lobster"}}}));function _e(){var e=Ze(),t=Be(),a=t.currentUser,n=t.logIn,c=Object(r.useState)(""),s=Object(O.a)(c,2),l=s[0],o=s[1];return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(ce,{className:e.outerFlex,children:Object(U.jsxs)(He,{className:e.card,children:[Object(U.jsxs)(Ye,{children:[Object(U.jsx)(ce,{children:Object(U.jsx)(qe,{className:e.title,variant:"h5",children:"Auto Inventory Flow"})}),Object(U.jsx)(g.a,{})]}),Object(U.jsxs)(ce,{flexDirection:"column",children:[Object(U.jsx)(L.a,{id:"user-name",label:"Name",variant:"outlined",size:"small",className:e.nameField,onChange:function(e){o(e.target.value)},value:l,autoComplete:"off"}),Object(U.jsx)(Pe.a,{onClick:function(){return n(l)},color:"primary",variant:"contained",disabled:!(l.length>0),children:"Log In"})]})]})}),a&&Object(U.jsx)(i.a,{to:"/"})]})}var et=a(523),tt=a(241),at=a.n(tt),nt=Object(l.a)((function(e){return{trash:{color:e.palette.secondary.main},sold:{color:e.palette.success.main},active:{color:e.palette.primary.main}}}));function ct(e){var t,a=nt(),n=Object(i.g)(),c=Oe(),s=c.statusParam,l=c.sortParam,o=c.perPageParam,u=Object(r.useState)(null),d=Object(O.a)(u,2),j=d[0],b=d[1],h=function(e){b(null),n.push("/all-vehicles/".concat(e,"/").concat(l,"/").concat(o,"/first/0"))};return t="trash"===s?Object(U.jsx)("span",{className:a.trash,children:"TRASH"}):"sold"===s?Object(U.jsx)("span",{className:a.sold,children:"SOLD"}):Object(U.jsx)("span",{className:a.active,children:"ACTIVE"}),Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(Pe.a,{size:"small",startIcon:Object(U.jsx)(at.a,{}),"aria-controls":"filter-menu","aria-haspopup":"true",onClick:function(e){b(e.currentTarget)},children:t}),Object(U.jsxs)(Q.a,{id:"filter-menu",anchorEl:j,keepMounted:!0,open:Boolean(j),onClose:function(){return h(s)},children:[Object(U.jsx)(X.a,{onClick:function(){return h("active")},children:"Active"}),Object(U.jsx)(X.a,{onClick:function(){return h("sold")},children:"Sold"}),Object(U.jsx)(X.a,{onClick:function(){return h("trash")},children:"Trash"})]})]})}var rt=a(134),st=a.n(rt);function it(e){var t=Object(i.g)(),a=e.sort,n=e.setSort,c=Oe(),r=c.statusParam,s=c.perPageParam,l=be().toString();return Object(U.jsx)(Pe.a,{size:"small",startIcon:Object(U.jsx)(st.a,{}),"aria-controls":"sort-menu","aria-haspopup":"true",onClick:function(){var e;n(e="asc"===a?"desc":"asc"),t.push("/all-vehicles/".concat(r,"/").concat(e,"/").concat(s,"/first/0?").concat(l))},children:"asc"===a?"oldest":"recent"})}var lt=a(533),ot=Object(l.a)({addButton:{position:"absolute",right:5,top:5}});function ut(){var e=ot();return Object(U.jsx)(ne.a,{className:e.addButton,children:Object(U.jsx)(s.b,{to:"/add-vehicle",children:Object(U.jsx)(lt.a,{size:"small",color:"primary","aria-label":"add",children:Object(U.jsx)(N.a,{})})})})}var dt=a(528),jt=a(495),bt=a(534),Ot=Object(l.a)((function(e){return{dialog:{margin:"auto"},dialogContent:{width:"80vw",maxWidth:400,maxHeight:"90vh"}}}));function ht(e){var t=Ot(),a=e.open,n=e.setOpen,c=e.children,r=e.flex;return Object(U.jsx)(jt.a,{className:t.dialog,open:a,onClose:function(){return n(!1)},children:Object(U.jsx)(bt.a,{className:t.dialogContent,style:r?{display:"flex",justifyContent:"center",alignItems:"center"}:{},children:c})})}var xt=a(76),pt=a.n(xt);function ft(e){var t=e.label,a=e.id,n=e.value,c=e.setOpen,r=e.disabled,s=e.className,i=e.button,l=e.TextFieldProps,o=e.ButtonProps;return i?Object(U.jsx)(Pe.a,Object(Re.a)(Object(Re.a)({id:a,className:s&&s,onClick:function(){!r&&c(!0)},variant:"outlined",size:"small",color:n?"primary":"inherit"},o),{},{disabled:!!r,children:n||t})):Object(U.jsx)(L.a,Object(Re.a)(Object(Re.a)({className:s&&s,label:t,id:a,value:n,variant:"outlined",InputProps:{endAdornment:Object(U.jsx)(pt.a,{}),readOnly:!0,style:{cursor:"pointer"}},inputProps:{style:{cursor:"pointer"}},onClick:function(){!r&&c(!0)}},l),{},{disabled:!!r}))}var mt=a(243),gt=a.n(mt),vt=a(242),St=a.n(vt),kt=Object(l.a)((function(e){return{listItem:{paddingLeft:e.spacing(2)},emphasized:{fontStyle:"italic",paddingLeft:e.spacing(1)}}}));function yt(e){var t=kt(),a=e.onClick,n=e.textVal,c=e.selectCondition,r=e.emphasize;return Object(U.jsxs)(v.a,{button:!0,onClick:a,className:r?t.emphasized:t.listItem,children:[Object(U.jsx)(k.a,{primary:n}),c?Object(U.jsx)(St.a,{color:"primary"}):Object(U.jsx)(gt.a,{})]})}function wt(e){for(var t=e.year,a=e.setYear,n=e.className,c=e.button,s=e.TextFieldProps,i=e.ButtonProps,l=(new Date).getFullYear(),o=[],u=1980;u<=l;u++)o.unshift(u.toString());var d=Object(r.useState)(!1),j=Object(O.a)(d,2),b=j[0],h=j[1],x=function(e){a(e),h(!1)};return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(ft,{label:c?"year":"Year*",id:"year-select",value:t,setOpen:h,className:n,button:!!c,TextFieldProps:s,ButtonProps:i}),Object(U.jsx)(ht,{open:b,setOpen:h,children:Object(U.jsxs)(dt.a,{children:[Object(U.jsx)(yt,{onClick:function(){return x("")},textVal:"",selectCondition:""===t}),Object(U.jsx)(g.a,{}),o.map((function(e){return Object(U.jsxs)("div",{children:[Object(U.jsx)(yt,{onClick:function(){return x(e)},textVal:e,selectCondition:e===t}),Object(U.jsx)(g.a,{})]},e)}))]})})]})}var Ct=Object(l.a)((function(e){return{emphasized:{fontStyle:"italic",paddingLeft:e.spacing(1)}}}));function Nt(e){var t=Ct(),a=e.onClick,n=e.textVal;return Object(U.jsxs)(v.a,{button:!0,onClick:a,className:t.emphasized,children:[Object(U.jsx)(k.a,{primary:n}),Object(U.jsx)(N.a,{})]})}var At=a(63),Pt=a(64),Ft=a(52),Dt=function e(t){Object(Ft.a)(this,e),this.status=void 0,this.status=t},Tt=function(e){Object(At.a)(a,e);var t=Object(Pt.a)(a);function a(){return Object(Ft.a)(this,a),t.call(this,"success")}return a}(Dt),Et=function(e){Object(At.a)(a,e);var t=Object(Pt.a)(a);function a(e){var n;return Object(Ft.a)(this,a),(n=t.call(this)).data=void 0,n.data=e,n}return a}(Tt),Vt="http://localhost:7000/api/vehicles";function Bt(e,t,a,n,c,r){return Mt.apply(this,arguments)}function Mt(){return(Mt=Object(ee.a)(_.a.mark((function e(t,a,n,c,r,s){var i,l;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(Vt,"/get-vehicles-paged/").concat(t,"/").concat(a,"/").concat(n,"/").concat(c,"/").concat(r,"?").concat(s));case 2:return i=e.sent,e.next=5,i.json();case 5:return l=e.sent,e.abrupt("return",l);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function It(e,t){return Lt.apply(this,arguments)}function Lt(){return(Lt=Object(ee.a)(_.a.mark((function e(t,a){var n,c;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(Vt,"/find?field=").concat(t,"&value=").concat(a));case 2:return n=e.sent,e.next=5,n.json();case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zt(){return Rt.apply(this,arguments)}function Rt(){return(Rt=Object(ee.a)(_.a.mark((function e(){var t,a;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(Vt+"/next-stock");case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wt(e){return Ut.apply(this,arguments)}function Ut(){return(Ut=Object(ee.a)(_.a.mark((function e(t){var a,n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",new Et({exists:!1}));case 2:return e.next=4,fetch("".concat(Vt,"/check-stock?stock=").concat(t));case 4:return a=e.sent,e.next=7,a.json();case 7:return n=e.sent,e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gt(){return Jt.apply(this,arguments)}function Jt(){return(Jt=Object(ee.a)(_.a.mark((function e(){var t,a;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(Vt+"/makes");case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ht(e){return Yt.apply(this,arguments)}function Yt(){return(Yt=Object(ee.a)(_.a.mark((function e(t){var a,n,c,r;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={make:t},n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)},e.next=4,fetch(Vt+"/add-make",n);case 4:return c=e.sent,e.next=7,c.json();case 7:return r=e.sent,e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qt(e){return $t.apply(this,arguments)}function $t(){return($t=Object(ee.a)(_.a.mark((function e(t){var a,n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(Vt,"/models?makeId=").concat(t));case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Kt(e,t){return Qt.apply(this,arguments)}function Qt(){return(Qt=Object(ee.a)(_.a.mark((function e(t,a){var n,c,r,s;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={makeId:t,model:a},c={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)},e.next=4,fetch(Vt+"/add-model",c);case 4:return r=e.sent,e.next=7,r.json();case 7:return s=e.sent,e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xt(e){return Zt.apply(this,arguments)}function Zt(){return(Zt=Object(ee.a)(_.a.mark((function e(t){var a,n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(Vt,"/trims?modelId=").concat(t));case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _t(e,t){return ea.apply(this,arguments)}function ea(){return(ea=Object(ee.a)(_.a.mark((function e(t,a){var n,c,r,s;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={modelId:t,trim:a},c={method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)},e.next=4,fetch(Vt+"/add-trim",c);case 4:return r=e.sent,e.next=7,r.json();case 7:return s=e.sent,e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ta(e,t){return aa.apply(this,arguments)}function aa(){return(aa=Object(ee.a)(_.a.mark((function e(t,a){var n,c,r,s;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={addVehicleParam:JSON.stringify(Object(Re.a)(Object(Re.a)({},t),{},{dateAdded:Date.now()})),initialStageParam:JSON.stringify(a)},c={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)},e.next=4,fetch(Vt+"/add",c);case 4:return r=e.sent,e.next=7,r.json();case 7:return s=e.sent,e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function na(e,t){return ca.apply(this,arguments)}function ca(){return(ca=Object(ee.a)(_.a.mark((function e(t,a){var n,c,r,s;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={vehicleId:t,updateDoc:JSON.stringify(a)},c={method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)},e.next=4,fetch(Vt+"/update",c);case 4:return r=e.sent,e.next=7,r.json();case 7:return s=e.sent,e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ra(e,t,a){return sa.apply(this,arguments)}function sa(){return(sa=Object(ee.a)(_.a.mark((function e(t,a,n){var c,r,s,i;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={vehicleId:t,stageAssignmentId:a,dateSold:n},r={method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)},e.next=4,fetch(Vt+"/sell",r);case 4:return s=e.sent,e.next=7,s.json();case 7:return i=e.sent,e.abrupt("return",i);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ia(e){return la.apply(this,arguments)}function la(){return(la=Object(ee.a)(_.a.mark((function e(t){var a,n,c,r;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={vehicleId:t},n={method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)},e.next=4,fetch(Vt+"/delete",n);case 4:return c=e.sent,e.next=7,c.json();case 7:return r=e.sent,e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var oa=Object(l.a)((function(e){return{addButtons:{marginLeft:"auto"}}}));function ua(e){var t=oa(),a=Te().delay,n=e.makeSelectParent,c=e.makeSelect,s=je(),i=Object(r.useState)(""),l=Object(O.a)(i,2),o=l[0],u=l[1],d=Object(r.useState)(""),j=Object(O.a)(d,2),h=j[0],x=j[1],p=Object(r.useRef)(c.open);Object(r.useEffect)((function(){p.current=c.open}),[c.open]);var f=function(){var e=Object(ee.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u("loading"),e.next=3,a();case 3:Ht(h).then((function(e){if(s.current&&u(e.status),"success"===e.status)n.mounted.current&&p.current&&e.doc&&n.setMake(e.doc),c.mounted.current&&(c.setAddMake(!1),e.data&&c.setMakes(e.data),c.setOpen(!1));else s.current&&x("")}),(function(e){u("failed"),console.error(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(U.jsx)(et.a,{in:c.addMake,timeout:"auto",unmountOnExit:!0,children:Object(U.jsx)(dt.a,{children:"loading"===o?Object(U.jsx)(ce,{children:Object(U.jsx)(ae.a,{})}):Object(U.jsxs)(U.Fragment,{children:["exists"===o&&Object(U.jsx)(b.a,{color:"secondary",children:"Already exists"}),"failed"===o&&Object(U.jsx)(b.a,{color:"secondary",children:"Failed to add make"}),Object(U.jsx)(v.a,{children:Object(U.jsx)(L.a,{autoFocus:!0,fullWidth:!0,id:"add-make-input",label:"Add Make*",value:h,onChange:function(e){x(e.target.value.toUpperCase())},autoComplete:"off"})}),Object(U.jsxs)("div",{className:t.addButtons,children:[Object(U.jsx)(Pe.a,{onClick:function(){return c.setAddMake(!1)},children:"Cancel"}),Object(U.jsx)(Pe.a,{onClick:h?f:function(){},disabled:!h,color:"primary",children:"Add"})]})]})})})}function da(e){var t=Te().delay,a=e.parent,n=e.allowAddMake,c=e.className,s=e.button,i=e.TextFieldProps,l=e.ButtonProps,o=a.mounted,u=a.make,d=a.setMake,j=je(),h=Object(r.useState)(!1),x=Object(O.a)(h,2),p=x[0],f=x[1],m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u;d(e),f(!1)},v=Object(r.useState)([]),S=Object(O.a)(v,2),k=S[0],y=S[1],w=Object(r.useState)("loading"),C=Object(O.a)(w,2),N=C[0],A=C[1],P=Object(r.useCallback)(Object(ee.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A("loading"),e.next=3,t();case 3:Gt().then((function(e){j.current&&e.data&&y(e.data),j.current&&A(e.status)}),(function(e){j.current&&A("failed"),console.error(e)}));case 4:case"end":return e.stop()}}),e)}))),[t,j]);Object(r.useEffect)((function(){P()}),[P]);var F,D=Object(r.useState)(!1),T=Object(O.a)(D,2),E=T[0],V=T[1];switch(Object(r.useEffect)((function(){!p&&V(!1)}),[p]),N){case"loading":F=Object(U.jsx)(ae.a,{});break;case"failed":F=Object(U.jsx)(b.a,{children:"error loading makes"});break;default:F=Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(et.a,{in:!E,timeout:"auto",unmountOnExit:!0,children:Object(U.jsxs)(dt.a,{children:[Object(U.jsx)(yt,{onClick:function(){return m({id:"",name:""})},textVal:"",selectCondition:!u.name}),Object(U.jsx)(g.a,{}),k.map((function(e){return Object(U.jsxs)("div",{children:[Object(U.jsx)(yt,{onClick:function(){return m(e)},textVal:e.name,selectCondition:e===u}),Object(U.jsx)(g.a,{})]},e.id)})),n&&Object(U.jsx)(Nt,{onClick:function(){return V(!0)},textVal:"Add Make"})]})}),n&&Object(U.jsx)(ua,{makeSelectParent:{mounted:o,setMake:d},makeSelect:{mounted:j,setMakes:y,addMake:E,setAddMake:V,open:p,setOpen:f}})]})}return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(ft,{label:s?"make":"Make*",id:"make-select",value:u.name,setOpen:f,className:c,button:!!s,TextFieldProps:i,ButtonProps:l}),Object(U.jsx)(ht,{open:p,setOpen:f,flex:"success"!==N,children:F})]})}var ja=Object(l.a)((function(e){return{addButtons:{marginLeft:"auto"}}}));function ba(e){var t=ja(),a=Te().delay,n=e.modelSelectParent,c=e.modelSelect,s=je(),i=Object(r.useState)(""),l=Object(O.a)(i,2),o=l[0],u=l[1],d=Object(r.useState)(""),j=Object(O.a)(d,2),h=j[0],x=j[1],p=Object(r.useRef)(c.open);Object(r.useEffect)((function(){p.current=c.open}),[c.open]);var f=function(){var e=Object(ee.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u("loading"),e.next=3,a();case 3:Kt(n.makeId,h).then((function(e){if(s.current&&u(e.status),"success"===e.status)n.mounted.current&&p.current&&e.doc&&n.setModel(e.doc),c.mounted.current&&(c.setAddModel(!1),e.data&&c.setModels(e.data),c.setOpen(!1));else s.current&&x("")}),(function(e){u("failed"),console.error(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(U.jsx)(et.a,{in:c.addModel,timeout:"auto",unmountOnExit:!0,children:Object(U.jsx)(dt.a,{children:"loading"===o?Object(U.jsx)(ce,{children:Object(U.jsx)(ae.a,{})}):Object(U.jsxs)(U.Fragment,{children:["exists"===o&&Object(U.jsx)(b.a,{color:"secondary",children:"Already exists"}),"failed"===o&&Object(U.jsx)(b.a,{color:"secondary",children:"Failed to add model"}),Object(U.jsx)(v.a,{children:Object(U.jsx)(L.a,{autoFocus:!0,fullWidth:!0,id:"add-model-input",label:"Add Model*",value:h,onChange:function(e){x(e.target.value.toUpperCase())},autoComplete:"off"})}),Object(U.jsxs)("div",{className:t.addButtons,children:[Object(U.jsx)(Pe.a,{onClick:function(){return c.setAddModel(!1)},children:"Cancel"}),Object(U.jsx)(Pe.a,{onClick:h?f:function(){},disabled:!h,color:"primary",children:"Add"})]})]})})})}function Oa(e){var t=Te().delay,a=e.parent,n=e.allowAddModel,c=e.className,s=e.button,i=e.TextFieldProps,l=e.ButtonProps,o=a.mounted,u=a.make,d=a.model,j=a.setModel,h=je(),x=Object(r.useState)(!1),p=Object(O.a)(x,2),f=p[0],m=p[1],v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d;j(e),m(!1)},S=Object(r.useState)([]),k=Object(O.a)(S,2),y=k[0],w=k[1],C=Object(r.useState)("loading"),N=Object(O.a)(C,2),A=N[0],P=N[1],F=Object(r.useCallback)(Object(ee.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P("loading"),e.next=3,t();case 3:qt(u.id).then((function(e){h.current&&e.data&&w(e.data),h.current&&P(e.status)}),(function(e){h.current&&P("failed"),console.error(e)}));case 4:case"end":return e.stop()}}),e)}))),[t,h,u]);Object(r.useEffect)((function(){j({id:"",name:""}),u.id&&F()}),[F,u.id,j]);var D,T=Object(r.useState)(!1),E=Object(O.a)(T,2),V=E[0],B=E[1];switch(Object(r.useEffect)((function(){!f&&B(!1)}),[f]),A){case"loading":D=Object(U.jsx)(ae.a,{});break;case"failed":D=Object(U.jsx)(b.a,{children:"error loading models"});break;default:D=Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(et.a,{in:!V,timeout:"auto",unmountOnExit:!0,children:Object(U.jsxs)(dt.a,{children:[Object(U.jsx)(yt,{onClick:function(){return v({id:"",name:""})},textVal:"",selectCondition:!d.name}),Object(U.jsx)(g.a,{}),null===y||void 0===y?void 0:y.map((function(e){return Object(U.jsxs)("div",{children:[Object(U.jsx)(yt,{onClick:function(){return v(e)},textVal:e.name,selectCondition:e.name===d.name}),Object(U.jsx)(g.a,{})]},e.id)})),n&&Object(U.jsx)(Nt,{onClick:function(){return B(!0)},textVal:"Add Model"})]})}),n&&Object(U.jsx)(ba,{modelSelectParent:{mounted:o,makeId:u.id,setModel:j},modelSelect:{mounted:h,addModel:V,setAddModel:B,setModels:w,open:f,setOpen:m}})]})}return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(ft,{label:s?"model":"Model*",id:"model-select",value:d.name,setOpen:m,className:c,button:!!s,TextFieldProps:i,ButtonProps:l,disabled:!u.name}),Object(U.jsx)(ht,{open:f,setOpen:m,flex:"success"!==A,children:D})]})}var ha=Object(l.a)((function(e){return{addButtons:{marginLeft:"auto"}}}));function xa(e){var t=ha(),a=Te().delay,n=e.trimSelectParent,c=e.trimSelect,s=je(),i=Object(r.useState)(""),l=Object(O.a)(i,2),o=l[0],u=l[1],d=Object(r.useState)(""),j=Object(O.a)(d,2),h=j[0],x=j[1],p=Object(r.useRef)(c.open);Object(r.useEffect)((function(){p.current=c.open}),[c.open]);var f=function(){var e=Object(ee.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u("loading"),e.next=3,a();case 3:_t(n.modelId,h).then((function(e){if(s.current&&u(e.status),"success"===e.status)n.mounted.current&&p.current&&e.patch&&n.setTrim(e.patch),c.mounted.current&&(c.setAddTrim(!1),e.data&&c.setTrims(e.data),c.setOpen(!1));else s.current&&x("")}),(function(e){u("failed"),console.error(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(U.jsx)(et.a,{in:c.addTrim,timeout:"auto",unmountOnExit:!0,children:Object(U.jsx)(dt.a,{children:"loading"===o?Object(U.jsx)(ce,{children:Object(U.jsx)(ae.a,{})}):Object(U.jsxs)(U.Fragment,{children:["exists"===o&&Object(U.jsx)(b.a,{color:"secondary",children:"Already exists"}),"failed"===o&&Object(U.jsx)(b.a,{color:"secondary",children:"Failed to add trim"}),Object(U.jsx)(v.a,{children:Object(U.jsx)(L.a,{autoFocus:!0,fullWidth:!0,id:"add-trim-input",label:"Add Trim*",value:h,onChange:function(e){x(e.target.value.toUpperCase())},autoComplete:"off"})}),Object(U.jsxs)("div",{className:t.addButtons,children:[Object(U.jsx)(Pe.a,{onClick:function(){return c.setAddTrim(!1)},children:"Cancel"}),Object(U.jsx)(Pe.a,{onClick:h?f:function(){},disabled:!h,color:"primary",children:"Add"})]})]})})})}function pa(e){var t=Te().delay,a=e.parent,n=e.allowAddTrim,c=e.className,s=e.button,i=e.TextFieldProps,l=e.ButtonProps,o=a.mounted,u=a.make,d=a.model,j=a.trim,h=a.setTrim,x=je(),p=Object(r.useState)(!1),f=Object(O.a)(p,2),m=f[0],v=f[1],S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j;h(e),v(!1)},k=Object(r.useState)([]),y=Object(O.a)(k,2),w=y[0],C=y[1],N=Object(r.useState)("loading"),A=Object(O.a)(N,2),P=A[0],F=A[1],D=Object(r.useCallback)(Object(ee.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return F("loading"),e.next=3,t();case 3:Xt(d.id).then((function(e){x.current&&e.data&&C(e.data),x.current&&F(e.status)}),(function(e){x.current&&F("failed"),console.error(e)}));case 4:case"end":return e.stop()}}),e)}))),[t,x,d.id]);Object(r.useEffect)((function(){h({id:"",name:""}),d.id&&D()}),[D,h,d.id]);var T,E=Object(r.useState)(!1),V=Object(O.a)(E,2),B=V[0],M=V[1];switch(Object(r.useEffect)((function(){!m&&M(!1)}),[m]),P){case"loading":T=Object(U.jsx)(ae.a,{});break;case"failed":T=Object(U.jsx)(b.a,{children:"error loading makes"});break;default:T=Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(et.a,{in:!B,timeout:"auto",unmountOnExit:!0,children:Object(U.jsxs)(dt.a,{children:[Object(U.jsx)(yt,{onClick:function(){return S({id:"",name:""})},textVal:"",selectCondition:!u.name}),Object(U.jsx)(g.a,{}),w.map((function(e){return Object(U.jsxs)("div",{children:[Object(U.jsx)(yt,{onClick:function(){return S(e)},textVal:e.name,selectCondition:e===j}),Object(U.jsx)(g.a,{})]},e.id)})),n&&Object(U.jsx)(Nt,{onClick:function(){return M(!0)},textVal:"Add Trim"})]})}),n&&Object(U.jsx)(xa,{trimSelectParent:{mounted:o,modelId:d.id,setTrim:h},trimSelect:{mounted:x,addTrim:B,setAddTrim:M,setTrims:C,open:m,setOpen:v}})]})}return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(ft,{label:s?"trim":"Trim",id:"trim-select",value:j.name,setOpen:v,className:c,button:!!s,TextFieldProps:i,ButtonProps:l,disabled:!d.name}),Object(U.jsx)(ht,{open:m,setOpen:v,flex:"success"!==P,children:T})]})}var fa=Object(l.a)((function(e){return{select:{margin:e.spacing(.5)}}}));function ma(e){var t=fa(),a=e.mounted,n=e.vehicleDetailFilterState,c=n.yearFilterTmp,r=n.setYearFilterTmp,s=n.makeFilterTmp,i=n.setMakeFilterTmp,l=n.modelFilterTmp,o=n.setModelFilterTmp,u=n.trimFilterTmp,d=n.setTrimFilterTmp;return Object(U.jsxs)(ie,{flexWrap:"wrap",children:[Object(U.jsx)(wt,{className:t.select,year:c,setYear:r,button:!0}),Object(U.jsx)(da,{parent:{mounted:a,make:s,setMake:i},className:t.select,button:!0}),Object(U.jsx)(Oa,{parent:{mounted:a,make:s,model:l,setModel:o},className:t.select,button:!0}),Object(U.jsx)(pa,{parent:{mounted:a,make:s,model:l,trim:u,setTrim:d},className:t.select,button:!0})]})}var ga=a(504),va=a(497),Sa=a(503),ka=a(246),ya=a.n(ka),wa=a(496),Ca=a(535),Na=a(527),Aa=Object(l.a)((function(e){return{dialogTitle:{color:e.titleColor.darkBlue,textAlign:"center"},datePicker:{margin:e.spacing(1)}}}));function Pa(e){var t=Aa(),a=e.buttonLabel,n=e.dialogTitle,c=e.after,s=e.setAfter,i=e.before,l=e.setBefore,o=e.className,u=Object(r.useState)(!1),d=Object(O.a)(u,2),j=d[0],b=d[1],h=Object(r.useState)(null),x=Object(O.a)(h,2),p=x[0],f=x[1],m=Object(r.useState)(null),g=Object(O.a)(m,2),v=g[0],S=g[1];Object(r.useEffect)((function(){f(c),S(i)}),[c,i]);return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(Pe.a,{className:o,startIcon:Object(U.jsx)(ya.a,{}),size:"small",variant:"outlined",onClick:function(){b(!j)},color:c||i?"primary":"inherit",children:a}),Object(U.jsxs)(jt.a,{open:j,"aria-labelledby":"date-range-select",children:[Object(U.jsx)(wa.a,{className:t.dialogTitle,children:n}),Object(U.jsx)(bt.a,{children:Object(U.jsx)(va.b,{dateAdapter:ga.a,children:Object(U.jsxs)(ce,{flexDirection:"column",children:[Object(U.jsx)(Na.a,{className:t.datePicker,children:Object(U.jsx)(Sa.a,{clearable:!0,label:"Start Date",value:p,onChange:function(e){return f(e)},renderInput:function(e){return Object(U.jsx)(L.a,Object(Re.a)({},e))}})}),Object(U.jsx)(Na.a,{className:t.datePicker,children:Object(U.jsx)(Sa.a,{clearable:!0,label:"End Date",value:v,onChange:function(e){return S(e)},renderInput:function(e){return Object(U.jsx)(L.a,Object(Re.a)({},e))},minDate:p})})]})})}),Object(U.jsxs)(Ca.a,{children:[Object(U.jsx)(Pe.a,{size:"large",onClick:function(){f(null),S(null)},children:"CLEAR"}),Object(U.jsx)(Pe.a,{size:"large",onClick:function(){var e=p?new Date(p).getTime():null,t=v?new Date(v).getTime():null;s(e),l(t),b(!1)},children:"OK"})]})]})]})}function Fa(e){var t=e.after,a=e.setAfter,n=e.before,c=e.setBefore,r=e.className,s=t&&new Date(t).toLocaleDateString(),i=n&&new Date(n).toLocaleDateString(),l=t&&n?"Added: ".concat(s," to ").concat(i):t?"Added: after ".concat(s):n?"Added: before ".concat(i):"Date Added";return Object(U.jsx)(Pa,{buttonLabel:l,dialogTitle:"Select Date Added Range",after:t,setAfter:a,before:n,setBefore:c,className:r})}function Da(e){var t=e.after,a=e.setAfter,n=e.before,c=e.setBefore,r=e.className,s=t&&new Date(t).toLocaleDateString(),i=n&&new Date(n).toLocaleDateString(),l=t&&n?"Sold: ".concat(s," to ").concat(i):t?"Sold: after ".concat(s):n?"Sold: before ".concat(i):"Date Sold";return Object(U.jsx)(Pa,{buttonLabel:l,dialogTitle:"Select Date Sold Range",after:t,setAfter:a,before:n,setBefore:c,className:r})}var Ta=Object(l.a)((function(e){return{select:{margin:e.spacing(.5)}}}));function Ea(e){var t=Ta(),a=Oe().statusParam,n=e.dateRangeFilterState,c=n.addedAfterFilterTmp,r=n.setAddedAfterFilterTmp,s=n.addedBeforeFilterTmp,i=n.setAddedBeforeFilterTmp,l=n.soldAfterFilterTmp,o=n.setSoldAfterFilterTmp,u=n.soldBeforeFilterTmp,d=n.setSoldBeforeFilterTmp;return Object(U.jsxs)(ie,{flexWrap:"wrap",children:[Object(U.jsx)(Fa,{after:c,setAfter:r,before:s,setBefore:i,className:t.select}),"sold"===a&&Object(U.jsx)(Da,{after:l,setAfter:o,before:u,setBefore:d,className:t.select})]})}var Va=a(536),Ba=a(507);function Ma(e){var t=e.showForSaleTmp,a=e.setShowForSaleTmp;return Object(U.jsx)(Va.a,{control:Object(U.jsx)(Ba.a,{size:"small",checked:t,onChange:function(){return a(!t)}}),label:'Show "For Sale" Vehicles',sx:{margin:0,"& .MuiFormControlLabel-label":{color:t?"primary.main":"black",fontSize:14}}})}var Ia=Object(l.a)((function(e){return{filterActions:{marginTop:e.spacing(1)}}}));function La(e){var t=Ia(),a=Object(i.g)(),n=Oe(),c=n.statusParam,s=n.sortParam,l=n.perPageParam,o=e.mounted,u=e.setViewFilters,d=e.setFilterCount,j=Object(r.useState)(""),b=Object(O.a)(j,2),h=b[0],x=b[1],p=Object(r.useState)({id:"",name:""}),f=Object(O.a)(p,2),m=f[0],g=f[1],v=Object(r.useState)({id:"",name:""}),S=Object(O.a)(v,2),k=S[0],y=S[1],w=Object(r.useState)({id:"",name:""}),C=Object(O.a)(w,2),N=C[0],A=C[1],P=Object(r.useState)(null),F=Object(O.a)(P,2),D=F[0],T=F[1],E=Object(r.useState)(null),V=Object(O.a)(E,2),B=V[0],M=V[1],I=Object(r.useState)(null),L=Object(O.a)(I,2),z=L[0],R=L[1],W=Object(r.useState)(null),G=Object(O.a)(W,2),J=G[0],H=G[1],Y=Object(r.useState)(!1),q=Object(O.a)(Y,2),$=q[0],K=q[1],Q=Object(r.useState)(""),X=Object(O.a)(Q,2),Z=X[0],_=X[1],ee=Object(r.useState)({id:"",name:""}),te=Object(O.a)(ee,2),ae=te[0],ne=te[1],ce=Object(r.useState)({id:"",name:""}),se=Object(O.a)(ce,2),ie=se[0],oe=se[1],ue=Object(r.useState)({id:"",name:""}),de=Object(O.a)(ue,2),je=de[0],he=de[1],xe=Object(r.useState)(null),pe=Object(O.a)(xe,2),fe=pe[0],me=pe[1],ge=Object(r.useState)(null),ve=Object(O.a)(ge,2),Se=ve[0],ke=ve[1],ye=Object(r.useState)(null),we=Object(O.a)(ye,2),Ce=we[0],Ne=we[1],Ae=Object(r.useState)(null),Fe=Object(O.a)(Ae,2),De=Fe[0],Te=Fe[1],Ee=Object(r.useState)(!1),Ve=Object(O.a)(Ee,2),Be=Ve[0],Me=Ve[1],Ie=be(),Le=Ie.get("year"),ze=Ie.get("make"),Re=Ie.get("model"),We=Ie.get("trim"),Ue=Ie.get("addedAfter"),Ge=Ie.get("addedBefore"),Je=Ie.get("soldAfter"),He=Ie.get("soldBefore"),Ye=Ie.get("forSale");Object(r.useEffect)((function(){x(Le||""),_(Le||"");var e=ze?ze.split("-"):["",""];g({id:e[1],name:e[0]}),ne({id:e[1],name:e[0]});var t=Re?Re.split("-"):["",""];y({id:t[1],name:t[0]}),oe({id:t[1],name:t[0]}),T(Ue?parseFloat(Ue):null),me(Ue?parseFloat(Ue):null),M(Ge?parseFloat(Ge):null),ke(Ge?parseFloat(Ge):null),R(Je?parseFloat(Je):null),Ne(Je?parseFloat(Je):null),H(He?parseFloat(He):null),Te(He?parseFloat(He):null);var a="true"===Ye;K(a),Me(a)}),[Le,ze,Re,We,Ue,Ge,Je,He,Ye]),Object(r.useEffect)((function(){var e=Re?Re.split("-"):["",""];y({id:e[1],name:e[0]}),oe({id:e[1],name:e[0]})}),[ae,Re]),Object(r.useEffect)((function(){var e=We?We.split("-"):["",""];A({id:e[1],name:e[0]}),he({id:e[1],name:e[0]})}),[ie,We]);var qe=Z===h&&ae.id===m.id&&ie.id===k.id&&je.id===N.id&&D===fe&&B===Se&&z===Ce&&J===De&&$===Be;Object(r.useEffect)((function(){var e=0;""!==Z&&e++;[ae,ie,je].forEach((function(t){return function(t){return""!==t.name&&e++}(t)})),(fe||Se)&&e++,(Ce||De)&&e++,Be&&e++,d(e)}),[Z,ae,ie,je,fe,Se,Ce,De,Be,d]);var $e={yearFilterTmp:h,setYearFilterTmp:x,makeFilterTmp:m,setMakeFilterTmp:g,modelFilterTmp:k,setModelFilterTmp:y,trimFilterTmp:N,setTrimFilterTmp:A},Ke={addedAfterFilterTmp:D,setAddedAfterFilterTmp:T,addedBeforeFilterTmp:B,setAddedBeforeFilterTmp:M,soldAfterFilterTmp:z,setSoldAfterFilterTmp:R,soldBeforeFilterTmp:J,setSoldBeforeFilterTmp:H};return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsxs)(re,{flexWrap:"wrap",children:[Object(U.jsx)(ma,{mounted:o,vehicleDetailFilterState:$e}),Object(U.jsx)(Ea,{dateRangeFilterState:Ke}),"active"===c&&Object(U.jsx)(Ma,{showForSaleTmp:$,setShowForSaleTmp:K})]}),Object(U.jsxs)(le,{className:t.filterActions,children:[Object(U.jsx)(Pe.a,{onClick:function(){_(""),x(""),ne({id:"",name:""}),g({id:"",name:""}),oe({id:"",name:""}),y({id:"",name:""}),he({id:"",name:""}),A({id:"",name:""}),me(null),T(null),ke(null),M(null),Ne(null),R(null),Te(null),H(null),Me(!1),K(!1),u(!1),a.push("/all-vehicles/".concat(c,"/").concat(s,"/").concat(l,"/first/0"))},children:"REMOVE FILTERS"}),Object(U.jsx)(Pe.a,{onClick:function(){_(h),ne(m),oe(k),he(N),me(D),ke(B),Ne(z),Te(J),u(!1);var e=[];h&&e.push("year=".concat(h)),m.id&&e.push("make=".concat(m.name,"-").concat(m.id)),k.id&&e.push("model=".concat(k.name,"-").concat(k.id)),N.id&&e.push("trim=".concat(N.name,"-").concat(N.id)),D&&e.push("addedAfter=".concat(D)),B&&e.push("addedBefore=".concat(B)),z&&e.push("soldAfter=".concat(z)),J&&e.push("soldBefore=".concat(J)),$&&e.push("forSale=".concat($));var t="".concat(e.join("&"));a.push("/all-vehicles/".concat(c,"/").concat(s,"/").concat(l,"/first/0?").concat(t))},disabled:qe,color:"primary",children:"APPLY FILTERS"})]})]})}var za=a(515),Ra=Object(l.a)({skeleton:{width:"100%"}});function Wa(e){for(var t=Ra(),a=[],n=0;n<e.skeletonCount;n++)a.push(Object(U.jsx)(v.a,{children:Object(U.jsx)(za.a,{className:t.skeleton,variant:"text"})},n));return Object(U.jsx)(dt.a,{children:a.map((function(e){return e}))})}var Ua=a(498),Ga=a(499),Ja=Object(Ua.a)(Ga.a)((function(e){var t=e.theme;return{marginTop:t.spacing(1),marginBottom:t.spacing(1),padding:0,display:"flex",justifyContent:"space-between"}})),Ha=Object(l.a)((function(e){return{textContainer:{width:"60%"},stockLi:{fontSize:12,color:"black"},vehicleTextLi:{width:"100%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontSize:14,color:"black"},stock:{fontSize:16,color:"black"},vehicleText:{color:e.titleColor.darkBlue,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}}));function Ya(e){var t=Ha(),a=e.vehicle,n=e.variant,c=e.listItem,r=a.stock,s=a.year,i=a.make,l=a.model,o=a.trim;return c?Object(U.jsx)("div",{className:t.textContainer,children:Object(U.jsxs)(k.a,{children:[Object(U.jsxs)("span",{className:t.stockLi,children:["stk#:",r>0&&r]}),Object(U.jsx)("br",{}),Object(U.jsxs)("div",{className:t.vehicleTextLi,children:[s," ",i.name," ",l.name," ",o.name]})]})}):Object(U.jsx)("div",{children:Object(U.jsxs)(b.a,{variant:n||"body1",children:[Object(U.jsxs)("span",{className:t.stock,style:{fontSize:14},children:["stk#:",r>0&&r]}),Object(U.jsx)("br",{}),Object(U.jsxs)("div",{className:t.vehicleText,children:[" ",s," ",i.name," ",l.name," ",o.name]})]})})}var qa=Object(W.a)("div")({float:"right",height:"90%",display:"flex",justifyContent:"center",alignItems:"flex-end",flexDirection:"column",width:"clamp(100px, 35%, 150px)"}),$a=a(516),Ka=Object(W.a)($a.a)((function(e){return{margin:e.theme.spacing(.25),width:"100%"}}));function Qa(e){var t=e.vehicle,a=e.onClick,n=e.className,c=t.currentStage,r=c.stage,s=c.personPlace,i=c.status,l=Be().userPreferences.defaultStageAssignment,o=l.stage,u=l.personPlace;return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsxs)(Ja,{className:n||"",onClick:a,children:[Object(U.jsx)(Ya,{vehicle:t,listItem:!0}),Object(U.jsxs)(qa,{children:["Assign"===r.name?Object(U.jsx)(Ka,{size:"small",label:r.name,color:"secondary"}):"complete"===i?Object(U.jsx)(Ka,{size:"small",label:o.name,color:"secondary"}):Object(U.jsx)(Ka,{size:"small",label:r.name,color:"primary"}),"complete"===i?Object(U.jsx)(Ka,{size:"small",label:u.name}):Object(U.jsx)(Ka,{size:"small",label:s.name})]})]}),Object(U.jsx)(g.a,{})]})}var Xa=Object(l.a)({timeDifferenceLabel:{fontSize:10}});function Za(e){var t=Xa(),a=e.milliseconds,n=e.color;return a<6e4?Object(U.jsxs)(b.a,{color:n||"inherit",children:[Math.round(a/1e3)," ",Object(U.jsx)("span",{className:t.timeDifferenceLabel,children:" secs"})]}):a<36e5?Object(U.jsxs)(b.a,{color:n||"inherit",children:[Math.round(a/6e4)," ",Object(U.jsx)("span",{className:t.timeDifferenceLabel,children:" mins"})]}):a<864e5?Object(U.jsxs)(b.a,{color:n||"inherit",children:[Math.round(a/36e5)," ",Object(U.jsx)("span",{className:t.timeDifferenceLabel,children:" hrs"})]}):Object(U.jsxs)(b.a,{color:n||"inherit",children:[Math.round(a/864e5*10)/10," ",Object(U.jsx)("span",{className:t.timeDifferenceLabel,children:" days"})]})}var _a=Object(W.a)(Ka)((function(e){var t=e.theme;return{backgroundColor:t.palette.success.main,color:t.palette.success.contrastText}}));function en(e){var t=e.vehicle,a=e.onClick,n=e.className,c=t.totalSellTime;return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsxs)(Ja,{className:n||"",onClick:a,children:[Object(U.jsx)(Ya,{vehicle:t,listItem:!0}),Object(U.jsx)(qa,{children:Object(U.jsx)(_a,{size:"small",label:c&&Object(U.jsx)(Za,{milliseconds:c})})})]}),Object(U.jsx)(g.a,{})]})}var tn=a(137),an=a.n(tn),nn=Object(Ua.a)(v.a)((function(e){var t=e.theme;return{marginTop:t.spacing(1),marginBottom:t.spacing(1),padding:0,display:"flex",justifyContent:"space-between"}})),cn=a(537),rn=Object(l.a)((function(e){return{title:{color:e.titleColor.darkBlue},dialog:{padding:10,textAlign:"center",maxWidth:500}}}));function sn(e){var t,a=rn(),n=je(),c=Te().delay,s=e.onClose,i=e.open,l=e.vehicle,o=e.getVehicles,u=l.id,d=Object(r.useState)(""),j=Object(O.a)(d,2),b=j[0],h=j[1],x=function(){var e=Object(ee.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h("loading"),e.next=3,c();case 3:ia(u).then((function(e){n.current&&h(e.status),o()}),(function(e){n.current&&h("failed"),console.error(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){"success"===b&&s()}),[s,b]),t="loading"===b?Object(U.jsx)(ae.a,{}):"failed"===b?Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)("p",{children:"Failed to delete vehicle"}),Object(U.jsxs)(cn.a,{children:[Object(U.jsx)(Pe.a,{onClick:s,children:"cancel"}),Object(U.jsx)(Pe.a,{variant:"outlined",color:"secondary",onClick:x,children:"try again"})]})]}):Object(U.jsxs)(cn.a,{children:[Object(U.jsx)(Pe.a,{onClick:s,children:"cancel"}),Object(U.jsx)(Pe.a,{variant:"outlined",color:"secondary",onClick:x,children:"yes, delete"})]}),Object(U.jsx)(jt.a,{onClose:s,"aria-labelledby":"delete-vehicle-dialog",open:i,disableEscapeKeyDown:!0,children:Object(U.jsxs)("div",{className:a.dialog,children:[Object(U.jsx)(wa.a,{id:"add-vehicle-dialog",className:a.title,children:"Delete Permanently?"}),Object(U.jsx)(ce,{children:Object(U.jsx)(Ya,{vehicle:l,variant:"subtitle1"})}),Object(U.jsx)("br",{}),Object(U.jsx)(g.a,{}),Object(U.jsx)("br",{}),t]})})}var ln=Object(l.a)((function(e){return{trashButtons:{margin:e.spacing(.25),width:"100%"}}}));function on(e){var t=ln(),a=je(),n=Te().delay,c=e.vehicle,s=e.getVehicles,i=e.className,l=Object(r.useState)(""),o=Object(O.a)(l,2),u=o[0],d=o[1],j=function(){var e=Object(ee.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d("loading"),e.next=3,n();case 3:na(c.id,{status:"active"}).then((function(e){a.current&&d(e.status),s()}),(function(e){a.current&&d("failed"),console.error(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=Object(r.useState)(!1),h=Object(O.a)(b,2),x=h[0],p=h[1],f=function(){return p(!x)};return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsxs)(nn,{className:i||"",children:[Object(U.jsx)(Ya,{vehicle:c,listItem:!0}),Object(U.jsx)(qa,{children:"loading"===u?Object(U.jsx)(ae.a,{size:25}):Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(Pe.a,{className:t.trashButtons,size:"small",variant:"outlined",color:"primary",onClick:j,children:"Activate"}),Object(U.jsx)(Pe.a,{className:t.trashButtons,size:"small",variant:"outlined",color:"secondary",startIcon:Object(U.jsx)(an.a,{}),onClick:f,children:"Delete"}),Object(U.jsx)(sn,{open:x,onClose:f,vehicle:c,getVehicles:s})]})})]}),Object(U.jsx)(g.a,{})]})}function un(e){var t=Object(i.g)(),a=e.vehicle,n=e.getVehicles,c=a.status,r=Oe(),s=r.statusParam,l=r.sortParam,o=r.perPageParam,u=r.pageParam,d=r.compareParam,j=be().toString(),b=function(){return t.push("/vehicle-details/id/".concat(a.id,"/stage?prev=/all-vehicles/").concat(s,"/").concat(l,"/").concat(o,"/").concat(u,"/").concat(d,"?").concat(j))};switch(c){case"active":return Object(U.jsx)(Qa,{vehicle:a,onClick:b});case"sold":return Object(U.jsx)(en,{vehicle:a,onClick:b});case"trash":return Object(U.jsx)(on,{vehicle:a,getVehicles:n})}}var dn=a(140),jn=a.n(dn),bn=a(141),On=a.n(bn),hn=a(139),xn=a.n(hn),pn=a(138),fn=a.n(pn);function mn(e){var t=Object(i.g)(),a=e.vehiclePage,n=a.docStartNumber,c=a.docEndNumber,r=a.totalDocs,s=a.vehicles,l=[];s.forEach((function(e){return l.push(e.dateAdded)}));var o=Math.max.apply(Math,l),u=Math.min.apply(Math,l),d=Oe(),j=d.statusParam,O=d.sortParam,h=d.perPageParam,p=d.pageParam,f=be().toString();return r>parseInt(h)?Object(U.jsxs)(ce,{children:[Object(U.jsx)(x.a,{"aria-label":"first-page",onClick:function(){1!==n&&t.push("/all-vehicles/".concat(j,"/").concat(O,"/").concat(h,"/first/0?").concat(f))},disabled:1===n,size:"large",children:Object(U.jsx)(fn.a,{})}),Object(U.jsx)(x.a,{"aria-label":"previous-page",onClick:function(){1!==n&&"asc"===O?t.push("/all-vehicles/".concat(j,"/").concat(O,"/").concat(h,"/prev/").concat(u,"?").concat(f)):t.push("/all-vehicles/".concat(j,"/").concat(O,"/").concat(h,"/prev/").concat(o,"?").concat(f))},disabled:1===n,size:"large",children:Object(U.jsx)(xn.a,{})}),Object(U.jsxs)(b.a,{align:"center",children:["(",n.toLocaleString(),"-",c.toLocaleString(),") / ",r.toLocaleString()]}),Object(U.jsx)(x.a,{"aria-label":"next-page",onClick:function(){c!==r&&"asc"===O?t.push("/all-vehicles/".concat(j,"/").concat(O,"/").concat(h,"/next/").concat(o,"?").concat(f)):t.push("/all-vehicles/".concat(j,"/").concat(O,"/").concat(h,"/next/").concat(u,"?").concat(f))},disabled:c===r,size:"large",children:Object(U.jsx)(jn.a,{})}),Object(U.jsx)(x.a,{"aria-label":"last-page",onClick:function(){"last"!==p&&t.push("/all-vehicles/".concat(j,"/").concat(O,"/").concat(h,"/last/0?").concat(f))},disabled:c===r,size:"large",children:Object(U.jsx)(On.a,{})})]}):Object(U.jsx)(U.Fragment,{})}function gn(e){var t,a=e.vehicleListState,n=e.getVehicles,c=a.vehiclePage;switch(a.getVehiclesStatus){case"failed":t=Object(U.jsx)(Fe,{errorMessage:"Error loading vehicles",retryAction:function(){return window.location.reload()}});break;case"loading":t=Object(U.jsx)(Wa,{skeletonCount:20});break;default:t=Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(dt.a,{children:c.vehicles.map((function(e){return e.id?Object(U.jsx)(un,{vehicle:e,getVehicles:n},e.id):Object(U.jsx)(U.Fragment,{})}))}),Object(U.jsx)(mn,{vehiclePage:a.vehiclePage})]})}return Object(U.jsx)(U.Fragment,{children:t})}var vn=a(248),Sn=a.n(vn),kn=a(512),yn=a(538),wn=a(500),Cn=Object(yn.a)((function(e){return Object(wn.a)({badge:{right:0,top:20,border:"2px solid ".concat(e.palette.background.paper),padding:"0 4px"}})}))(kn.a);function Nn(e){var t=e.viewFilters,a=e.setViewFilters,n=e.filterCount;return Object(U.jsx)(Pe.a,{size:"small",startIcon:t?Object(U.jsx)(Sn.a,{}):Object(U.jsx)(w.a,{}),onClick:function(){return a(!t)},children:Object(U.jsx)(Cn,{badgeContent:n,color:"secondary",children:"filters"})})}var An=Object(l.a)((function(e){return{listControls:{margin:e.spacing(1)}}}));function Pn(){var e=An(),t=je(),a=Te().delay,n=Oe(),c=n.statusParam,s=n.sortParam,i=n.perPageParam,l=n.pageParam,o=n.compareParam,u=be().toString(),d=Object(r.useState)(c),j=Object(O.a)(d,2),b=j[0],h=j[1],x=Object(r.useState)(s),p=Object(O.a)(x,2),f=p[0],m=p[1],v=Object(r.useState)(!1),S=Object(O.a)(v,2),k=S[0],y=S[1],C=Object(r.useState)(0),N=Object(O.a)(C,2),A=N[0],P=N[1],F=Object(r.useState)({docStartNumber:0,docEndNumber:0,totalDocs:0,vehicles:[]}),D=Object(O.a)(F,2),T=D[0],E=D[1],V=Object(r.useState)("loading"),B=Object(O.a)(V,2),M=B[0],I=B[1],L={vehiclePage:T,setVehiclePage:E,getVehiclesStatus:M,setGetVehiclesStatus:I},z=Object(r.useCallback)(Object(ee.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I("loading"),e.next=3,a();case 3:Bt(c,s,parseInt(i),l,parseInt(o),u).then((function(e){t.current&&I(e.status),"success"===e.status&&t.current&&e.data&&E(e.data),"failed"===e.status&&console.error(e)}),(function(e){t.current&&I("failed"),console.error(e)}));case 4:case"end":return e.stop()}}),e)}))),[a,c,s,i,l,o,u,t]);return Object(r.useEffect)((function(){z()}),[z]),Object(U.jsx)(Ge,{children:Object(U.jsxs)(Ke,{style:{position:"relative"},sx:{zIndex:0},children:[Object(U.jsx)(ut,{}),Object(U.jsxs)(Ye,{children:[Object(U.jsx)($e,{icon:Object(U.jsx)(w.a,{color:"primary"}),variant:"h5",children:"All Vehicles"}),Object(U.jsx)(g.a,{}),Object(U.jsxs)(re,{className:e.listControls,children:[Object(U.jsx)(ct,{filter:b,setFilter:h}),Object(U.jsx)(it,{sort:f,setSort:m}),Object(U.jsx)(Nn,{viewFilters:k,setViewFilters:y,filterCount:A})]}),Object(U.jsx)(g.a,{}),Object(U.jsxs)(et.a,{in:k,timeout:"auto",style:{width:"100%"},children:[Object(U.jsx)(La,{mounted:t,setViewFilters:y,setFilterCount:P}),Object(U.jsx)(g.a,{})]})]}),Object(U.jsx)(gn,{vehicleListState:L,getVehicles:z})]})})}var Fn=a(529),Dn=Object(l.a)((function(e){return{field:{width:"calc(100% - 75px)"},nextStockButton:{width:75}}}));function Tn(e){var t=Dn(),a=je(),n=Te().delay,c=e.editStockState,s=c.setStock,i=c.setStockError,l=c.addEditVehicleStatus,o=Object(r.useState)(""),u=Object(O.a)(o,2),d=u[0],j=u[1],b=Object(r.useState)("loading"),h=Object(O.a)(b,2),x=h[0],p=h[1],f=Object(r.useCallback)(Object(ee.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p("loading"),e.next=3,n();case 3:zt().then((function(e){a.current&&e.data&&j(e.data.nextStock.toString()),a.current&&p(e.status)}),(function(e){a.current&&p("failed"),console.error(e)}));case 4:case"end":return e.stop()}}),e)}))),[n,a]);return Object(r.useEffect)((function(){""!==l&&"success"!==l||f()}),[l,f]),"loading"===x?Object(U.jsx)(le,{className:t.nextStockButton,children:Object(U.jsx)(ae.a,{size:25})}):"failed"===x?Object(U.jsx)(Pe.a,{className:t.nextStockButton,disabled:!0,children:"error"}):Object(U.jsx)(Pe.a,{className:t.nextStockButton,onClick:function(){s(d),i("")},children:"USE NEXT"})}function En(e){var t=e.editStockState,a=e.className,n=t.stock,c=t.setStock,s=t.stockOkay,i=t.setStockOkay,l=t.stockError,o=t.setStockError,u=Object(r.useCallback)((function(){/^[0-9]{5}$/.test(n)||""===n?"stk# already exists"!==l&&(i(!0),o("")):(i(!1),o("must be 5 digits"))}),[o,i,n,l]);return Object(r.useEffect)((function(){s||u()}),[n,s,u]),Object(U.jsx)(L.a,{className:a&&a,error:!!l,label:"Stock #",helperText:l,variant:"outlined",value:"0"!==n?n:" ",onChange:function(e){c(e.target.value)},onBlur:u,InputProps:{endAdornment:Object(U.jsx)(z.a,{position:"end",children:Object(U.jsx)(Tn,{editStockState:t})})}})}function Vn(e){var t=e.mounted,a=e.addVehicleState,n=e.classes,c=a.stock,r=a.setStock,s=a.stockOkay,i=a.setStockOkay,l=a.stockError,o=a.setStockError,u=a.year,d=a.setYear,j=a.make,b=a.setMake,O=a.model,h=a.setModel,x=a.trim,p=a.setTrim,f={stock:c,setStock:r,stockOkay:s,setStockOkay:i,stockError:l,setStockError:o,addEditVehicleStatus:a.addVehicleStatus};return Object(U.jsxs)("div",{className:n.form,children:[Object(U.jsx)(En,{className:n.inputField,editStockState:f}),Object(U.jsx)(wt,{className:n.inputField,year:u,setYear:d}),Object(U.jsx)(da,{className:n.inputField,parent:{mounted:t,make:j,setMake:b},allowAddMake:!0}),Object(U.jsx)(Oa,{className:n.inputField,parent:{mounted:t,make:j,model:O,setModel:h},allowAddModel:!0}),Object(U.jsx)(pa,{className:n.inputField,parent:{mounted:t,make:j,model:O,trim:x,setTrim:p},allowAddTrim:!0})]})}var Bn=a(91),Mn=a.n(Bn),In="http://localhost:7000/api/stages";function Ln(){return zn.apply(this,arguments)}function zn(){return(zn=Object(ee.a)(_.a.mark((function e(){var t,a;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(In+"/get-stage-vehicle-counts");case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Rn(){return Wn.apply(this,arguments)}function Wn(){return(Wn=Object(ee.a)(_.a.mark((function e(){var t,a;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(In+"/get-person-place-vehicle-counts");case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Un(){return Gn.apply(this,arguments)}function Gn(){return(Gn=Object(ee.a)(_.a.mark((function e(){var t,a;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(In+"/get-stages");case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Jn(e){return Hn.apply(this,arguments)}function Hn(){return(Hn=Object(ee.a)(_.a.mark((function e(t){var a,n,c,r;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={stage:t},n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)},e.next=4,fetch(In+"/add-stage",n);case 4:return c=e.sent,e.next=7,c.json();case 7:return r=e.sent,e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yn(e){return qn.apply(this,arguments)}function qn(){return(qn=Object(ee.a)(_.a.mark((function e(t){var a,n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(In,"/get-people-places?stageId=").concat(t));case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $n(){return Kn.apply(this,arguments)}function Kn(){return(Kn=Object(ee.a)(_.a.mark((function e(){var t,a;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(In+"/get-all-people-places");case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qn(e,t){return Xn.apply(this,arguments)}function Xn(){return(Xn=Object(ee.a)(_.a.mark((function e(t,a){var n,c,r,s;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={stageId:t,personPlace:a},c={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)},e.next=4,fetch(In+"/add-person-place",c);case 4:return r=e.sent,e.next=7,r.json();case 7:return s=e.sent,e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zn(e,t){return _n.apply(this,arguments)}function _n(){return(_n=Object(ee.a)(_.a.mark((function e(t,a){var n,c,r,s;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={assignStageParam:JSON.stringify(t),previousStage:a&&JSON.stringify(a)},c={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)},e.next=4,fetch(In+"/assign-stage",c);case 4:return r=e.sent,e.next=7,r.json();case 7:return s=e.sent,e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ec(e,t){return tc.apply(this,arguments)}function tc(){return(tc=Object(ee.a)(_.a.mark((function e(t,a){var n,c,r,s;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={stageAssignmentId:t,dateCompleted:a},c={method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)},e.next=4,fetch(In+"/complete-stage-assignment",c);case 4:return r=e.sent,e.next=7,r.json();case 7:return s=e.sent,e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ac(e){return nc.apply(this,arguments)}function nc(){return(nc=Object(ee.a)(_.a.mark((function e(t){var a,n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(In,"/stage-history?vehicleId=").concat(t));case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cc(e){return rc.apply(this,arguments)}function rc(){return(rc=Object(ee.a)(_.a.mark((function e(t){var a,n,c,r;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={updates:t},n={method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)},e.next=4,fetch(In+"/update-stage-order",n);case 4:return c=e.sent,e.next=7,c.json();case 7:return r=e.sent,e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var sc=Object(l.a)((function(e){return{addButtons:{marginLeft:"auto"}}}));function ic(e){var t=sc(),a=Te().delay,n=e.stageSelectParent,c=e.stageSelect,s=je(),i=Object(r.useState)(""),l=Object(O.a)(i,2),o=l[0],u=l[1],d=Object(r.useState)(""),j=Object(O.a)(d,2),h=j[0],x=j[1],p=Object(r.useRef)(c.open);Object(r.useEffect)((function(){p.current=c.open}),[c.open]);var f=function(){var e=Object(ee.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u("loading"),e.next=3,a();case 3:Jn(h).then((function(e){if(s.current&&u(e.status),"success"===e.status)n.mounted.current&&p.current&&e.doc&&n.setStage({id:e.doc.id,name:e.doc.name}),c.mounted.current&&(c.setAddStage(!1),e.data&&c.setStages(e.data),c.setOpen(!1));else s.current&&x("")}),(function(e){u("failed"),console.error(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(U.jsx)(et.a,{in:c.addStage,timeout:"auto",unmountOnExit:!0,children:Object(U.jsx)(dt.a,{children:"loading"===o?Object(U.jsx)(ce,{children:Object(U.jsx)(ae.a,{})}):Object(U.jsxs)(U.Fragment,{children:["exists"===o&&Object(U.jsx)(b.a,{color:"secondary",children:"Already exists"}),"failed"===o&&Object(U.jsx)(b.a,{color:"secondary",children:"Failed to add stage"}),Object(U.jsx)(v.a,{children:Object(U.jsx)(L.a,{autoFocus:!0,fullWidth:!0,id:"add-stage-input",label:"Add Stage*",value:h,onChange:function(e){x(e.target.value)},autoComplete:"off"})}),Object(U.jsxs)("div",{className:t.addButtons,children:[Object(U.jsx)(Pe.a,{onClick:function(){return c.setAddStage(!1)},children:"Cancel"}),Object(U.jsx)(Pe.a,{onClick:h?f:function(){},disabled:!h,color:"primary",children:"Add"})]})]})})})}function lc(e){var t=Te().delay,a=e.parent,n=e.allowAddStage,c=e.className,s=e.button,i=e.TextFieldProps,l=e.ButtonProps,o=a.mounted,u=a.stage,d=a.setStage,j=je(),h=Object(r.useState)(!1),x=Object(O.a)(h,2),p=x[0],f=x[1],m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u;d({id:e.id,name:e.name}),f(!1)},v=Object(r.useState)([]),S=Object(O.a)(v,2),k=S[0],y=S[1],w=Object(r.useState)("loading"),C=Object(O.a)(w,2),N=C[0],A=C[1],P=Object(r.useCallback)(Object(ee.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A("loading"),e.next=3,t();case 3:Un().then((function(e){j.current&&e.data&&y(e.data),j.current&&A(e.status)}),(function(e){j.current&&A("failed"),console.error(e)}));case 4:case"end":return e.stop()}}),e)}))),[t,j]);Object(r.useEffect)((function(){P()}),[P]);var F,D=Object(r.useState)(!1),T=Object(O.a)(D,2),E=T[0],V=T[1];switch(Object(r.useEffect)((function(){!p&&V(!1)}),[p]),N){case"loading":F=Object(U.jsx)(ae.a,{});break;case"failed":F=Object(U.jsx)(b.a,{children:"error loading stages"});break;default:F=Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(et.a,{in:!E,timeout:"auto",unmountOnExit:!0,children:Object(U.jsxs)(dt.a,{children:[Object(U.jsx)(yt,{onClick:function(){return m({id:"",name:""})},textVal:"",selectCondition:!u.name}),Object(U.jsx)(g.a,{}),k.map((function(e){return Object(U.jsxs)("div",{children:[Object(U.jsx)(yt,{onClick:function(){return m(e)},textVal:e.name,selectCondition:e.name===u.name}),Object(U.jsx)(g.a,{})]},e.id)})),n&&Object(U.jsx)(Nt,{onClick:function(){return V(!0)},textVal:"Add Stage"})]})}),n&&Object(U.jsx)(ic,{stageSelectParent:{mounted:o,setStage:d},stageSelect:{mounted:j,setStages:y,addStage:E,setAddStage:V,open:p,setOpen:f}})]})}return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(ft,{label:s?"stage":"Stage*",id:"stage-select",value:u.name,setOpen:f,className:c,button:!!s,TextFieldProps:i,ButtonProps:l}),Object(U.jsx)(ht,{open:p,setOpen:f,flex:"success"!==N,children:F})]})}var oc=a(249),uc=a.n(oc),dc=Object(l.a)((function(e){return{emphasized:{fontStyle:"italic",paddingLeft:e.spacing(1)}}}));function jc(e){var t=dc(),a=e.onClick,n=e.selectCondition;return Object(U.jsxs)(v.a,{button:!0,onClick:a,className:t.emphasized,children:[Object(U.jsx)(k.a,{primary:n?"Show less...":"Show more..."}),n?Object(U.jsx)(uc.a,{}):Object(U.jsx)(pt.a,{})]})}var bc=Object(l.a)((function(e){return{addButtons:{marginLeft:"auto"}}}));function Oc(e){var t=bc(),a=Te().delay,n=e.personPlaceSelectParent,c=e.personPlaceSelect,s=je(),i=Object(r.useState)(""),l=Object(O.a)(i,2),o=l[0],u=l[1],d=Object(r.useState)(""),j=Object(O.a)(d,2),h=j[0],x=j[1],p=Object(r.useRef)(c.open);Object(r.useEffect)((function(){p.current=c.open}),[c.open]);var f=function(){var e=Object(ee.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u("loading"),e.next=3,a();case 3:Qn(n.stageId,h).then((function(e){if(s.current&&u(e.status),"success"===e.status)n.mounted.current&&p.current&&e.doc&&n.setPersonPlace(e.doc),c.mounted.current&&(c.setAddPersonPlace(!1),e.data&&c.setAllPeoplePlaces(e.data.allPeoplePlaces),c.setOpen(!1));else s.current&&x("")}),(function(e){u("failed"),console.error(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(U.jsx)(et.a,{in:c.addPersonPlace,timeout:"auto",unmountOnExit:!0,children:Object(U.jsx)(dt.a,{children:"loading"===o?Object(U.jsx)(ce,{children:Object(U.jsx)(ae.a,{})}):Object(U.jsxs)(U.Fragment,{children:["exists"===o&&Object(U.jsx)(b.a,{color:"secondary",children:"Already exists"}),"failed"===o&&Object(U.jsx)(b.a,{color:"secondary",children:"Failed to add person/place"}),Object(U.jsx)(v.a,{children:Object(U.jsx)(L.a,{autoFocus:!0,fullWidth:!0,id:"add-person-place-input",label:"Add Person/Place*",value:h,onChange:function(e){x(e.target.value)},autoComplete:"off"})}),Object(U.jsxs)("div",{className:t.addButtons,children:[Object(U.jsx)(Pe.a,{onClick:function(){return c.setAddPersonPlace(!1)},children:"Cancel"}),Object(U.jsx)(Pe.a,{onClick:h?f:function(){},disabled:!h,color:"primary",children:"Add"})]})]})})})}function hc(e){var t=Te().delay,a=e.parent,n=e.allowAddPersonPlace,c=e.className,s=e.button,i=e.TextFieldProps,l=e.ButtonProps,o=a.mounted,u=a.stage,d=a.personPlace,j=a.setPersonPlace,h=je(),x=Object(r.useState)(!1),p=Object(O.a)(x,2),f=p[0],m=p[1],v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d;j(e),m(!1)},S=Object(r.useState)([]),k=Object(O.a)(S,2),y=k[0],w=k[1],C=Object(r.useState)("loading"),N=Object(O.a)(C,2),A=N[0],P=N[1],F=Object(r.useCallback)(Object(ee.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P("loading"),e.next=3,t();case 3:Yn(u.id).then((function(e){h.current&&e.data&&w(e.data),h.current&&P(e.status)}),(function(e){h.current&&P("failed"),console.error(e)}));case 4:case"end":return e.stop()}}),e)}))),[t,h,u.id]);Object(r.useEffect)((function(){j({id:"",name:""}),u.id&&F()}),[j,F,u.id]);var D=Object(r.useState)([]),T=Object(O.a)(D,2),E=T[0],V=T[1],B=Object(r.useState)("loading"),M=Object(O.a)(B,2),I=M[0],L=M[1],z=Object(r.useCallback)(Object(ee.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return L("loading"),e.next=3,t();case 3:$n().then((function(e){h.current&&e.data&&V(e.data),h.current&&L(e.status)}),(function(e){h.current&&L("failed"),console.error(e)}));case 4:case"end":return e.stop()}}),e)}))),[t,h]);Object(r.useEffect)((function(){z()}),[z]);var R,W=Object(r.useState)(!1),G=Object(O.a)(W,2),J=G[0],H=G[1],Y=Object(r.useState)(!1),q=Object(O.a)(Y,2),$=q[0],K=q[1];switch(Object(r.useEffect)((function(){!f&&K(!1),!f&&H(!1)}),[f]),A||I){case"loading":R=Object(U.jsx)(ae.a,{});break;case"failed":R=Object(U.jsx)(b.a,{children:"error loading People/Places"});break;default:R=Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(et.a,{in:!$,timeout:"auto",unmountOnExit:!0,children:Object(U.jsxs)(dt.a,{children:[Object(U.jsx)(yt,{onClick:function(){return v({id:"",name:""})},textVal:"",selectCondition:!d.name}),Object(U.jsx)(g.a,{}),y.map((function(e){return Object(U.jsxs)("div",{children:[Object(U.jsx)(yt,{onClick:function(){return v(e)},textVal:e.name,selectCondition:e.name===d.name}),Object(U.jsx)(g.a,{})]},e.id)})),Object(U.jsx)(jc,{onClick:function(){return H(!J)},selectCondition:J}),Object(U.jsxs)(et.a,{in:J,timeout:"auto",children:[E.filter((function(e){return!y.find((function(t){return t.id===e.id}))})).map((function(e){return Object(U.jsx)("div",{children:Object(U.jsx)(yt,{onClick:function(){return v(e)},textVal:e.name,selectCondition:e.name===d.name})},e.id)})),n&&Object(U.jsx)(Nt,{onClick:function(){return K(!0)},textVal:"Add Person/Place"})]})]})}),n&&Object(U.jsx)(Oc,{personPlaceSelectParent:{mounted:o,stageId:u.id,setPersonPlace:j},personPlaceSelect:{mounted:h,addPersonPlace:$,setAddPersonPlace:K,setAllPeoplePlaces:V,setPeoplePlaces:w,open:f,setOpen:m}})]})}return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(ft,{label:s?"person/place":"Person/Place*",id:"person-place-select",value:d.name,setOpen:m,className:c,button:!!s,TextFieldProps:i,ButtonProps:l,disabled:!u.id}),Object(U.jsx)(ht,{open:f,setOpen:m,flex:"success"!==A||"success"!==I,children:R})]})}var xc=a(19),pc=a(250),fc=a.n(pc),mc=Object(l.a)((function(e){return{taskList:{outline:"1px solid #D3D3D3",margin:"auto",marginTop:e.spacing(0),backgroundColor:"#F8F8F8"},listItem:{wordWrap:"break-word"}}}));function gc(e){var t,a,n=mc(),c=e.taskList,s=e.setTaskList,i=e.className,l=Object(r.useState)(""),o=Object(O.a)(l,2),u=o[0],d=o[1];return t=c.length>0?Object(U.jsx)("div",{className:i,children:Object(U.jsx)(dt.a,{className:n.taskList,children:c.map((function(e,t){return Object(U.jsxs)(v.a,{alignItems:"flex-start",children:[Object(U.jsx)(k.a,{className:n.listItem,children:Object(U.jsx)("div",{className:n.listItem,children:e})}),Object(U.jsx)(x.a,{onClick:function(){return function(e){var t=Object(xc.a)(c);t.splice(e,1),s(t)}(t)},size:"small",children:Object(U.jsx)(fc.a,{})})]},e+Math.random())}))})}):Object(U.jsx)(U.Fragment,{}),a=u?Object(U.jsx)(x.a,{onClick:function(){s([].concat(Object(xc.a)(c),[u])),d("")},size:"large",children:Object(U.jsx)(N.a,{})}):Object(U.jsx)(x.a,{disabled:!0,size:"large",children:Object(U.jsx)(N.a,{})}),Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(L.a,{className:i&&i,label:"Add Task",variant:"outlined",value:u,onChange:function(e){d(e.target.value)},InputProps:{endAdornment:Object(U.jsx)(z.a,{position:"end",children:a})}}),t]})}function vc(e){var t=e.classes,a=e.addVehicleState,n=e.mounted,c=a.stage,s=a.setStage,i=a.personPlace,l=a.setPersonPlace,o=a.taskList,u=a.setTaskList,d=a.addVehicleStatus,j=Object(r.useState)(!1),b=Object(O.a)(j,2),h=b[0],x=b[1];return Object(r.useEffect)((function(){d&&x(!1)}),[d]),Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(Pe.a,{className:t.inputField,startIcon:h?Object(U.jsx)(Mn.a,{}):Object(U.jsx)(N.a,{}),onClick:function(){h&&x(!1),!h&&x(!0)},children:"Stage Assignment"}),Object(U.jsx)(et.a,{in:h,timeout:"auto",sx:{width:"100%"},children:Object(U.jsxs)("div",{className:t.form,children:[Object(U.jsx)(lc,{className:t.inputField,parent:{mounted:n,stage:c,setStage:s},allowAddStage:!0}),Object(U.jsx)(hc,{className:t.inputField,parent:{mounted:n,stage:c,personPlace:i,setPersonPlace:l},allowAddPersonPlace:!0}),Object(U.jsx)(gc,{className:t.inputField,taskList:o,setTaskList:u})]})})]})}var Sc=a(92),kc=a.n(Sc);function yc(e){var t=e.classes,a=e.addVehicleState,n=a.notes,c=a.setNotes,s=a.addVehicleStatus,i=Object(r.useState)(!1),l=Object(O.a)(i,2),o=l[0],u=l[1];return Object(r.useEffect)((function(){s&&u(!1)}),[s]),Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(Pe.a,{className:t.inputField,startIcon:o?Object(U.jsx)(Mn.a,{}):Object(U.jsx)(kc.a,{}),onClick:function(){o&&u(!1),!o&&u(!0)},children:"Notes"}),Object(U.jsx)(et.a,{in:o,timeout:"auto",style:{width:"100%"},children:Object(U.jsx)("div",{className:t.form,children:Object(U.jsx)(L.a,{className:t.inputField,multiline:!0,maxRows:4,variant:"outlined",label:"Notes",value:n,onChange:function(e){c(e.target.value)}})})})]})}function wc(e){var t=e.addVehicleState,a=e.addVehicleClick,n=e.className,c=t.stockOkay,r=t.year,s=t.make,i=t.model,l=t.stage,o=t.personPlace;return"loading"===t.addVehicleStatus?Object(U.jsx)(ae.a,{style:{width:"25px",margin:"auto"}}):c&&r&&s.id&&i.id&&l.id&&o.id?Object(U.jsx)(Na.a,{className:n||"",children:Object(U.jsx)(Pe.a,{variant:"contained",color:"primary",onClick:a,children:"ADD"})}):Object(U.jsx)(Na.a,{className:n||"",children:Object(U.jsx)(Pe.a,{variant:"contained",color:"primary",disabled:!0,children:"ADD"})})}var Cc=Object(l.a)((function(e){return{title:{color:e.titleColor.darkBlue},dialog:{padding:10,textAlign:"center",maxWidth:500},button:{width:120,margin:5}}}));function Nc(e){var t=Cc(),a=Object(i.g)(),n=e.open,c=e.addVehicleState,r=c.setAddVehicleStatus,s=c.addedVehicle;return Object(U.jsx)(jt.a,{"aria-labelledby":"add-vehicle-dialog",open:n,disableEscapeKeyDown:!0,children:Object(U.jsxs)("div",{className:t.dialog,children:[Object(U.jsx)(wa.a,{id:"add-vehicle-dialog",className:t.title,children:"Successfully Added:"}),s?Object(U.jsx)(Ya,{vehicle:s,variant:"subtitle1"}):Object(U.jsx)(U.Fragment,{}),Object(U.jsx)("br",{}),Object(U.jsx)(g.a,{}),Object(U.jsx)(b.a,{variant:"subtitle1",children:"What next?"}),Object(U.jsx)(Pe.a,{onClick:function(){r(""),a.push("/add-vehicle")},className:t.button,color:"primary",startIcon:Object(U.jsx)(N.a,{}),variant:"outlined",size:"small",children:"ANOTHER"}),Object(U.jsx)(Pe.a,{onClick:function(){r(""),a.push("/all-vehicles/active/asc/10/first/0")},className:t.button,color:"primary",variant:"outlined",size:"small",children:"DONE"})]})})}var Ac=Object(l.a)((function(e){return{title:{color:e.titleColor.darkBlue},dialog:{padding:10,textAlign:"center",maxWidth:500},button:{width:120,margin:5}}}));function Pc(e){var t=Ac(),a=Object(i.g)(),n=e.open,c=e.addVehicleClick,r=e.addVehicleState.setAddVehicleStatus;return Object(U.jsx)(jt.a,{"aria-labelledby":"add-vehicle-dialog",open:n,children:Object(U.jsxs)("div",{className:t.dialog,children:[Object(U.jsx)(wa.a,{id:"add-vehicle-dialog",className:t.title,children:"Failed to Add Vehicle"}),Object(U.jsx)("br",{}),Object(U.jsx)(g.a,{}),Object(U.jsx)(b.a,{variant:"subtitle1",children:"What next?"}),Object(U.jsx)(Pe.a,{className:t.button,onClick:function(){r(""),a.push("/all-vehicles/active/asc/10/first/0")},variant:"outlined",size:"small",children:"CANCEL"}),Object(U.jsx)(Pe.a,{className:t.button,onClick:c,variant:"outlined",size:"small",children:"TRY AGAIN"})]})})}var Fc=Object(l.a)((function(e){return{form:{marginTop:e.spacing(1),margin:"auto",width:"clamp(200px, 100%, 400px)",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},inputField:{marginTop:e.spacing(1),marginBottom:e.spacing(1),margin:"auto",width:"clamp(200px, 100%, 300px)"}}}));function Dc(){var e=Fc(),t=je(),a=Be().userPreferences,n=Te().delay,c=a.defaultStageAssignment,s=Object(r.useState)(""),i=Object(O.a)(s,2),l=i[0],o=i[1],u=Object(r.useState)(!0),d=Object(O.a)(u,2),j=d[0],b=d[1],h=Object(r.useState)(""),x=Object(O.a)(h,2),p=x[0],f=x[1],m=Object(r.useState)(""),g=Object(O.a)(m,2),v=g[0],S=g[1],k=Object(r.useState)({id:"",name:""}),y=Object(O.a)(k,2),w=y[0],C=y[1],N=Object(r.useState)({id:"",name:""}),A=Object(O.a)(N,2),P=A[0],F=A[1],D=Object(r.useState)({id:"",name:""}),T=Object(O.a)(D,2),E=T[0],V=T[1],B=Object(r.useState)({id:"",name:""}),M=Object(O.a)(B,2),I=M[0],L=M[1],z=Object(r.useState)({id:"",name:""}),R=Object(O.a)(z,2),W=R[0],G=R[1],J=Object(r.useState)([]),H=Object(O.a)(J,2),Y=H[0],q=H[1],$=Object(r.useState)(""),K=Object(O.a)($,2),Q=K[0],X=K[1],Z=Object(r.useState)(""),te=Object(O.a)(Z,2),ae=te[0],ne=te[1],re=Object(r.useState)(null),se=Object(O.a)(re,2),ie=se[0],le=se[1];Object(r.useEffect)((function(){I.id||L(c.stage)}),[c,I]),Object(r.useEffect)((function(){I===c.stage&&(""!==ae&&"success"!==ae||G(c.personPlace))}),[c,I,ae]);var oe={stock:l,setStock:o,stockOkay:j,setStockOkay:b,stockError:p,setStockError:f,year:v,setYear:S,make:w,setMake:C,model:P,setModel:F,trim:E,setTrim:V,stage:I,setStage:L,personPlace:W,setPersonPlace:G,taskList:Y,setTaskList:q,notes:Q,setNotes:X,addVehicleStatus:ae,setAddVehicleStatus:ne,addedVehicle:ie,setAddedVehicle:le},ue=function(){var e=Object(ee.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ne("loading"),e.next=3,n();case 3:Wt(l).then((function(e){t.current&&e.data&&e.data.exists?(ne(""),f("stk# already exists")):ta({stock:""!==l?parseInt(l):0,year:parseInt(v),make:w,model:P,trim:E,notes:Q||""},{stage:I,personPlace:W,tasks:Y}).then((function(e){t.current&&ne(e.status),"success"===e.status&&(t.current&&le(e.doc),o(""),b(!0),f(""),S(""),C({id:"",name:""}),F({id:"",name:""}),V({id:"",name:""}),L({id:"",name:""}),G({id:"",name:""}),q([]),X("")),"failed"===e.status&&console.error(e)}),(function(e){t.current&&ne("failed"),console.error(e)}))}),(function(e){t.current&&ne("failed"),console.error(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),de=Object(r.useState)(!1),be=Object(O.a)(de,2),Oe=be[0],he=be[1];Object(r.useEffect)((function(){he("success"===ae)}),[ae,ie]);var xe=Object(r.useState)(!1),pe=Object(O.a)(xe,2),fe=pe[0],me=pe[1];return Object(r.useEffect)((function(){me("failed"===ae)}),[ae]),Object(U.jsx)(U.Fragment,{children:Object(U.jsx)("form",{autoComplete:"off",children:Object(U.jsxs)(ce,{flexDirection:"column",children:[Object(U.jsx)(Fn.a,{children:"*required field"}),Object(U.jsx)(Vn,{mounted:t,addVehicleState:oe,classes:e}),Object(U.jsx)(vc,{mounted:t,addVehicleState:oe,classes:e}),Object(U.jsx)(yc,{mounted:t,addVehicleState:oe,classes:e}),Object(U.jsx)(wc,{className:e.inputField,addVehicleState:oe,addVehicleClick:ue}),Object(U.jsx)(Nc,{open:Oe,addVehicleState:oe}),Object(U.jsx)(Pc,{open:fe,addVehicleClick:ue,addVehicleState:oe})]})})})}var Tc=Object(l.a)((function(e){return{addVehicle:{margin:"auto"}}}));function Ec(){var e=Tc();return Object(U.jsx)(Je,{className:e.addVehicle,children:Object(U.jsxs)(Qe,{children:[Object(U.jsxs)(Ye,{children:[Object(U.jsx)($e,{icon:Object(U.jsx)(N.a,{color:"primary"}),variant:"h5",children:"Add Vehicle"}),Object(U.jsx)(g.a,{})]}),Object(U.jsx)(Xe,{children:Object(U.jsx)(Dc,{})})]})})}function Vc(){return Object(U.jsx)(Ge,{children:Object(U.jsxs)(Ke,{children:[Object(U.jsxs)(Ye,{children:[Object(U.jsx)(za.a,{}),Object(U.jsx)(za.a,{})]}),Object(U.jsx)(g.a,{}),Object(U.jsx)(za.a,{variant:"rectangular",height:300})]})})}var Bc=a(251),Mc=a.n(Bc),Ic=a(252),Lc=a.n(Ic),zc=a(142),Rc=a.n(zc);function Wc(e){var t=Te().delay,a=e.vehicleDetailState,n=e.mounted,c=a.vehicle,s=a.setVehicle,i=a.setUpdateVehicleStatus,l=Object(r.useState)(null),o=Object(O.a)(l,2),u=o[0],d=o[1],j=function(){var e=Object(ee.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i("loading"),e.next=3,t();case 3:c&&na(c.id,{status:"trash"}).then((function(e){n.current&&i(e.status),"success"===e.status&&n.current&&s(e.doc),"failed"===e.status&&console.error(e)}),(function(e){n.current&&i("failed"),console.error(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Object(ee.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i("loading"),e.next=3,t();case 3:c&&ra(c.id,c.currentStage.id,Date.now()).then((function(e){n.current&&i(e.status),"success"===e.status&&n.current&&s(e.doc),"failed"===e.status&&console.error(e)}),(function(e){n.current&&i("failed"),console.error(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(U.jsxs)("div",{children:[Object(U.jsx)(x.a,{"aria-controls":"action-menu","aria-haspopup":"true",onClick:function(e){d(e.currentTarget)},size:"large",children:Object(U.jsx)(Mc.a,{})}),Object(U.jsxs)(Q.a,{id:"action-menu",anchorEl:u,keepMounted:!0,open:Boolean(u),onClose:function(){d(null)},children:[Object(U.jsxs)(X.a,{onClick:j,children:[Object(U.jsxs)(S.a,{children:[Object(U.jsx)(Lc.a,{})," "]}),Object(U.jsx)(k.a,{children:"Trash"})]}),c&&"sold"!==c.status&&Object(U.jsxs)(X.a,{onClick:b,children:[Object(U.jsxs)(S.a,{children:[Object(U.jsx)(Rc.a,{})," "]}),Object(U.jsx)(k.a,{children:"Sell"})]})]})]})}var Uc=a(93),Gc=a(506),Jc=a(539),Hc=Object(yn.a)({root:{"&$selected":{backgroundColor:"#F5F5F5"}},selected:{}})(Jc.a),Yc=a(253),qc=a.n(Yc);function $c(e){var t=je(),a=Te().delay,n=e.vehicleDetailState,c=e.assignStageState,s=c.stage,i=c.personPlace,l=c.taskList,o=n.mounted,u=n.vehicle,d=n.setVehicle,j=null===u||void 0===u?void 0:u.id,b=null===u||void 0===u?void 0:u.currentStage,h=null===u||void 0===u?void 0:u.dateOnLot,x=Object(r.useState)(""),p=Object(O.a)(x,2),f=p[0],m=p[1],g=function(){var e=Object(ee.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m("loading"),e.next=3,a();case 3:j&&b&&Zn({vehicleId:j,stage:s,personPlace:i,tasks:l,dateAssigned:Date.now(),dateOnLot:h},b).then((function(e){t.current&&m(e.status),"success"===e.status&&o.current&&d(e.doc),"failed"===e.status&&console.error(e)}),(function(e){t.current&&m("failed"),console.error(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=Object(U.jsx)(Pe.a,{onClick:g,variant:"contained",color:"primary",disableElevation:!0,children:"Assign Now"}),S=Object(U.jsx)(Pe.a,{variant:"contained",color:"primary",disableElevation:!0,disabled:!0,children:"Assign Now"});return Object(U.jsx)(Na.a,{children:"loading"===f?Object(U.jsx)(ae.a,{size:50}):j&&s.name&&i.name?v:S})}var Kc=Object(l.a)((function(e){return{inputField:{marginTop:e.spacing(1),marginBottom:e.spacing(1),margin:"auto",width:"clamp(200px, 100%, 300px)"}}}));function Qc(e){var t=je(),a=Kc(),n=e.vehicleDetailState,c=Object(r.useState)({id:"",name:""}),s=Object(O.a)(c,2),i=s[0],l=s[1],o=Object(r.useState)({id:"",name:""}),u=Object(O.a)(o,2),d=u[0],j=u[1],b=Object(r.useState)([]),h=Object(O.a)(b,2),x=h[0],p=h[1],f={stage:i,personPlace:d,taskList:x};return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(lc,{className:a.inputField,parent:{mounted:t,stage:i,setStage:l},allowAddStage:!0}),Object(U.jsx)(hc,{className:a.inputField,parent:{mounted:t,stage:i,personPlace:d,setPersonPlace:j},allowAddPersonPlace:!0}),Object(U.jsx)(gc,{className:a.inputField,taskList:x,setTaskList:p}),Object(U.jsx)("br",{}),Object(U.jsx)($c,{vehicleDetailState:n,assignStageState:f})]})}var Xc=Object(l.a)((function(e){return{sellButton:{width:125,backgroundColor:e.palette.success.main,color:"white","&:hover":{backgroundColor:e.palette.success.dark}},reassignButton:{width:125}}}));function Zc(e){var t=je(),a=Xc(),n=Te().delay,c=e.vehicleDetailState,s=c.mounted,i=c.vehicle,l=c.setVehicle,o=null===i||void 0===i?void 0:i.currentStage.id,u=Object(r.useState)(""),d=Object(O.a)(u,2),j=d[0],b=d[1],h=Object(r.useState)(""),x=Object(O.a)(h,2),p=x[0],f=x[1],m=function(){var e=Object(ee.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f("loading"),e.next=3,n();case 3:o&&ec(o,Date.now()).then((function(e){t.current&&f(e.status),"success"===e.status&&s&&e.data&&l(e.data),"failed"===e.status&&console.error(e)}),(function(e){t.current&&f("failed"),console.error(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(ee.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b("loading"),e.next=3,n();case 3:i&&ra(i.id,i.currentStage.id,Date.now()).then((function(e){t.current&&b(e.status),"success"===e.status&&s.current&&l(e.doc),"failed"===e.status&&console.error(e)}),(function(e){t.current&&b("failed"),console.error(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return"failed"===p?Object(U.jsx)(Fe,{errorMessage:"Failed to re-assign vehicle",retryAction:m}):"failed"===j?Object(U.jsx)(Fe,{errorMessage:"Failed to sell vehicle",retryAction:g}):Object(U.jsx)(ne.a,{m:1,children:"loading"===j||"loading"===p?Object(U.jsx)(ae.a,{size:50}):o&&Object(U.jsxs)(cn.a,{children:[Object(U.jsx)(Pe.a,{className:a.reassignButton,onClick:m,variant:"outlined",children:"re-assign"}),Object(U.jsx)(Pe.a,{className:a.sellButton,startIcon:Object(U.jsx)(Rc.a,{}),onClick:g,variant:"contained",disableElevation:!0,children:"Sell"})]})})}function _c(e){var t=je(),a=Te().delay,n=e.vehicleDetailState,c=n.mounted,s=n.vehicle,i=n.setVehicle,l=null===s||void 0===s?void 0:s.currentStage.id,o=Object(r.useState)(""),u=Object(O.a)(o,2),d=u[0],j=u[1],b=function(){var e=Object(ee.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j("loading"),e.next=3,a();case 3:l&&ec(l,Date.now()).then((function(e){t.current&&j(e.status),"success"===e.status&&c&&e.data&&i(e.data),"failed"===e.status&&console.error(e)}),(function(e){t.current&&j("failed"),console.error(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return"failed"===d?Object(U.jsx)(Fe,{errorMessage:"Failed to complete stage",retryAction:b}):Object(U.jsx)(ne.a,{m:1,children:"loading"===d?Object(U.jsx)(ae.a,{size:50}):l&&Object(U.jsx)(Pe.a,{onClick:b,variant:"contained",color:"primary",disableElevation:!0,children:"Complete"})})}var er=Object(W.a)(ne.a)((function(e){e.theme;return{display:"flex",p:1,justifyContent:"center",alignItems:"center",alignContent:"start",flexDirection:"column",margin:"auto",width:"clamp(200px, 100%, 600px)",minHeight:"200px"}})),tr=Object(l.a)((function(e){return{sold:{color:e.palette.success.main},content:{width:"clamp(200px, 100%, 500px)"},flexDivider:{width:"clamp(200px, 100%, 400px)",height:1,margin:"auto",marginTop:5}}}));function ar(e){var t=tr(),a=e.vehicleDetailState,n=a.vehicle,c=null===n||void 0===n?void 0:n.currentStage,r=null===c||void 0===c?void 0:c.stage.name,s=null===c||void 0===c?void 0:c.personPlace.name,i=(null===n||void 0===n?void 0:n.dateSold)&&new Date(n.dateSold);return Object(U.jsx)(Xe,{children:Object(U.jsxs)(er,{children:[Object(U.jsxs)(ce,{flexDirection:"column",className:t.content,children:["sold"===(null===n||void 0===n?void 0:n.status)?Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(b.a,{className:t.sold,variant:"h6",children:Object(U.jsx)("strong",{children:"Sold"})}),Object(U.jsx)(b.a,{variant:"subtitle1",children:i&&i.toLocaleDateString()})]}):"complete"===(null===c||void 0===c?void 0:c.status)?Object(U.jsx)(U.Fragment,{children:Object(U.jsx)(b.a,{variant:"h6",color:"primary",children:Object(U.jsx)("strong",{children:"Assign"})})}):Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(b.a,{variant:"h6",color:"primary",children:Object(U.jsx)("strong",{children:r})}),Object(U.jsx)(b.a,{variant:"h6",children:s})]}),"sold"!==(null===n||void 0===n?void 0:n.status)&&Object(U.jsx)(g.a,{className:t.flexDivider,flexItem:!0})]}),"sold"===(null===n||void 0===n?void 0:n.status)?Object(U.jsx)(U.Fragment,{}):"Assign"===r||"complete"===(null===c||void 0===c?void 0:c.status)?Object(U.jsx)(Qc,{vehicleDetailState:a}):"For Sale"===r?Object(U.jsx)(Zc,{vehicleDetailState:a}):Object(U.jsxs)(U.Fragment,{children:[n&&n.currentStage.tasks.length>=1&&Object(U.jsxs)(ce,{sx:{flexDirection:"column",width:"clamp(200px, 100%, 400px)"},children:[Object(U.jsx)(b.a,{sx:{textAlign:"center"},children:"Tasks:"}),Object(U.jsx)(dt.a,{dense:!0,sx:{paddingLeft:3,paddingRight:3},children:null===n||void 0===n?void 0:n.currentStage.tasks.map((function(e){return Object(U.jsxs)(v.a,{disablePadding:!0,sx:{overflowWrap:"break-word"},children:[Object(U.jsx)(S.a,{children:Object(U.jsx)(qc.a,{})}),Object(U.jsx)(k.a,{primary:e})]},e[0]+Math.random().toString())}))}),Object(U.jsx)(g.a,{flexItem:!0})]}),Object(U.jsx)(_c,{vehicleDetailState:a})]})]})})}var nr=a(541),cr=a(542),rr=a(544),sr=a(540),ir=a(543),lr=a(254),or=a.n(lr),ur=Object(l.a)((function(e){return{table:{width:"clamp(200px, 100%, 400px)"},chip:{minWidth:95}}}));function dr(e){var t=ur(),a=e.vehicle,n=a.status,c=a.currentStage,r=a.dateAdded,s=a.reconditionTime,i=a.forSaleTime,l=a.dateOnLot,o=a.totalSellTime,u=c.stage.name,d=s?Object(U.jsx)(Za,{milliseconds:s}):Object(U.jsx)(Za,{milliseconds:Date.now()-r}),j=c.completeTime?Object(U.jsx)(Za,{milliseconds:c.completeTime}):Object(U.jsx)(Za,{milliseconds:Date.now()-c.dateAssigned}),O=i&&Object(U.jsx)(Za,{milliseconds:i}),h=o&&Object(U.jsx)(Za,{milliseconds:o});return Object(U.jsx)(Xe,{children:Object(U.jsxs)(er,{children:[Object(U.jsxs)(ce,{style:{gap:10},children:[Object(U.jsx)(or.a,{color:"primary"}),Object(U.jsx)(b.a,{variant:"h6",color:"primary",children:Object(U.jsx)("strong",{children:"Duration Statistics:"})})]}),Object(U.jsx)(sr.a,{component:Ue.a,className:t.table,children:Object(U.jsx)(nr.a,{"aria-label":"stats table",children:Object(U.jsxs)(cr.a,{children:[Object(U.jsxs)(ir.a,{children:[Object(U.jsx)(rr.a,{component:"th",scope:"row",align:"left",children:"Total Reconditioning:"}),Object(U.jsx)(rr.a,{align:"right",children:Object(U.jsx)(Ka,{className:t.chip,color:l?"primary":"default",label:d})})]}),"sold"!==n?Object(U.jsxs)(ir.a,{children:[Object(U.jsxs)(rr.a,{component:"th",scope:"row",align:"left",children:[u,":"]}),Object(U.jsx)(rr.a,{align:"right",children:Object(U.jsx)(Ka,{className:t.chip,color:"complete"===c.status?"primary":"Assign"===c.stage.name?"secondary":"default",label:j})})]}):i?Object(U.jsxs)(ir.a,{children:[Object(U.jsx)(rr.a,{component:"th",scope:"row",align:"left",children:"For Sale:"}),Object(U.jsx)(rr.a,{align:"right",children:Object(U.jsx)(Ka,{className:t.chip,color:"primary",label:O})})]}):Object(U.jsx)(U.Fragment,{}),"sold"===n&&Object(U.jsxs)(ir.a,{children:[Object(U.jsx)(rr.a,{component:"th",scope:"row",align:"left",children:"Total Time to Sell:"}),Object(U.jsx)(rr.a,{align:"right",children:Object(U.jsx)(_a,{className:t.chip,color:"primary",label:h})})]}),Object(U.jsx)(ir.a,{children:Object(U.jsx)(rr.a,{align:"right",size:"small",colSpan:2,children:Object(U.jsxs)(se,{children:[Object(U.jsx)($a.a,{label:"incomplete",size:"small"}),Object(U.jsx)($a.a,{label:"complete",size:"small",color:"primary"})]})})})]})})})]})})}var jr=["children","value","index"];function br(e){var t=e.children,a=e.value,n=e.index,c=Object(Uc.a)(e,jr);return Object(U.jsx)("div",Object(Re.a)(Object(Re.a)({role:"tabpanel",hidden:a!==n,id:"stage-tabpanel-".concat(n),"aria-labelledby":"stage-tab-".concat(n)},c),{},{children:a===n&&Object(U.jsx)("div",{children:t})}))}function Or(e){return{id:"stage-tab-".concat(e),"aria-controls":"vehicle-tabpanel-".concat(e)}}function hr(e){var t=e.vehicleDetailState,a=t.vehicle,n=Object(r.useState)("current"),c=Object(O.a)(n,2),s=c[0],i=c[1];return Object(U.jsxs)("div",{children:[Object(U.jsxs)(Gc.a,{centered:!0,value:s,indicatorColor:"primary",textColor:"primary",onChange:function(e,t){i(t)},"aria-label":"current stage navigation",children:[Object(U.jsx)(Hc,Object(Re.a)({label:"Current Stage",value:"current"},Or("current"))),Object(U.jsx)(Hc,Object(Re.a)({label:"Duration Stats",value:"stats"},Or("stats")))]}),Object(U.jsx)(br,{value:s,index:"current",children:Object(U.jsx)(ar,{vehicleDetailState:t})}),Object(U.jsx)(br,{value:s,index:"stats",children:a&&Object(U.jsx)(dr,{vehicle:a})})]})}function xr(e){var t,a=e.editVehicleState,n=e.setEdit,c=e.className,r=Te().delay,s=a.vehicleDetailsMounted,i=a.mounted,l=a.vehicleId,o=a.stock,u=a.stockOkay,d=a.setStockError,j=a.editStock,b=a.year,O=a.editYear,h=a.make,x=a.editMake,p=a.model,f=a.editModel,m=a.trim,g=a.editTrim,v=a.dateAdded,S=a.editDateAdded,k=a.dateSold,y=a.editDateSold,w=a.editVehicleStatus,C=a.setEditVehicleStatus,N=a.setVehicle,A=function(){var e={stock:parseInt(j),year:parseInt(O),make:x,model:f,trim:g,dateAdded:S,dateSold:k&&y};na(l,e).then((function(e){i.current&&C(e.status),"success"===e.status&&(s.current&&N(e.doc),i&&n(!1)),"failed"===e.status&&console.error(e)}),(function(e){i.current&&C("failed"),console.error(e)}))},P=function(){var e=Object(ee.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C("loading"),e.next=3,r();case 3:o===j?A():Wt(j).then((function(e){i.current&&e.data&&e.data.exists?(C(""),d("stk# already exists")):A()}),(function(e){i.current&&C("failed"),console.error(e)}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=Object(U.jsx)(Pe.a,{variant:"contained",color:"primary",onClick:P,children:"Update"}),D=Object(U.jsx)(Pe.a,{variant:"contained",color:"primary",disabled:!0,children:"Update"});return t="loading"===w?Object(U.jsx)(ae.a,{size:25}):k?(o!==j||b!==O||h!==x||p!==f||m!==g||v!==S||k!==y)&&u&&O&&x.id&&f.id&&S?F:D:(o!==j||b!==O||h!==x||p!==f||m!==g||v!==S)&&u&&O&&x.id&&f.id&&S?F:D,Object(U.jsxs)(re,{className:c||"",children:[Object(U.jsx)(Pe.a,{variant:"contained",onClick:function(){return n(!1)},children:"Cancel"}),t]})}function pr(e){var t=je(),a=e.vehicleDetailsMounted,n=e.vehicle,c=e.setVehicle,s=e.setEdit,i=e.inputFieldStyle,l=n.id,o=n.stock,u=n.year,d=n.make,j=n.model,b=n.trim,h=n.dateAdded,x=n.dateSold,p=Object(r.useState)(o.toString()),f=Object(O.a)(p,2),m=f[0],g=f[1],v=Object(r.useState)(!0),S=Object(O.a)(v,2),k=S[0],y=S[1],w=Object(r.useState)(""),C=Object(O.a)(w,2),N=C[0],A=C[1],P=Object(r.useState)(u.toString()),F=Object(O.a)(P,2),D=F[0],T=F[1],E=Object(r.useState)(d),V=Object(O.a)(E,2),B=V[0],M=V[1],I=Object(r.useState)({id:"",name:""}),z=Object(O.a)(I,2),R=z[0],W=z[1],G=Object(r.useState)({id:"",name:""}),J=Object(O.a)(G,2),H=J[0],Y=J[1],q=Object(r.useState)(h),$=Object(O.a)(q,2),K=$[0],Q=$[1],X=Object(r.useState)(x||0),Z=Object(O.a)(X,2),_=Z[0],ee=Z[1],te=Object(r.useState)(""),ae=Object(O.a)(te,2),ne=ae[0],ce=ae[1];Object(r.useEffect)((function(){W(B===d?j:{id:"",name:""})}),[B,d,j]),Object(r.useEffect)((function(){Y(R===j?b:{id:"",name:""})}),[R,j,b]);var re={stock:m,setStock:g,stockOkay:k,setStockOkay:y,stockError:N,setStockError:A,addEditVehicleStatus:ne},se={vehicleDetailsMounted:a,mounted:t,vehicleId:l,stock:o.toString(),editStock:m,stockOkay:k,setStockOkay:y,setStockError:A,year:u.toString(),editYear:D,make:d,editMake:B,model:j,editModel:R,trim:b,editTrim:H,dateAdded:h,editDateAdded:K,dateSold:x,editDateSold:_,editVehicleStatus:ne,setEditVehicleStatus:ce,setVehicle:c};return"failed"===ne?Object(U.jsx)(Fe,{errorMessage:"Failed to update vehicle info"}):Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(En,{className:i,editStockState:re}),Object(U.jsx)(wt,{className:i,year:D,setYear:T}),Object(U.jsx)(da,{className:i,parent:{mounted:t,make:B,setMake:M},allowAddMake:!0}),Object(U.jsx)(Oa,{className:i,parent:{mounted:t,make:B,model:R,setModel:W},allowAddModel:!0}),Object(U.jsx)(pa,{className:i,parent:{mounted:t,make:B,model:R,trim:H,setTrim:Y},allowAddTrim:!0}),Object(U.jsxs)(va.b,{dateAdapter:ga.a,children:[Object(U.jsx)(Na.a,{className:i,children:Object(U.jsx)(Sa.a,{label:"Date Added",value:K,onChange:function(e){e&&Q(e.getTime())},renderInput:function(e){return Object(U.jsx)(L.a,Object(Re.a)({},e))},maxDate:new Date})}),x&&x>0&&Object(U.jsx)(Na.a,{className:i,children:Object(U.jsx)(Sa.a,{label:"Date Sold",value:_,onChange:function(e){e&&ee(e.getTime())},renderInput:function(e){return Object(U.jsx)(L.a,Object(Re.a)({},e))},minDate:new Date(K),maxDate:new Date})})]}),Object(U.jsx)(xr,{className:i,editVehicleState:se,setEdit:s})]})}var fr=Object(W.a)(L.a)((function(e){e.theme;return{"&.MuiTextField-root":{"& .Mui-disabled":{WebkitTextFillColor:"black","& .label":{WebkitTextFillColor:"gray"}}}}}));function mr(e){var t=e.vehicle,a=e.inputFieldStyle,n=t.stock,c=t.year,r=t.make.name,s=t.model.name,i=t.trim.name,l=new Date(t.dateAdded).toLocaleDateString("en-us",{year:"numeric",month:"2-digit",day:"2-digit"}),o=t.dateSold&&new Date(t.dateSold).toLocaleDateString("en-us",{year:"numeric",month:"2-digit",day:"2-digit"});return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(fr,{disabled:!0,className:a,label:Object(U.jsx)("span",{className:"label",children:"Stock #"}),value:n>0?n:" "}),Object(U.jsx)(fr,{disabled:!0,className:a,label:Object(U.jsx)("span",{className:"label",children:"Year"}),value:c}),Object(U.jsx)(fr,{disabled:!0,className:a,label:Object(U.jsx)("span",{className:"label",children:"Make"}),value:r}),Object(U.jsx)(fr,{disabled:!0,className:a,label:Object(U.jsx)("span",{className:"label",children:"Model"}),value:s}),Object(U.jsx)(fr,{disabled:!0,className:a,label:Object(U.jsx)("span",{className:"label",children:"Trim"}),value:i||" "}),Object(U.jsx)(fr,{disabled:!0,className:a,label:Object(U.jsx)("span",{className:"label",children:"Date Added"}),value:l}),t.dateSold&&t.dateSold>0&&Object(U.jsx)(fr,{disabled:!0,className:a,label:Object(U.jsx)("span",{className:"label",children:"Date Sold"}),value:o})]})}var gr=Object(l.a)((function(e){return{editButtonDiv:{width:"100%",marginTop:-25,marginBottom:-10},editButton:{float:"right"},inputField:{marginTop:e.spacing(1),marginBottom:e.spacing(1),margin:"auto",width:"clamp(200px, 100%, 300px)"}}}));function vr(e){var t=gr(),a=e.vehicleDetailState,n=a.mounted,c=a.vehicle,s=a.setVehicle,i=a.setDisableDoneButton,l=Object(r.useState)(!1),o=Object(O.a)(l,2),u=o[0],d=o[1];return Object(r.useEffect)((function(){return i(!!u),function(){return i(!1)}}),[u,i]),Object(U.jsx)(Xe,{children:Object(U.jsxs)(er,{children:[Object(U.jsx)("div",{className:t.editButtonDiv,children:Object(U.jsx)(x.a,{"aria-label":"edit",className:t.editButton,onClick:function(){d(!u)},color:u?"primary":"inherit",size:"large",children:Object(U.jsx)(kc.a,{})})}),u?c&&Object(U.jsx)(pr,{vehicleDetailsMounted:n,vehicle:c,setVehicle:s,setEdit:d,inputFieldStyle:t.inputField}):c&&Object(U.jsx)(mr,{vehicle:c,inputFieldStyle:t.inputField})]})})}function Sr(e){var t,a=e.editNotesState,n=e.setEdit,c=e.className,r=Te().delay,s=a.vehicleDetailsMounted,i=a.mounted,l=a.vehicleId,o=a.notes,u=a.editNotes,d=a.editNotesStatus,j=a.setEditNotesStatus,b=a.setVehicle,O=function(){var e=Object(ee.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j("loading"),e.next=3,r();case 3:na(l,{notes:u}).then((function(e){i.current&&j(e.status),"success"===e.status&&(s.current&&b(e.doc),i&&n(!1)),"failed"===e.status&&console.error(e)}),(function(e){i.current&&j("failed"),console.error(e)}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=Object(U.jsx)(Pe.a,{variant:"contained",color:"primary",onClick:O,children:"Update"}),x=Object(U.jsx)(Pe.a,{variant:"contained",color:"primary",disabled:!0,children:"Update"});return t="loading"===d?Object(U.jsx)(ae.a,{size:25}):o!==u?h:x,Object(U.jsxs)(re,{className:c||"",children:[Object(U.jsx)(Pe.a,{variant:"contained",onClick:function(){return n(!1)},children:"Cancel"}),t]})}function kr(e){var t=je(),a=e.vehicleDetailsMounted,n=e.vehicle,c=e.setVehicle,s=e.setEdit,i=e.inputFieldStyle,l=n.id,o=n.notes,u=Object(r.useState)(o),d=Object(O.a)(u,2),j=d[0],b=d[1],h=Object(r.useState)(""),x=Object(O.a)(h,2),p=x[0],f={vehicleDetailsMounted:a,mounted:t,vehicleId:l,notes:o,editNotes:j,editNotesStatus:p,setEditNotesStatus:x[1],setVehicle:c};return"failed"===p?Object(U.jsx)(Fe,{errorMessage:"Failed to update vehicle notes"}):Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(Na.a,{className:i,children:Object(U.jsx)(L.a,{onChange:function(e){b(e.target.value)},label:"Notes",value:j,variant:"outlined",multiline:!0,maxRows:5,autoFocus:!0})}),Object(U.jsx)(Sr,{className:i,editNotesState:f,setEdit:s})]})}function yr(e){var t=e.vehicle,a=e.inputFieldStyle,n=t.notes;return Object(U.jsx)(fr,{disabled:!0,label:""===n?Object(U.jsx)("span",{className:"label",children:"..."}):Object(U.jsx)("span",{className:"label",children:"Notes"}),value:n,className:a,multiline:!0,maxRows:5})}var wr=Object(l.a)((function(e){return{editButtonDiv:{width:"100%",marginTop:-25,marginBottom:-10},editButton:{float:"right"},inputField:{marginTop:e.spacing(1),marginBottom:e.spacing(1),margin:"auto",width:"clamp(200px, 100%, 400px)"}}}));function Cr(e){var t=wr(),a=e.vehicleDetailState,n=a.mounted,c=a.vehicle,s=a.setVehicle,i=a.setDisableDoneButton,l=Object(r.useState)(!1),o=Object(O.a)(l,2),u=o[0],d=o[1];return Object(r.useEffect)((function(){return i(!!u),function(){return i(!1)}}),[u,i]),Object(U.jsx)(Xe,{children:Object(U.jsxs)(er,{children:[Object(U.jsx)("div",{className:t.editButtonDiv,children:Object(U.jsx)(x.a,{"aria-label":"edit",className:t.editButton,onClick:function(){d(!u)},color:u?"primary":"inherit",size:"large",children:Object(U.jsx)(kc.a,{})})}),u?c&&Object(U.jsx)(kr,{vehicleDetailsMounted:n,vehicle:c,setVehicle:s,setEdit:d,inputFieldStyle:t.inputField}):c&&Object(U.jsx)(yr,{vehicle:c,inputFieldStyle:t.inputField})]})})}var Nr=a(255),Ar=a.n(Nr);function Pr(e){var t=e.order,a=e.setOrder,n=Object(r.useState)(null),c=Object(O.a)(n,2),s=c[0],i=c[1],l=function(e){i(null),a(e)};return Object(U.jsxs)(ce,{children:[Object(U.jsx)(qe,{variant:"h6",children:"Stage History:"}),Object(U.jsx)(x.a,{"aria-controls":"order-menu","aria-haspopup":"true",onClick:function(e){i(e.currentTarget)},size:"large",children:"asc"===t?Object(U.jsx)(st.a,{}):Object(U.jsx)(Ar.a,{})}),Object(U.jsxs)(Q.a,{id:"order-menu",anchorEl:s,keepMounted:!0,open:Boolean(s),onClose:function(){return l(t)},children:[Object(U.jsx)(X.a,{onClick:function(){l("desc")},children:"Oldest First"}),Object(U.jsx)(X.a,{onClick:function(){l("asc")},children:"Newest First"})]})]})}var Fr=a(545),Dr=Object(l.a)({dialog:{padding:20,textAlign:"left",width:"clamp(200px, 80vw, 400px)",marginTop:-50},closeButton:{float:"right"},label:{fontSize:10,float:"left",width:"100%",marginTop:10}});function Tr(e){var t=Dr(),a=e.onClose,n=e.open,c=e.stageAssignment,r=e.timeElapsed,s=c.stage.name,i=c.personPlace.name,l=function(){a()},o=function(e){var t=new Date(e);return Object(U.jsx)("span",{children:t.toLocaleDateString("en-US",{year:"2-digit",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})})};return Object(U.jsxs)(jt.a,{onClose:l,"aria-labelledby":"stage-details-dialog",open:n,children:[Object(U.jsx)("div",{children:Object(U.jsx)(x.a,{className:t.closeButton,onClick:l,size:"large",children:Object(U.jsx)(B.a,{})})}),Object(U.jsxs)("div",{className:t.dialog,children:[Object(U.jsx)("div",{className:t.label,children:"Stage:"}),Object(U.jsx)(b.a,{variant:"subtitle1",children:s}),Object(U.jsx)(g.a,{}),Object(U.jsx)("span",{className:t.label,children:"Person/Place:"}),Object(U.jsx)(b.a,{variant:"subtitle1",children:i}),Object(U.jsx)(g.a,{}),Object(U.jsx)("span",{className:t.label,children:"Status:"}),Object(U.jsx)(b.a,{variant:"subtitle1",children:c.status}),Object(U.jsx)(g.a,{}),Object(U.jsx)("span",{className:t.label,children:"Tasks: "}),Object(U.jsx)(dt.a,{children:c.tasks.map((function(e){return Object(U.jsx)(v.a,{children:e},e+Math.random())}))}),Object(U.jsx)(g.a,{}),Object(U.jsx)("span",{className:t.label,children:"Date Assigned:"}),Object(U.jsx)(b.a,{variant:"subtitle1",children:o(c.dateAssigned)}),Object(U.jsx)(g.a,{}),c.dateCompleted>0&&Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)("span",{className:t.label,children:"Date Completed:"}),Object(U.jsx)(b.a,{variant:"subtitle1",children:o(c.dateCompleted)})]}),Object(U.jsx)(g.a,{}),Object(U.jsx)("span",{className:t.label,children:"complete"===c.status?"Time to Complete":"Time Elapsed"}),Object(U.jsx)(b.a,{variant:"subtitle1",children:r(c.dateAssigned,c.status,c.completeTime)}),Object(U.jsx)(g.a,{})]})]})}var Er=Object(l.a)({tableContainer:{width:"clamp(200px, 100%, 600px)"},table:{minWidth:450,backgroundColor:"#F9F9F9"},stageButton:{width:75,textAlign:"left",overflow:"hidden",textOverflow:"ellipsis"}});function Vr(e){var t=Er(),a=e.sortedStageHistory,n=function(e){var t=new Date(e);return Object(U.jsx)("span",{children:t.toLocaleDateString("en-US",{year:"2-digit",month:"2-digit",day:"2-digit"})})},c=function(e,t,a){if("complete"===t)return Object(U.jsx)(Za,{color:"primary",milliseconds:a});var n=Date.now()-e;return Object(U.jsx)(Za,{color:"secondary",milliseconds:n})},s=Object(r.useState)(!1),i=Object(O.a)(s,2),l=i[0],o=i[1],u=Object(r.useState)(),d=Object(O.a)(u,2),j=d[0],b=d[1];return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(sr.a,{className:t.tableContainer,component:Ue.a,children:Object(U.jsxs)(nr.a,{className:t.table,size:"small","aria-label":"stage history table",children:[Object(U.jsx)(Fr.a,{children:Object(U.jsxs)(ir.a,{children:[Object(U.jsx)(rr.a,{children:"Stage"}),Object(U.jsx)(rr.a,{children:"Time"}),Object(U.jsx)(rr.a,{children:"Person/Place"}),Object(U.jsx)(rr.a,{children:"Assigned"}),Object(U.jsx)(rr.a,{children:"Completed"})]})}),Object(U.jsx)(cr.a,{children:a.map((function(e){return Object(U.jsxs)(ir.a,{children:[Object(U.jsx)(rr.a,{component:"th",scope:"row",children:Object(U.jsx)(Pe.a,{size:"small",color:"incomplete"===e.status?"secondary":"inherit",onClick:function(){return b(e),void o(!0)},children:Object(U.jsx)("span",{className:t.stageButton,children:e.stage.name})})}),Object(U.jsx)(rr.a,{children:c(e.dateAssigned,e.status,e.completeTime)}),Object(U.jsx)(rr.a,{children:e.personPlace.name}),Object(U.jsx)(rr.a,{component:"th",scope:"row",children:n(e.dateAssigned)}),Object(U.jsx)(rr.a,{children:e.dateCompleted>0&&n(e.dateCompleted)})]},e.dateAssigned)}))})]})}),j&&Object(U.jsx)(Tr,{open:l,onClose:function(){o(!1),b(void 0)},stageAssignment:j,timeElapsed:c})]})}function Br(e){var t=je(),a=Te().delay,n=e.vehicleId,c=Object(r.useState)([]),s=Object(O.a)(c,2),i=s[0],l=s[1],o=Object(r.useState)(""),u=Object(O.a)(o,2),d=u[0],j=u[1],b=Object(r.useCallback)(Object(ee.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j("loading"),e.next=3,a();case 3:ac(n).then((function(e){t.current&&e.data&&l(e.data),t.current&&j(e.status)}),(function(e){}));case 4:case"end":return e.stop()}}),e)}))),[t,a,n]);Object(r.useEffect)((function(){b()}),[b]);var h=Object(r.useState)("asc"),x=Object(O.a)(h,2),p=x[0],f=x[1],m=Object(xc.a)(i).sort((function(e,t){var a=e.dateAssigned,n=t.dateAssigned;return"desc"===p?a<n?-1:a>n?1:0:"asc"===p?a>n?-1:a<n?1:0:0}));return Object(U.jsx)(Xe,{children:Object(U.jsxs)(er,{children:[Object(U.jsx)(Pr,{order:p,setOrder:f}),"loading"===d?Object(U.jsx)(za.a,{variant:"rectangular",width:"100%",height:200}):Object(U.jsx)(Vr,{sortedStageHistory:m})]})})}var Mr=["children","value","index"];function Ir(e){var t=e.children,a=e.value,n=e.index,c=Object(Uc.a)(e,Mr);return Object(U.jsx)("div",Object(Re.a)(Object(Re.a)({role:"tabpanel",hidden:a!==n,id:"vehicle-tabpanel-".concat(n),"aria-labelledby":"vehicle-tab-".concat(n)},c),{},{children:a===n&&Object(U.jsx)("div",{children:t})}))}function Lr(e){return{id:"vehicle-tab-".concat(e),"aria-controls":"vehicle-tabpanel-".concat(e)}}function zr(e){var t=Object(i.g)(),a=be(),n=e.vehicleDetailState,c=n.vehicle,s=Object(i.i)().tab,l=Object(r.useState)(s),o=Object(O.a)(l,2),u=o[0],d=o[1];Object(r.useEffect)((function(){return d(s)}),[s]);return Object(U.jsxs)("div",{children:[Object(U.jsxs)(Gc.a,{centered:!0,value:u,indicatorColor:"primary",textColor:"primary",onChange:function(e,n){d(n);var r=a.get("prev")?window.location.href.replace(/.*(?=prev=)(prev=)/,""):"";t.push("/vehicle-details/id/".concat(null===c||void 0===c?void 0:c.id,"/").concat(n,"?prev=").concat(r))},"aria-label":"vehicle details navigation",children:[Object(U.jsx)(Hc,Object(Re.a)({label:"Stage",value:"stage"},Lr("stage"))),Object(U.jsx)(Hc,Object(Re.a)({label:"Info",value:"info"},Lr("info"))),Object(U.jsx)(Hc,Object(Re.a)({label:"Notes",value:"notes"},Lr("notes"))),Object(U.jsx)(Hc,Object(Re.a)({label:"History",value:"history"},Lr("history")))]}),Object(U.jsx)(Ir,{value:u,index:"stage",children:Object(U.jsx)(hr,{vehicleDetailState:n})}),Object(U.jsx)(Ir,{value:u,index:"info",children:Object(U.jsx)(vr,{vehicleDetailState:n})}),Object(U.jsx)(Ir,{value:u,index:"notes",children:Object(U.jsx)(Cr,{vehicleDetailState:n})}),Object(U.jsx)(Ir,{value:u,index:"history",children:c&&Object(U.jsx)(Br,{vehicleId:c.id})})]})}var Rr=Object(l.a)((function(e){return{buttonContainer:{width:"100%",textAlign:"right"},button:{marginTop:e.spacing(2),marginRight:e.spacing(2),marginBottom:e.spacing(1)}}}));function Wr(e){var t=be(),a=Object(i.g)(),n=Rr(),c=Te().delay,r=e.disableDoneButton,s=e.mounted,l=e.vehicle,o=e.setUpdateVehicleStatus,u=Be().userPreferences.defaultStageAssignment,d=function(){var e=Object(ee.a)(_.a.mark((function e(){var n,r;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.get("prev")?window.location.href.replace(/.*(?=prev=)(prev=)/,""):"",r=function(){n?a.push("".concat(n)):a.push("/all-vehicles/active/asc/10/first/0")},!l||"complete"!==l.currentStage.status||"sold"===l.status){e.next=9;break}return o("loading"),e.next=6,c();case 6:Zn({vehicleId:l.id,stage:u.stage,personPlace:u.personPlace,tasks:[],dateAssigned:Date.now()}).then((function(e){"success"===e.status&&r(),s.current&&"failed"===e.status&&o("failed")}),(function(e){s.current&&o("failed"),console.error(e)})),e.next=10;break;case 9:r();case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(U.jsx)("div",{className:n.buttonContainer,children:r?Object(U.jsx)(Pe.a,{disabled:!0,className:n.button,color:"primary",variant:"contained",children:"Done"}):Object(U.jsx)(Pe.a,{onClick:d,className:n.button,color:"primary",variant:"contained",children:"Done"})})}function Ur(e){var t=e.errorMessage,a=e.retryAction,n=t||"failed to load vehicle details";return Object(U.jsx)(Ge,{children:Object(U.jsxs)(Ke,{children:[Object(U.jsx)(Ye,{children:Object(U.jsx)(qe,{variant:"h5",children:"Vehicle Details:"})}),Object(U.jsx)(Fe,{errorMessage:n,retryAction:a})]})})}function Gr(){return Object(U.jsxs)(ce,{style:{marginTop:10},children:[Object(U.jsx)(b.a,{children:"This vehicle has been moved to the "}),Object(U.jsx)(Pe.a,{children:Object(U.jsx)(s.b,{to:"/all-vehicles/trash/asc/10/first/0",children:"Trash List"})})]})}function Jr(){return Object(U.jsx)(Ge,{children:Object(U.jsxs)(Ke,{children:[Object(U.jsxs)(Ye,{children:[Object(U.jsx)(za.a,{}),Object(U.jsx)(za.a,{})]}),Object(U.jsx)(g.a,{}),Object(U.jsxs)(ce,{flexDirection:"column",sx:{height:300},children:[Object(U.jsx)(ae.a,{}),Object(U.jsx)(b.a,{children:"Updating vehicle..."})]})]})})}var Hr=Object(l.a)((function(e){return{vehicleTitle:{maxWidth:"80%"}}}));function Yr(){var e=Hr(),t=je(),a=Te().delay,n=Object(i.i)(),c=n.searchCriteria,s=n.searchValue,l=Object(r.useState)(null),o=Object(O.a)(l,2),u=o[0],d=o[1],j=Object(r.useState)("loading"),b=Object(O.a)(j,2),h=b[0],x=b[1],p=Object(r.useState)(""),f=Object(O.a)(p,2),m=f[0],v=f[1],S=Object(r.useState)(""),k=Object(O.a)(S,2),y=k[0],w=k[1],C=Object(r.useState)(!1),N=Object(O.a)(C,2),A=N[0],P=N[1],F={mounted:t,vehicle:u,setVehicle:d,getVehicleStatus:h,setGetVehicleStatus:x,updateVehicleStatus:y,setUpdateVehicleStatus:w,setDisableDoneButton:P},D=Object(r.useCallback)(Object(ee.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(""),x("loading"),e.next=4,a();case 4:It(c,s).then((function(e){t.current&&"success"===e.status&&!e.data&&v("No vehicles match ".concat(c,": ").concat(s)),t.current&&x(e.status),t.current&&d(e.data)}),(function(e){t.current&&x("failed"),console.error(e)}));case 5:case"end":return e.stop()}}),e)}))),[a,c,s,t]);return Object(r.useEffect)((function(){D()}),[D]),"loading"===h?Object(U.jsx)(Vc,{}):"loading"===y?Object(U.jsx)(Jr,{}):"failed"===h||""!==m?Object(U.jsx)(Ur,{errorMessage:m,retryAction:function(){return window.location.reload()}}):Object(U.jsx)(Ge,{children:Object(U.jsxs)(Ke,{children:[Object(U.jsx)(Ye,{children:Object(U.jsxs)(ce,{style:{position:"relative"},children:[Object(U.jsx)("div",{className:e.vehicleTitle,children:u&&Object(U.jsx)(Ya,{vehicle:u,variant:"h6"})}),Object(U.jsx)(ne.a,{position:"absolute",right:0,children:F.vehicle&&Object(U.jsx)(Wc,{vehicleDetailState:F,mounted:t})})]})}),Object(U.jsx)(g.a,{}),"failed"===y?Object(U.jsx)(Fe,{errorMessage:"Failed to update vehicle details"}):"trash"===(null===u||void 0===u?void 0:u.status)?Object(U.jsx)(Gr,{}):Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(zr,{vehicleDetailState:F}),Object(U.jsx)(Wr,{disableDoneButton:A,mounted:t,vehicle:u,setUpdateVehicleStatus:w})]})]})})}var qr=a(547),$r=a(517),Kr=Object(W.a)($r.a)({marginTop:5,marginBottom:5,border:".5pt solid #D0D0D0",width:"100%"}),Qr=a(546);function Xr(e){var t=e.vehiclePage,a=e.getVehicles,n=t.docStartNumber,c=t.docEndNumber,r=t.totalDocs,s=t.vehicles,i=[];s.forEach((function(e){return i.push(e.dateAdded)}));var l=Math.max.apply(Math,i),o=Math.min.apply(Math,i);return r>5?Object(U.jsxs)(ce,{children:[Object(U.jsx)(x.a,{"aria-label":"first-page",onClick:function(){a("first",0)},disabled:1===n,size:"large",children:Object(U.jsx)(fn.a,{})}),Object(U.jsx)(x.a,{"aria-label":"previous-page",onClick:function(){1!==n&&a("prev",o)},disabled:1===n,size:"large",children:Object(U.jsx)(xn.a,{})}),Object(U.jsxs)(b.a,{align:"center",children:["(",n.toLocaleString(),"-",c.toLocaleString(),") / ",r.toLocaleString()]}),Object(U.jsx)(x.a,{"aria-label":"next-page",onClick:function(){c!==r&&a("next",l)},disabled:c===r,size:"large",children:Object(U.jsx)(jn.a,{})}),Object(U.jsx)(x.a,{"aria-label":"last-page",onClick:function(){c!==r&&a("last",0)},disabled:c===r,size:"large",children:Object(U.jsx)(On.a,{})})]}):Object(U.jsx)(U.Fragment,{})}var Zr=Object(l.a)((function(e){return{accordianDetails:{padding:e.spacing(2),paddingTop:0},vehicleList:{width:"100%"}}}));function _r(e){var t,a=Zr(),n=je(),c=Te().delay,s=e.stageId,i=Object(r.useState)({docStartNumber:0,docEndNumber:0,totalDocs:0,vehicles:[]}),l=Object(O.a)(i,2),o=l[0],u=l[1],d=Object(r.useState)("loading"),j=Object(O.a)(d,2),b=j[0],h=j[1],x=Object(r.useCallback)(function(){var e=Object(ee.a)(_.a.mark((function e(t,a){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h("loading"),e.next=3,c();case 3:Bt("active","asc",5,t,a,"stageId=".concat(s)).then((function(e){n.current&&h(e.status),"success"===e.status&&n.current&&e.data&&u(e.data),"failed"===e.status&&console.error(e)}),(function(e){n.current&&h("failed"),console.error(e)}));case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),[c,n,s]);return Object(r.useEffect)((function(){x("first",0)}),[x]),t="failed"===b?Object(U.jsx)(Fe,{errorMessage:"Error loading vehicles..."}):"loading"===b?Object(U.jsx)(Wa,{skeletonCount:10}):Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(dt.a,{className:a.vehicleList,children:o.vehicles.map((function(e){return Object(U.jsx)(ts,{vehicle:e},e.id)}))}),Object(U.jsx)(Xr,{vehiclePage:o,getVehicles:x})]}),Object(U.jsx)(Qr.a,{className:a.accordianDetails,children:t})}var es=Object(l.a)((function(e){return{vehicle:{width:"100%"},vehicleDivider:{width:"98%"}}}));function ts(e){var t=es(),a=Object(i.g)(),n=e.vehicle;return Object(U.jsxs)("div",{className:t.vehicle,children:[Object(U.jsx)(g.a,{className:t.vehicleDivider}),Object(U.jsxs)(Ja,{onClick:function(){return e=n.id,void a.push("/vehicle-details/id/".concat(e,"/stage?prev=/stages"));var e},children:[Object(U.jsx)(Ya,{vehicle:n,listItem:!0}),Object(U.jsxs)(qa,{children:[Object(U.jsx)(Ka,{size:"small",label:function(e){var t=Date.now()-e;return Object(U.jsx)(Za,{milliseconds:t})}(n.currentStage.dateAssigned)}),Object(U.jsx)(Ka,{size:"small",label:n.currentStage.personPlace.name,color:"primary"})]})]}),Object(U.jsx)(g.a,{className:t.vehicleDivider})]},n.id)}var as=Object(l.a)((function(e){return{accordianDetails:{padding:e.spacing(2),paddingTop:0},vehicleList:{width:"100%"}}}));function ns(e){var t,a=as(),n=je(),c=Te().delay,s=e.personPlaceId,i=Object(r.useState)({docStartNumber:0,docEndNumber:0,totalDocs:0,vehicles:[]}),l=Object(O.a)(i,2),o=l[0],u=l[1],d=Object(r.useState)("loading"),j=Object(O.a)(d,2),b=j[0],h=j[1],x=Object(r.useCallback)(function(){var e=Object(ee.a)(_.a.mark((function e(t,a){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h("loading"),e.next=3,c();case 3:Bt("active","asc",5,t,a,"personPlaceId=".concat(s)).then((function(e){n.current&&h(e.status),"success"===e.status&&n.current&&e.data&&u(e.data),"failed"===e.status&&console.error(e)}),(function(e){n.current&&h("failed"),console.error(e)}));case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),[c,n,s]);return Object(r.useEffect)((function(){x("first",0)}),[x]),t="failed"===b?Object(U.jsx)(Fe,{errorMessage:"Error loading vehicles..."}):"loading"===b?Object(U.jsx)(Wa,{skeletonCount:5}):Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(dt.a,{className:a.vehicleList,children:o.vehicles.map((function(e){return Object(U.jsx)(rs,{vehicle:e},e.id)}))}),Object(U.jsx)(Xr,{vehiclePage:o,getVehicles:x})]}),Object(U.jsx)(Qr.a,{className:a.accordianDetails,children:t})}var cs=Object(l.a)((function(e){return{vehicle:{width:"100%"},vehicleDivider:{width:"98%"}}}));function rs(e){var t=cs(),a=Object(i.g)(),n=e.vehicle;return Object(U.jsxs)("div",{className:t.vehicle,children:[Object(U.jsx)(g.a,{className:t.vehicleDivider}),Object(U.jsxs)(Ja,{onClick:function(){return e=n.id,void a.push("/vehicle-details/id/".concat(e,"/stage?prev=/people-places"));var e},children:[Object(U.jsx)(Ya,{vehicle:n,listItem:!0}),Object(U.jsxs)(qa,{children:[Object(U.jsx)(Ka,{size:"small",label:function(e){var t=Date.now()-e;return Object(U.jsx)(Za,{milliseconds:t})}(n.currentStage.dateAssigned)}),Object(U.jsx)(Ka,{size:"small",label:n.currentStage.stage.name,color:"primary"})]})]}),Object(U.jsx)(g.a,{className:t.vehicleDivider})]},n.id)}var ss=Object(l.a)((function(e){return{list:{margin:"auto",width:"clamp(290px, 100%, 500px)"},accordianDetails:{padding:0},vehicleList:{width:"100%"}}}));function is(e){var t=ss(),a=e.variant,n=e.accordianTitles,c=function(e,t){return"peoplePlaces"===a?"Small Town Auto Sales"!==t.name&&e>5?"secondary":"primary":"stages"===a?"For Sale"!==t.name&&e>5?"secondary":"primary":void 0};return Object(U.jsx)("div",{className:t.list,children:n.filter((function(e){return e.count})).map((function(e){return Object(U.jsx)("div",{children:Object(U.jsxs)(Kr,{children:[Object(U.jsx)(qr.a,{expandIcon:Object(U.jsx)(pt.a,{}),children:Object(U.jsxs)(b.a,{color:c(e.count,e),children:[e.name," (",e.count.toLocaleString(),")"]})}),"stages"===a?Object(U.jsx)(_r,{stageId:e.id}):Object(U.jsx)(ns,{personPlaceId:e.id})]})},e.id)}))})}function ls(){var e,t=je(),a=Te().delay,n=Object(r.useState)([]),c=Object(O.a)(n,2),s=c[0],i=c[1],l=Object(r.useState)("loading"),o=Object(O.a)(l,2),u=o[0],d=o[1],j=Object(r.useCallback)(Object(ee.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d("loading"),e.next=3,a();case 3:Rn().then((function(e){t.current&&d(e.status),t.current&&"success"===e.status&&e.data&&i(e.data),"failed"===e.status&&console.error(e)}),(function(e){t.current&&d("failed"),console.error(e)}));case 4:case"end":return e.stop()}}),e)}))),[a,t]);return Object(r.useEffect)((function(){j()}),[j]),e="failed"===u?Object(U.jsx)(Fe,{errorMessage:"Error loading People/Places view....",retryAction:function(){return window.location.reload()}}):"loading"===u?Object(U.jsx)(Wa,{skeletonCount:10}):Object(U.jsx)(is,{variant:"peoplePlaces",accordianTitles:s}),Object(U.jsx)(Ge,{children:Object(U.jsxs)(Ke,{children:[Object(U.jsxs)(Ye,{children:[Object(U.jsx)($e,{icon:Object(U.jsx)(w.a,{color:"primary"}),variant:"h5",children:"People/Places"}),Object(U.jsx)(g.a,{})]}),Object(U.jsx)("br",{}),e]})})}var os=a(258),us=a.n(os),ds=a(150),js=a(257),bs=a.n(js),Os=Object(l.a)((function(e){return{updateButtons:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",marginTop:10},updateButton:{width:100}}}));function hs(e){var t=Os(),a=Te().delay,n=e.mounted,c=e.setReorderStages,r=e.originalStageOrder,s=e.editStageOrder,i=e.setEditStageOrder,l=e.setOrderStagesStatus,o=e.getStageVehicleCounts,u=function(){var e=Object(ee.a)(_.a.mark((function e(){var t;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],s.forEach((function(e,a){e!==r[a]&&t.push({id:e.id,order:a})})),l("loading"),e.next=5,a();case 5:cc(t).then((function(e){n&&l(e.status),n&&"failed"===e.status&&console.error(e),"success"===e.status&&o(),n&&c(!1)}),(function(e){n&&l("failed"),console.error(e)}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(U.jsxs)(Na.a,{className:t.updateButtons,children:[Object(U.jsx)(Pe.a,{className:t.updateButton,onClick:function(){c(!1),i(r)},children:"cancel"}),function(e,t){for(var a=0;a<e.length;++a)if(e[a]!==t[a])return!1;return!0}(r,s)?Object(U.jsx)(Pe.a,{disabled:!0,className:t.updateButton,children:"update"}):Object(U.jsx)(Pe.a,{className:t.updateButton,onClick:u,color:"primary",children:"update"})]})}var xs=Object(l.a)((function(e){return{stage:{marginTop:5,marginBottom:5,border:"1pt solid #999999"},list:{backgroundColor:"#F9F9F9",padding:e.spacing(1)}}}));function ps(e){var t=je(),a=xs(),n=Te().delay,c=e.setReorderStages,s=e.getStageVehicleCounts,i=Object(r.useState)([]),l=Object(O.a)(i,2),o=l[0],u=l[1],d=Object(r.useState)([]),j=Object(O.a)(d,2),h=j[0],x=j[1],p=Object(r.useState)(""),f=Object(O.a)(p,2),m=f[0],g=f[1],v=Object(r.useState)(""),S=Object(O.a)(v,2),k=S[0],y=S[1],w=Object(r.useCallback)(Object(ee.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g("loading"),e.next=3,n();case 3:Un().then((function(e){t.current&&g(e.status),"success"===e.status&&t.current&&e.data&&(u(e.data),x(e.data)),"failed"===e.status&&console.error(e)}),(function(e){t.current&&g("failed"),console.error(e)}));case 4:case"end":return e.stop()}}),e)}))),[n,t]);Object(r.useEffect)((function(){w()}),[w]);var C=Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)($r.a,{disabled:!0,className:a.stage,children:Object(U.jsx)(qr.a,{children:Object(U.jsx)(b.a,{children:"Assign"})})}),Object(U.jsx)(ds.a,{onDragEnd:function(e){var t=Object(xc.a)(h),a=t.splice(e.source.index,1),n=Object(O.a)(a,1)[0];e.destination&&t.splice(e.destination.index,0,n),x(t)},children:Object(U.jsx)(ds.c,{droppableId:"stages",children:function(e){return Object(U.jsxs)(dt.a,Object(Re.a)(Object(Re.a)({className:a.list},e.droppableProps),{},{ref:e.innerRef,children:[h.map((function(e,t){return"Assign"!==e.name&&"For Sale"!==e.name?Object(U.jsx)(ds.b,{draggableId:e.id,index:t,children:function(t){return Object(U.jsx)($r.a,Object(Re.a)(Object(Re.a)(Object(Re.a)({className:a.stage,ref:t.innerRef},t.draggableProps),t.dragHandleProps),{},{children:Object(U.jsx)(qr.a,{expandIcon:Object(U.jsx)(bs.a,{}),children:Object(U.jsx)(b.a,{children:e.name})})}))}},e.id):Object(U.jsx)("span",{},e.id)})),e.placeholder]}))}})}),Object(U.jsx)($r.a,{disabled:!0,className:a.stage,children:Object(U.jsx)(qr.a,{children:Object(U.jsx)(b.a,{children:"For Sale"})})}),Object(U.jsx)(hs,{mounted:t,setReorderStages:c,originalStageOrder:o,editStageOrder:h,setEditStageOrder:x,setOrderStagesStatus:y,getStageVehicleCounts:s})]});switch(m){case"failed":return Object(U.jsx)(Fe,{errorMessage:"Error loading Edit Stage Order"});case"loading":return Object(U.jsx)(Wa,{skeletonCount:10});default:switch(k){case"failed":return Object(U.jsx)(Fe,{errorMessage:"Error saving Edited Stage Order"});case"loading":return Object(U.jsx)(Wa,{skeletonCount:10});default:return C}}}function fs(){var e=je(),t=Te().delay,a=Object(r.useState)([]),n=Object(O.a)(a,2),c=n[0],s=n[1],i=Object(r.useState)("loading"),l=Object(O.a)(i,2),o=l[0],u=l[1],d=Object(r.useCallback)(Object(ee.a)(_.a.mark((function a(){return _.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return u("loading"),a.next=3,t();case 3:Ln().then((function(t){e.current&&u(t.status),e.current&&"success"===t.status&&t.data&&s(t.data),"failed"===t.status&&console.error(t)}),(function(t){e.current&&u("failed"),console.error(t)}));case 4:case"end":return a.stop()}}),a)}))),[t,e]);Object(r.useEffect)((function(){d()}),[d]);var j,b=Object(r.useState)(!1),h=Object(O.a)(b,2),x=h[0],p=h[1];return j="failed"===o?Object(U.jsx)(Fe,{errorMessage:"Error loading Stages view...",retryAction:function(){return window.location.reload()}}):"loading"===o?Object(U.jsx)(Wa,{skeletonCount:10}):x?Object(U.jsx)(ps,{setReorderStages:p,getStageVehicleCounts:d}):Object(U.jsx)(is,{variant:"stages",accordianTitles:c}),Object(U.jsx)(Ge,{children:Object(U.jsxs)(Ke,{children:[Object(U.jsxs)(Ye,{children:[Object(U.jsx)($e,{icon:Object(U.jsx)(w.a,{color:"primary"}),variant:"h5",children:"Stages"}),Object(U.jsx)(g.a,{})]}),Object(U.jsx)(le,{children:Object(U.jsx)(Pe.a,{startIcon:Object(U.jsx)(us.a,{}),onClick:function(){p(!x)},children:"reorder"})}),j]})})}var ms=a(58);function gs(e){return e<6e4?"".concat(Math.round(e/1e3)," secs"):e<36e5?"".concat(Math.round(e/6e4)," mins"):e<864e5?"".concat(Math.round(e/36e5)," hrs"):"".concat(Math.round(e/864e5*10)/10," days")}var vs=Object(l.a)({donutChart:{height:"100%",width:"100%"}});function Ss(e){var t=vs(),a=e.data,n=e.total,c=e.totalLabel,s=Object(r.useRef)(null);return Object(r.useLayoutEffect)((function(){var e=ms.e().domain(a.map((function(e){return e.name}))).range(ms.f),t=ms.c().padAngle(.005).sort(null).value((function(e){return e.value})),r=t(a),i=500,l=r.filter((function(e){return e.endAngle-e.startAngle<=.25})),o=30*l.length+0+10,u=430+o,d=function(){return ms.a().innerRadius(140).outerRadius(200)},j=function(t){return e(t.data.name)},b=function(e){return e.split(" ").join("")};ms.g("#donut-chart").remove();var O=ms.g(s.current).append("svg").attr("id","donut-chart").attr("viewBox","0, 0, ".concat(i,", ").concat(u)),h=O.append("defs").append("filter").attr("id","drop-shadow").attr("height","150%").attr("width","150%");h.append("feGaussianBlur").attr("in","SourceAlpha").attr("stdDeviation",2).attr("result","blur"),h.append("feOffset").attr("in","blur").attr("dx",3).attr("dy",3).attr("result","offsetBlur");var x=h.append("feMerge");x.append("feMergeNode").attr("in","offsetBlur"),x.append("feMergeNode").attr("in","SourceGraphic");var p=o+20-u/2;O.append("svg").attr("viewBox","".concat(-250,", ").concat(p,", ").concat(i," ,").concat(400)).selectAll("path").data(t([{name:"",value:1}])).join("path").attr("fill","white").attr("d",d()).style("filter","url(#drop-shadow)");var f=O.append("svg").attr("viewBox","".concat(-250,", ").concat(p,", ").concat(i," ,").concat(400));f.selectAll("path").data(r).join("path").attr("fill",j).attr("d",d()).append("title").text((function(e){return"".concat(e.data.name,": ").concat(gs(e.data.value))})),f.append("g").attr("id","labelG").attr("font-size",14).attr("text-anchor","middle").selectAll("text").data(r).join("text").attr("id",(function(e){return b(e.data.name)})).attr("transform",(function(e){return"translate(".concat(d().centroid(e),")")})).style("fill","white").call((function(e){return e.filter((function(e){return e.endAngle-e.startAngle>.25})).append("tspan").attr("y","-0.4em").text((function(e){return e.data.name}))})).call((function(e){return e.filter((function(e){return e.endAngle-e.startAngle>.25})).append("tspan").attr("x",0).attr("y","0.7em").text((function(e){return"".concat(gs(e.data.value))}))}));f.insert("g","#labelG").selectAll("rect").data(r).join("rect").attr("x",(function(e){var t,a=null===(t=document.querySelector("#".concat(b(e.data.name))))||void 0===t?void 0:t.getBoundingClientRect().width,n=a&&a+10;return n&&-n/2})).attr("y",(function(e){var t,a=null===(t=document.querySelector("#".concat(b(e.data.name))))||void 0===t?void 0:t.getBoundingClientRect().height,n=a&&a+10;return n&&-n/2})).attr("width",(function(e){var t,a=null===(t=document.querySelector("#".concat(b(e.data.name))))||void 0===t?void 0:t.getBoundingClientRect().width;return a&&a+10})).attr("height",(function(e){var t,a=null===(t=document.querySelector("#".concat(b(e.data.name))))||void 0===t?void 0:t.getBoundingClientRect().height;return a&&a+10})).attr("fill","black").attr("fill-opacity",.5).attr("rx",5).attr("transform",(function(e){return"translate(".concat(d().centroid(e),")")}));var m=f.append("g").append("text").attr("text-anchor","middle");m.append("tspan").text(n?"".concat(gs(n)):"N/A").attr("font-size",48),m.append("tspan").text(c).attr("y",30).attr("x",0);var g=O.append("g");g.selectAll("rect").data(l).join("rect").attr("height",20).attr("width",20).attr("fill",j).attr("stroke","black").attr("stroke-width",.5).attr("x",25).attr("y",(function(e,t){return 430+30*t})).style("filter","url(#drop-shadow)"),g.selectAll("text").data(l).join("text").attr("text-anchor","start").attr("font-size",14).attr("x",55).attr("y",(function(e,t){return 430+30*t+15})).text((function(e){return"".concat(e.data.name," / ").concat(gs(e.data.value))}))}),[a,n,c]),Object(U.jsx)(Ue.a,{ref:s,className:t.donutChart})}var ks=Object(l.a)({chip:{minWidth:95}});function ys(e){var t=ks(),a=e.turnStatistics,n=a.count,c=a.average,r=a.median,s=a.mode;return Object(U.jsx)(sr.a,{component:Ue.a,children:Object(U.jsxs)(nr.a,{"aria-label":"overview stats table",children:[Object(U.jsx)(Fr.a,{children:Object(U.jsxs)(ir.a,{children:[Object(U.jsx)(rr.a,{children:"Overview"}),Object(U.jsx)(rr.a,{align:"center",children:"Average"}),Object(U.jsx)(rr.a,{align:"center",children:"Median"}),Object(U.jsx)(rr.a,{align:"center",children:"Mode (days)"})]})}),Object(U.jsxs)(cr.a,{children:[Object(U.jsxs)(ir.a,{children:[Object(U.jsxs)(rr.a,{component:"th",scope:"row",align:"left",children:["Become For Sale (",n.getForSale,"):"]}),Object(U.jsx)(rr.a,{align:"center",children:Object(U.jsx)(Ka,{className:t.chip,color:"primary",label:Object(U.jsx)(Za,{milliseconds:c.getForSale})})}),Object(U.jsx)(rr.a,{align:"center",children:Object(U.jsx)(Ka,{className:t.chip,color:"primary",label:Object(U.jsx)(Za,{milliseconds:r.getForSale})})}),Object(U.jsx)(rr.a,{align:"center",children:Object(U.jsx)(Ka,{className:t.chip,color:"primary",label:"".concat(s.getForSale," / ").concat(s.getForSalePercent,"%")})})]}),Object(U.jsxs)(ir.a,{children:[Object(U.jsxs)(rr.a,{component:"th",scope:"row",align:"left",children:["To Be Sold (",n.getSold,"):"]}),Object(U.jsx)(rr.a,{align:"center",children:Object(U.jsx)(_a,{className:t.chip,label:Object(U.jsx)(Za,{milliseconds:c.getSold})})}),Object(U.jsx)(rr.a,{align:"center",children:Object(U.jsx)(_a,{className:t.chip,label:Object(U.jsx)(Za,{milliseconds:r.getSold})})}),Object(U.jsx)(rr.a,{align:"center",children:Object(U.jsx)(_a,{className:t.chip,label:"".concat(s.getSold," / ").concat(s.getSoldPercent,"%")})})]}),Object(U.jsxs)(ir.a,{children:[Object(U.jsxs)(rr.a,{component:"th",scope:"row",align:"left",children:["Total Turn Time (",n.total,"):"]}),Object(U.jsx)(rr.a,{align:"center",children:Object(U.jsx)(Ka,{className:t.chip,label:Object(U.jsx)(Za,{milliseconds:c.total})})}),Object(U.jsx)(rr.a,{align:"center",children:Object(U.jsx)(Ka,{className:t.chip,label:Object(U.jsx)(Za,{milliseconds:r.total})})}),Object(U.jsx)(rr.a,{align:"center",children:Object(U.jsx)(Ka,{className:t.chip,label:"".concat(s.total," / ").concat(s.totalPercent,"%")})})]})]})]})})}var ws=Object(l.a)((function(e){return{button:{marginTop:e.spacing(2)}}}));function Cs(e){var t=ws(),a=e.children,n=Object(r.useState)(!1),c=Object(O.a)(n,2),s=c[0],i=c[1];return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(Pe.a,{startIcon:s?Object(U.jsx)(Mn.a,{}):Object(U.jsx)(N.a,{}),onClick:function(){s&&i(!1),!s&&i(!0)},size:"large",className:t.button,children:"Details"}),Object(U.jsx)(et.a,{in:s,timeout:"auto",style:{width:"100%"},children:a})]})}function Ns(e){var t=e.turnStatistics,a=e.getTurnStatsStatus,n=null===t||void 0===t?void 0:t.count,c=null===t||void 0===t?void 0:t.average,r=null===t||void 0===t?void 0:t.median,s=null===t||void 0===t?void 0:t.mode,i=c?[{name:"Recondition Time",value:c.getForSale},{name:"To Get Sold",value:c.getSold}]:[];return"loading"===a?Object(U.jsx)(Ue.a,{children:Object(U.jsx)(ce,{flexDirection:"column",sx:{height:500},children:Object(U.jsx)(za.a,{variant:"rectangular",height:"90%",width:"90%",style:{margin:"auto"}})})}):"failed"===a?Object(U.jsx)(Fe,{errorMessage:"Failed to load statistics...",retryAction:function(){return window.location.reload()}}):Object(U.jsx)(U.Fragment,{children:t&&n&&c&&r&&s?Object(U.jsxs)(ce,{flexDirection:"column",children:[Object(U.jsx)(Ss,{data:i,total:c.total,totalLabel:"avg total time to be sold"}),Object(U.jsx)(Cs,{children:Object(U.jsx)(ys,{turnStatistics:t})})]}):Object(U.jsx)(U.Fragment,{})})}var As=Object(l.a)({dialog:{padding:10}});function Ps(e){var t=As(),a=e.onClose,n=e.selectedValue,c=e.open;return Object(U.jsx)(jt.a,{onClose:function(){a()},open:c,children:Object(U.jsx)(Ue.a,{className:t.dialog,children:Object(U.jsx)(b.a,{variant:"subtitle1",children:n})})})}var Fs=Object(l.a)({list:{width:"100%"},accordionDetails:{padding:0},shortData:{minWidth:50,textAlign:"left"},longData:{minWidth:50},personPlaceLabel:{width:"clamp(150px, 50vw, 200px)",whiteSpace:"nowrap"},subLabel:{maxWidth:175,maxHeight:20,overflowWrap:"break-word",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",cursor:"pointer",marginRight:4},timeDifferenceLabel:{fontSize:10},tableContainer:{width:"100%"},table:{minWidth:450}});function Ds(e){var t=Fs(),a=e.statistics,n=Object(r.useState)(!1),c=Object(O.a)(n,2),s=c[0],i=c[1],l=Object(r.useState)(""),o=Object(O.a)(l,2),u=o[0],d=o[1];return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(dt.a,{className:t.list,children:a.map((function(e){return Object(U.jsx)("div",{children:Object(U.jsxs)(Kr,{children:[Object(U.jsx)(qr.a,{expandIcon:Object(U.jsx)(pt.a,{}),children:Object(U.jsxs)(b.a,{children:[e.name," (",e.count,")"]})}),Object(U.jsx)(Qr.a,{className:t.accordionDetails,children:Object(U.jsx)(sr.a,{className:t.tableContainer,component:Ue.a,children:Object(U.jsxs)(nr.a,{className:t.table,size:"small","aria-label":"stage statistics table",children:[Object(U.jsx)(Fr.a,{children:Object(U.jsxs)(ir.a,{children:[Object(U.jsx)(rr.a,{children:"Person/Place"}),Object(U.jsx)(rr.a,{children:"Avg"}),Object(U.jsx)(rr.a,{children:"Median"}),Object(U.jsxs)(rr.a,{children:["Mode  ",Object(U.jsx)("span",{className:t.timeDifferenceLabel,children:"(days)"})]})]})}),Object(U.jsxs)(cr.a,{children:[Object(U.jsxs)(ir.a,{children:[Object(U.jsxs)(rr.a,{component:"th",scope:"row",children:["All (",e.count,")"]}),Object(U.jsx)(rr.a,{children:Object(U.jsx)("div",{className:t.shortData,children:Object(U.jsx)(Za,{milliseconds:e.average})})}),Object(U.jsx)(rr.a,{children:Object(U.jsx)("div",{className:t.shortData,children:Object(U.jsx)(Za,{milliseconds:e.median})})}),Object(U.jsx)(rr.a,{children:Object(U.jsxs)("div",{className:t.longData,children:[e.mode," / ",e.modePercent,"%"]})})]}),e.portions.map((function(e){return Object(U.jsxs)(ir.a,{children:[Object(U.jsx)(rr.a,{component:"th",scope:"row",onClick:function(){return t=e.name,i(!0),void d(t);var t},children:Object(U.jsx)("div",{className:t.personPlaceLabel,children:Object(U.jsxs)(ie,{whiteSpace:"nowrap",children:[Object(U.jsxs)("div",{className:t.subLabel,children:[e.name," "]}),Object(U.jsxs)("div",{children:[" (",e.count,")"]})]})})}),Object(U.jsx)(rr.a,{children:Object(U.jsx)("div",{className:t.shortData,children:Object(U.jsx)(Za,{milliseconds:e.average})})}),Object(U.jsx)(rr.a,{children:Object(U.jsx)("div",{className:t.shortData,children:Object(U.jsx)(Za,{milliseconds:e.median})})}),Object(U.jsx)(rr.a,{children:Object(U.jsxs)("div",{className:t.longData,children:[e.mode," / ",e.modePercent,"%"]})})]},e.name)}))]})]})})})]})},e.name)}))}),Object(U.jsx)(Ps,{selectedValue:u,open:s,onClose:function(){i(!1),d("")}})]})}var Ts="http://localhost:7000/api/statistics";function Es(){return Vs.apply(this,arguments)}function Vs(){return(Vs=Object(ee.a)(_.a.mark((function e(){var t,a;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(Ts+"/vehicle-turn-statistics");case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bs(){return Ms.apply(this,arguments)}function Ms(){return(Ms=Object(ee.a)(_.a.mark((function e(){var t,a;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(Ts+"/stages-statistics");case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Is(){return Ls.apply(this,arguments)}function Ls(){return(Ls=Object(ee.a)(_.a.mark((function e(){var t,a;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(Ts+"/people-places-statistics");case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zs(e){var t=je(),a=e.forSaleAvg,n=Te().delay,c=Object(r.useState)("loading"),s=Object(O.a)(c,2),i=s[0],l=s[1],o=Object(r.useState)(null),u=Object(O.a)(o,2),d=u[0],j=u[1],b=Object(r.useState)(null),h=Object(O.a)(b,2),x=h[0],p=h[1],f=Object(r.useCallback)(Object(ee.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l("loading"),e.next=3,n();case 3:Bs().then((function(e){t.current&&l(e.status),"success"===e.status&&t.current&&e.data&&(j(e.data.avgOverview.filter((function(e){return"For Sale"!==e.name}))),p(e.data.details)),"failed"===e.status&&console.error(e)}),(function(e){t.current&&l("failed"),console.error(e)}));case 4:case"end":return e.stop()}}),e)}))),[n,t]);return Object(r.useEffect)((function(){f()}),[f]),"loading"===i?Object(U.jsx)(Ue.a,{children:Object(U.jsx)(ce,{flexDirection:"column",sx:{height:500},children:Object(U.jsx)(za.a,{variant:"rectangular",height:"90%",width:"90%",style:{margin:"auto"}})})}):"failed"===i?Object(U.jsx)(Fe,{errorMessage:"Failed to load statistics...",retryAction:function(){return window.location.reload()}}):Object(U.jsx)(U.Fragment,{children:d&&x?Object(U.jsxs)(ce,{flexDirection:"column",children:[Object(U.jsx)(Ss,{data:d,total:a,totalLabel:'avg time to get "For Sale"'}),Object(U.jsx)(Cs,{children:Object(U.jsx)(Ds,{statistics:x})})]}):Object(U.jsx)(U.Fragment,{})})}var Rs=Object(l.a)({chart:{height:"100%",width:"100%"}});function Ws(e){var t=Rs(),a=e.data,n=Object(r.useRef)(null);return Object(r.useLayoutEffect)((function(){var e=50*a.length+20,t=Object(xc.a)(a).sort((function(e,t){return t.value-e.value})),c=ms.d().domain([0,ms.b(a.map((function(e){return e.value})))]).range([0,385]);ms.g("#bar-chart").remove();var r=ms.g(n.current).append("svg").attr("id","bar-chart").attr("viewBox","0, 0, ".concat(500,", ").concat(e)),s=r.append("defs").append("filter").attr("id","drop-shadow").attr("height","150%").attr("width","150%");s.append("feGaussianBlur").attr("in","SourceAlpha").attr("stdDeviation",2).attr("result","blur"),s.append("feOffset").attr("in","blur").attr("dx",3).attr("dy",3).attr("result","offsetBlur");var i=s.append("feMerge");i.append("feMergeNode").attr("in","offsetBlur"),i.append("feMergeNode").attr("in","SourceGraphic"),r.selectAll("rect").data(t).join("rect").attr("fill",(function(e){return e.avgPercentile>=90?"#9500ae":e.avgPercentile>=80?"#d500f9":e.avgPercentile>=60?"#dd33fa":e.avgPercentile>=40?"#757de8":e.avgPercentile>=20?"#3f51b5":"#002984"})).attr("x",20).attr("y",(function(e,t){return 50*t+30})).attr("height",20).attr("width",(function(e){return c(e.value)})).attr("stroke","black").attr("stroke-width",.25).attr("rx",5).style("filter","url(#drop-shadow)"),r.append("g").attr("font-size",14).selectAll("text").data(t).join("text").attr("transform",(function(e,t){return"translate(".concat(20,", ").concat(50*t+27,")")})).call((function(e){return e.append("tspan").text((function(e){return e.name})).attr("font-family","roboto").attr("font-size",16).attr("y",-3)})).call((function(e){return e.append("tspan").attr("x",(function(e){return c(e.value)+15})).attr("y",20).attr("font-style","normal").text((function(e){return"(".concat(gs(e.value),")")}))}))}),[a]),Object(U.jsx)(Ue.a,{ref:n,className:t.chart})}function Us(){var e=je(),t=Te().delay,a=Object(r.useState)("loading"),n=Object(O.a)(a,2),c=n[0],s=n[1],i=Object(r.useState)(null),l=Object(O.a)(i,2),o=l[0],u=l[1],d=Object(r.useState)(null),j=Object(O.a)(d,2),b=j[0],h=j[1],x=Object(r.useCallback)(Object(ee.a)(_.a.mark((function a(){return _.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return s("loading"),a.next=3,t();case 3:Is().then((function(t){e.current&&s(t.status),"success"===t.status&&e.current&&t.data&&(u(t.data.avgOverview.filter((function(e){return"For Sale"!==e.name}))),h(t.data.details)),"failed"===t.status&&console.error(t)}),(function(t){e.current&&s("failed"),console.error(t)}));case 4:case"end":return a.stop()}}),a)}))),[t,e]);return Object(r.useEffect)((function(){x()}),[x]),"loading"===c?Object(U.jsx)(Ue.a,{children:Object(U.jsx)(ce,{flexDirection:"column",sx:{height:500},children:Object(U.jsx)(za.a,{variant:"rectangular",height:"90%",width:"90%",style:{margin:"auto"}})})}):"failed"===c?Object(U.jsx)(Fe,{errorMessage:"Failed to load statistics...",retryAction:function(){return window.location.reload()}}):Object(U.jsx)(U.Fragment,{children:o&&b?Object(U.jsxs)(ce,{flexDirection:"column",children:[Object(U.jsx)(Ws,{data:o}),Object(U.jsx)(Cs,{children:Object(U.jsx)(Ds,{statistics:b})})]}):Object(U.jsx)(U.Fragment,{})})}var Gs=["children","value","index"];function Js(e){var t=e.children,a=e.value,n=e.index,c=Object(Uc.a)(e,Gs);return Object(U.jsx)("div",Object(Re.a)(Object(Re.a)({role:"tabpanel",hidden:a!==n,id:"analytics-tabpanel-".concat(n),"aria-labelledby":"analytics-tab-".concat(n)},c),{},{children:a===n&&Object(U.jsx)("div",{children:t})}))}function Hs(e){return{id:"analytics-tab-".concat(e),"aria-controls":"analytics-tabpanel-".concat(e)}}function Ys(e){var t=Object(i.g)(),a=e.turnStatistics,n=e.getTurnStatsStatus,c=Object(i.i)().tab,s=Object(r.useState)(c),l=Object(O.a)(s,2),o=l[0],u=l[1];Object(r.useEffect)((function(){return u(c)}),[c]);return Object(U.jsxs)("div",{children:[Object(U.jsxs)(Gc.a,{centered:!0,value:o,indicatorColor:"primary",textColor:"primary",onChange:function(e,a){u(a),t.push("/analytics/".concat(a))},"aria-label":"vehicle details navigation",children:[Object(U.jsx)(Hc,Object(Re.a)({label:"Overview",value:"overview"},Hs("overview"))),Object(U.jsx)(Hc,Object(Re.a)({label:"Stages",value:"stages"},Hs("stages"))),Object(U.jsx)(Hc,Object(Re.a)({label:"People/Places",value:"peoplePlaces"},Hs("peoplePlaces")))]}),Object(U.jsx)(Js,{value:o,index:"overview",children:Object(U.jsx)(Ns,{turnStatistics:a,getTurnStatsStatus:n})}),Object(U.jsx)(Js,{value:o,index:"stages",children:Object(U.jsx)(zs,{forSaleAvg:a?a.average.getForSale:0})}),Object(U.jsx)(Js,{value:o,index:"peoplePlaces",children:Object(U.jsx)(Us,{})})]})}function qs(){var e=je(),t=Te().delay,a=Object(r.useState)(null),n=Object(O.a)(a,2),c=n[0],s=n[1],i=Object(r.useState)(""),l=Object(O.a)(i,2),o=l[0],u=l[1],d=Object(r.useCallback)(Object(ee.a)(_.a.mark((function a(){return _.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return u("loading"),a.next=3,t();case 3:Es().then((function(t){e.current&&u(t.status),"success"===t.status&&e.current&&t.data&&s(t.data),"failed"===t.status&&console.error(t)}),(function(t){e.current&&u("failed"),console.error(t)}));case 4:case"end":return a.stop()}}),a)}))),[t,e]);return Object(r.useEffect)((function(){d()}),[d]),Object(U.jsx)(Ge,{children:Object(U.jsxs)(Ke,{children:[Object(U.jsx)(Ye,{children:Object(U.jsx)($e,{icon:Object(U.jsx)(P.a,{color:"primary"}),variant:"h5",children:"Analytics"})}),Object(U.jsx)(g.a,{}),Object(U.jsx)(Ys,{turnStatistics:c,getTurnStatsStatus:o})]})})}var $s=a(548),Ks=a(149),Qs=a.n(Ks);function Xs(e){var t=e.demoState,a=t.clearDatabase,n=t.addVehicleDescriptors,c=t.addStages,r=t.generateVehicles,s=Object(U.jsxs)(v.a,{children:[Object(U.jsx)(S.a,{children:Object(U.jsx)(an.a,{color:"secondary"})}),Object(U.jsx)(k.a,{primary:"Clear Database"})]}),i=Object(U.jsxs)(v.a,{children:[Object(U.jsx)(S.a,{children:Object(U.jsx)(Qs.a,{color:"primary"})}),Object(U.jsx)(k.a,{primary:"Add Vehicle Descriptors"})]}),l=Object(U.jsxs)(v.a,{children:[Object(U.jsx)(S.a,{children:Object(U.jsx)(Qs.a,{color:"primary"})}),Object(U.jsx)(k.a,{primary:"Add Stages and People/Places"})]}),o=Object(U.jsxs)(v.a,{children:[Object(U.jsx)(S.a,{children:Object(U.jsx)(Qs.a,{color:"primary"})}),Object(U.jsx)(k.a,{primary:"Generate Demo Vehicles"})]});return Object(U.jsxs)(dt.a,{id:"demo-dialog-description",children:[a&&s,n&&i,c&&l,r&&o]})}function Zs(e){var t=Be().getUserPreferences,a=e.demoState,n=e.open,c=e.setOpen,r=a.mounted,s=a.setLoading,i=a.clearDatabase,l=a.setClearDatabaseStatus,o=a.addVehicleDescriptors,u=a.setAddVehicleDescriptorsStatus,d=a.addStages,j=a.setAddStagesStatus,b=a.generateVehicles,O=a.setGenerateVehiclesStatus,h=a.vehiclesAmount,x=a.months,p=function(){var e=Object(ee.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i){e.next=4;break}return e.abrupt("return");case 4:return l("loading"),e.next=7,me().then((function(e){r.current&&l(e.status),"failed"===e.status&&console.error(e)}),(function(e){r.current&&l("failed"),console.error(e)}));case 7:return e.abrupt("return");case 8:case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=Object(ee.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o){e.next=4;break}return e.abrupt("return");case 4:return u("loading"),e.next=7,ve().then((function(e){r.current&&u(e.status),"failed"===e.status&&console.error(e)}),(function(e){r.current&&u("failed"),console.error(e)}));case 7:case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(ee.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d){e.next=4;break}return e.abrupt("return");case 4:return j("loading"),e.next=7,ke().then((function(e){r.current&&j(e.status),"failed"===e.status&&console.error(e)}),(function(e){r.current&&j("failed"),console.error(e)}));case 7:case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(ee.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b){e.next=4;break}return e.abrupt("return");case 4:return O("loading"),e.next=7,we(h,x).then((function(e){r.current&&O(e.status),"failed"===e.status&&console.error(e)}),(function(e){r.current&&O("failed"),console.error(e)}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(ee.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),e.next=3,p();case 3:return e.next=5,Promise.all([f(),m()]);case 5:return e.next=7,g();case 7:s(!1),t();case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(U.jsxs)(jt.a,{open:n,"aria-labelledby":"demo-dialog-title","aria-describedby":"demo-dialog-description",children:[Object(U.jsxs)(wa.a,{id:"demo-dialog-title",children:["Continue with the following ",Object(U.jsx)("strong",{children:"PERMANENT"})," action(s)?"]}),Object(U.jsx)(bt.a,{children:Object(U.jsx)(Xs,{demoState:a})}),Object(U.jsxs)(Ca.a,{children:[Object(U.jsx)(Pe.a,{color:"primary",onClick:function(){return c(!1)},children:"go back"}),Object(U.jsx)(Pe.a,{color:"primary",onClick:v,children:"continue"})]})]})}function _s(e){var t=e.demoState,a=Object(r.useState)(!1),n=Object(O.a)(a,2),c=n[0],s=n[1],i=t.loading,l=t.clearDatabase,o=t.addVehicleDescriptors,u=t.addStages,d=t.generateVehicles,j=t.vehiclesAmountError,b=t.monthsError;return Object(r.useEffect)((function(){i&&s(!1)}),[i]),Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(Pe.a,{color:"primary",variant:"outlined",onClick:function(){return s(!0)},disabled:!l&&!o&&!u&&!d||""!==j||""!==b,children:"continue"}),Object(U.jsx)(Zs,{demoState:t,open:c,setOpen:s})]})}function ei(e){var t=e.generateVehicles,a=e.vehiclesAmountInput,n=e.setVehiclesAmountInput,c=e.vehiclesAmountError,r=e.setVehiclesAmountError,s=e.setVehiclesAmount,i=e.months,l=e.setMonths,o=e.monthsError,u=e.setMonthsError;return Object(U.jsx)(et.a,{in:t,children:Object(U.jsxs)(ce,{flexDirection:"column",children:[Object(U.jsx)(L.a,{size:"small",margin:"normal",id:"vehicle-amount",label:"Amount of Vehicles to Add",variant:"outlined",value:a,onChange:function(e){var t=e.target.value.trim().replace(/[^0-9]/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",");n(t);var a=t.replace(",","");s(a);/^\d+$/.test(a)?parseInt(a)>1e4?r("Vehicle Amount must be less than 10,000"):r(""):r("Vehice Amount must be a whole number")},error:!!c,helperText:c}),Object(U.jsx)(L.a,{size:"small",margin:"normal",id:"months",label:"Amount of Months to Go Back",variant:"outlined",value:i,onChange:function(e){var t=e.target.value.trim().replace(/[^0-9]/g,"");l(t);/^\d+$/.test(t)?parseInt(t)>36?u("Months must be less than or equal to 36"):u(""):u("Months must be a whole number")},error:!!o,helperText:o})]})})}var ti=Object(Ua.a)(oe)((function(e){e.theme;return{height:200}}));function ai(e){var t=e.loading,a=e.clearDatabaseStatus,n=e.addVehicleDescriptorsStatus,c=e.addStagesStatus,r=e.generateVehiclesStatus;return Object(U.jsx)(jt.a,{open:t,fullWidth:!0,children:Object(U.jsxs)(ti,{flexDirection:"column",children:[Object(U.jsx)(ae.a,{}),Object(U.jsxs)(ce,{flexDirection:"column",sx:{textAlign:"center"},children:["loading"===a&&Object(U.jsx)(b.a,{children:"...Clearing Database"}),"loading"===n&&Object(U.jsx)(b.a,{children:"...Adding Vehicle Descriptors"}),"loading"===c&&Object(U.jsx)(b.a,{children:"...Adding Stages/People/Places"}),"loading"===r&&Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(b.a,{children:"...Generating Vehicles"}),Object(U.jsx)(b.a,{children:"(this could take several minutes)"})]})]})]})})}var ni=Object(l.a)((function(e){return{formControl:{padding:e.spacing(3),marginTop:e.spacing(1),marginBottom:e.spacing(3)}}}));function ci(){var e=ni(),t=je(),a=Object(i.g)(),n=Object(r.useState)(!1),c=Object(O.a)(n,2),s=c[0],l=c[1],o=Object(r.useState)(!1),u=Object(O.a)(o,2),d=u[0],j=u[1],b=Object(r.useState)(!1),h=Object(O.a)(b,2),x=h[0],p=h[1],f=Object(r.useState)(""),m=Object(O.a)(f,2),g=m[0],v=m[1],S=Object(r.useState)(!1),k=Object(O.a)(S,2),y=k[0],w=k[1],C=Object(r.useState)(""),N=Object(O.a)(C,2),A=N[0],P=N[1],F=Object(r.useState)(!1),D=Object(O.a)(F,2),T=D[0],E=D[1],V=Object(r.useState)(""),B=Object(O.a)(V,2),M=B[0],I=B[1],L=Object(r.useState)(!1),z=Object(O.a)(L,2),R=z[0],W=z[1],G=Object(r.useState)(""),J=Object(O.a)(G,2),H=J[0],Y=J[1],q=Object(r.useState)("300"),$=Object(O.a)(q,2),K=$[0],Q=$[1],X=Object(r.useState)(""),Z=Object(O.a)(X,2),_=Z[0],ee=Z[1],te=Object(r.useState)("300"),ae=Object(O.a)(te,2),ne=ae[0],re=ae[1],se=Object(r.useState)("12"),ie=Object(O.a)(se,2),le=ie[0],oe=ie[1],ue=Object(r.useState)(""),de=Object(O.a)(ue,2),be=de[0],Oe=de[1],he={mounted:t,loading:s,setLoading:l,error:d,setError:j,clearDatabase:x,setClearDatabase:p,clearDatabaseStatus:g,setClearDatabaseStatus:v,addVehicleDescriptors:y,setAddVehicleDescriptors:w,addVehicleDescriptorsStatus:A,setAddVehicleDescriptorsStatus:P,addStages:T,setAddStages:E,addStagesStatus:M,setAddStagesStatus:I,generateVehicles:R,setGenerateVehicles:W,generateVehiclesStatus:H,setGenerateVehiclesStatus:Y,vehiclesAmount:ne,vehiclesAmountError:_,months:le,monthsError:be};return Object(r.useEffect)((function(){R?(p(!0),w(!0),E(!0)):(y||T)&&p(!0)}),[R,y,T]),Object(r.useEffect)((function(){if(!s){var e=[{check:x,status:g},{check:y,status:A},{check:M,status:M},{check:R,status:H}];if(e.find((function(e){return""!==e.status})))void 0===e.map((function(e){return!0!==e.check||"success"===e.status})).find((function(e){return!e}))?(p(!1),v(""),w(!1),P(""),E(!1),I(""),W(!1),Y(""),a.push("/all-vehicles/active/asc/10/first/0")):j(!0)}}),[s,x,g,y,A,T,M,R,H,a]),d?Object(U.jsx)(Fe,{errorMessage:"An error occured in 1 or more demo actions...."}):Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(ai,{loading:s,clearDatabaseStatus:g,addVehicleDescriptorsStatus:A,addStagesStatus:M,generateVehiclesStatus:H}),Object(U.jsxs)(ce,{flexDirection:"column",children:[Object(U.jsxs)(Na.a,{component:Ue.a,className:e.formControl,children:[Object(U.jsx)($s.a,{children:Object(U.jsx)(Va.a,{control:Object(U.jsx)(Ba.a,{disabled:y||T||R,checked:x,onChange:function(){return p(!x)}}),label:"Clear Database"})}),Object(U.jsx)($s.a,{children:Object(U.jsx)(Va.a,{control:Object(U.jsx)(Ba.a,{color:"primary",disabled:R,checked:y,onChange:function(){return w(!y)}}),label:"Add Vehicle Descriptors"})}),Object(U.jsx)($s.a,{children:Object(U.jsx)(Va.a,{control:Object(U.jsx)(Ba.a,{color:"primary",disabled:R,checked:T,onChange:function(){return E(!T)}}),label:"Add Stages and People/Places"})}),Object(U.jsxs)($s.a,{children:[Object(U.jsx)(Va.a,{control:Object(U.jsx)(Ba.a,{color:"primary",checked:R,onChange:function(){return W(!R)}}),label:"Generate Demo Vehicles"}),Object(U.jsx)(ei,{generateVehicles:R,vehiclesAmountInput:K,setVehiclesAmountInput:Q,vehiclesAmountError:_,setVehiclesAmountError:ee,setVehiclesAmount:re,months:le,setMonths:oe,monthsError:be,setMonthsError:Oe})]})]}),Object(U.jsx)(_s,{demoState:he})]})]})}function ri(){return Object(U.jsx)(Ge,{children:Object(U.jsxs)(Ke,{children:[Object(U.jsxs)(Ye,{children:[Object(U.jsx)($e,{icon:Object(U.jsx)(D.a,{color:"primary"}),variant:"h5",children:"Demo Actions"}),Object(U.jsx)(g.a,{})]}),Object(U.jsx)(ci,{})]})})}var si=a(509),ii=Object(Ua.a)(L.a,{shouldForwardProp:function(e){return"variant"!==e},name:"LoadingDelayField",slot:"Root",overridesResolver:function(e,t){return[t.root,"outlined"===e.variant&&t.outlined]}})((function(e){return{width:"150px",marginLeft:e.theme.spacing(2),"&.MuiTextField-root":{textAlign:"center"}}})),li=Object(Ua.a)(le)((function(e){return{margin:e.theme.spacing(2)}}));function oi(){var e=Te(),t=e.loadingTime,a=e.saveLoadingTime,n=e.db,c=e.saveDb,s=Object(r.useState)(t.toLocaleString("en-US")),i=Object(O.a)(s,2),l=i[0],o=i[1],u=Object(r.useState)(t),d=Object(O.a)(u,2),j=d[0],h=d[1],x=Object(r.useState)(""),p=Object(O.a)(x,2),f=p[0],m=p[1],g=Object(r.useState)(n),v=Object(O.a)(g,2),S=v[0],k=v[1];return Object(r.useEffect)((function(){var e=t.toLocaleString("en-US");o(e)}),[t]),Object(U.jsx)(Ge,{children:Object(U.jsxs)(Ke,{children:[Object(U.jsx)(Ye,{children:Object(U.jsx)($e,{icon:Object(U.jsx)(E.a,{color:"primary"}),variant:"h5",children:"Demo Settings"})}),Object(U.jsxs)(Xe,{children:[Object(U.jsxs)(re,{children:[Object(U.jsx)(b.a,{children:"Simulated Loading Delay (milliseconds):"}),Object(U.jsx)(ii,{value:l,onChange:function(e){var t=e.target.value.trim().replace(/[^0-9]/g,"");if(parseInt(t)>1e4)m("cannot exceed 10 seconds");else{m(""),h(t?parseInt(t):0);var a=t.replace(/^0+(?!$)/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",");o(a)}},onBlur:function(){j>1e4?(o("0"),m("cannot exceed 10 seconds")):m("")},size:"small",inputProps:{sx:{textAlign:"right"}},error:!!f,helperText:f})]}),Object(U.jsx)(li,{children:Object(U.jsx)(Pe.a,{disabled:t===j,onClick:function(){return a(j)},children:"Save"})}),Object(U.jsxs)(re,{children:[Object(U.jsx)(b.a,{children:"Database:"}),Object(U.jsx)(Na.a,{children:Object(U.jsxs)(si.a,{value:S||"",onChange:function(e){k(e.target.value)},sx:{width:"150px"},size:"small",children:[Object(U.jsx)(X.a,{value:"mongodb",children:"MongoDB"}),Object(U.jsx)(X.a,{value:"mysql",children:"MySQL"})]})})]}),Object(U.jsx)(li,{children:Object(U.jsx)(Pe.a,{disabled:n===S,onClick:function(){return c(S)},children:"Save"})})]})]})})}var ui=Object(l.a)((function(e){return{app:{fontFamily:"Roboto",backgroundColor:"#404040",minHeight:"100vh",minWidth:"100vw",position:"absolute",left:"0",top:"0"}}}));function di(){var e=ui(),t=Be().currentUser;return Object(U.jsx)("div",{className:e.app,children:Object(U.jsxs)(s.a,{children:[t&&Object(U.jsx)(ze,{}),Object(U.jsxs)(i.d,{children:[Object(U.jsx)(i.b,{exact:!0,path:"/",children:Object(U.jsx)(i.a,{to:"/all-vehicles/active/asc/10/first/0"})}),Object(U.jsx)(i.b,{path:"/log-in",component:_e}),Object(U.jsx)(We,{path:"/all-vehicles/:statusParam/:sortParam/:perPageParam/:pageParam/:compareParam",component:Pn}),Object(U.jsx)(We,{path:"/add-vehicle",component:Ec}),Object(U.jsx)(We,{path:"/vehicle-details/:searchCriteria/:searchValue/:tab",component:Yr}),Object(U.jsx)(We,{path:"/people-places",component:ls}),Object(U.jsx)(We,{path:"/stages",component:fs}),Object(U.jsx)(We,{path:"/analytics/:tab",component:qs}),Object(U.jsx)(We,{path:"/demo-actions",component:ri}),Object(U.jsx)(We,{path:"/demo-settings",component:oi})]})]})})}a(423);var ji=a(501),bi=a(502),Oi=a(549),hi=a(259),xi=Object(hi.a)({mainMenu:{width:"250px"},titleColor:{lightBlue:"#aab6fe",darkBlue:"#49599a"}});function pi(e){return Object(U.jsx)(ji.a,{children:Object(U.jsx)(bi.a,{injectFirst:!0,children:Object(U.jsx)(Oi.a,{theme:xi,children:Object(U.jsx)(Ee,{children:Object(U.jsx)(Me,{children:e.children})})})})})}c.a.render(Object(U.jsx)(pi,{children:Object(U.jsx)(di,{})}),document.getElementById("root"))}},[[424,1,2]]]);
//# sourceMappingURL=main.0427c02c.chunk.js.map